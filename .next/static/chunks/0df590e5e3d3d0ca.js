(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37714,e=>{"use strict";var a=e.i(88851),t=e.i(17641),s=e.i(18670),n=e.i(18419),r=e.i(33765),i=e.i(56618),o=e.i(19874),l=e.i(47549),c=e.i(41120),d=e.i(82861),u=e.i(61053),m="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[x,f,g]=(0,r.createCollection)(h),[v,j]=(0,n.createContextScope)(h,[g]),[b,w]=v(h),y=t.forwardRef((e,t)=>(0,a.jsx)(x.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(x.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(N,{...e,ref:t})})}));y.displayName=h;var N=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:r,orientation:o,loop:h=!1,dir:x,currentTabStopId:g,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:j,onEntryFocus:w,preventScrollOnEntryFocus:y=!1,...N}=e,C=t.useRef(null),_=(0,i.useComposedRefs)(n,C),S=(0,u.useDirection)(x),[D=null,M]=(0,d.useControllableState)({prop:g,defaultProp:v,onChange:j}),[P,E]=t.useState(!1),I=(0,c.useCallbackRef)(w),T=f(r),F=t.useRef(!1),[z,L]=t.useState(0);return t.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(m,I),()=>e.removeEventListener(m,I)},[I]),(0,a.jsx)(b,{scope:r,orientation:o,dir:S,loop:h,currentTabStopId:D,onItemFocus:t.useCallback(e=>M(e),[M]),onItemShiftTab:t.useCallback(()=>E(!0),[]),onFocusableItemAdd:t.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>L(e=>e-1),[]),children:(0,a.jsx)(l.Primitive.div,{tabIndex:P||0===z?-1:0,"data-orientation":o,...N,ref:_,style:{outline:"none",...e.style},onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,()=>{F.current=!0}),onFocus:(0,s.composeEventHandlers)(e.onFocus,e=>{let a=!F.current;if(e.target===e.currentTarget&&a&&!P){let a=new CustomEvent(m,p);if(e.currentTarget.dispatchEvent(a),!a.defaultPrevented){let e=T().filter(e=>e.focusable);k([e.find(e=>e.active),e.find(e=>e.id===D),...e].filter(Boolean).map(e=>e.ref.current),y)}}F.current=!1}),onBlur:(0,s.composeEventHandlers)(e.onBlur,()=>E(!1))})})}),C="RovingFocusGroupItem",_=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:c=!1,tabStopId:d,...u}=e,m=(0,o.useId)(),p=d||m,h=w(C,r),g=h.currentTabStopId===p,v=f(r),{onFocusableItemAdd:j,onFocusableItemRemove:b}=h;return t.useEffect(()=>{if(i)return j(),()=>b()},[i,j,b]),(0,a.jsx)(x.ItemSlot,{scope:r,id:p,focusable:i,active:c,children:(0,a.jsx)(l.Primitive.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...u,ref:n,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{i?h.onItemFocus(p):e.preventDefault()}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>h.onItemFocus(p)),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;let a=function(e,a,t){var s;let n=(s=e.key,"rtl"!==t?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===a&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===a&&["ArrowUp","ArrowDown"].includes(n)))return S[n]}(e,h.orientation,h.dir);if(void 0!==a){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===a)n.reverse();else if("prev"===a||"next"===a){var t,s;"prev"===a&&n.reverse();let r=n.indexOf(e.currentTarget);n=h.loop?(t=n,s=r+1,t.map((e,a)=>t[(s+a)%t.length])):n.slice(r+1)}setTimeout(()=>k(n))}})})})});_.displayName=C;var S={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k(e,a=!1){let t=document.activeElement;for(let s of e)if(s===t||(s.focus({preventScroll:a}),document.activeElement!==t))return}var D=e.i(86578),M="Tabs",[P,E]=(0,n.createContextScope)(M,[j]),I=j(),[T,F]=P(M),z=t.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,onValueChange:r,defaultValue:i,orientation:c="horizontal",dir:m,activationMode:p="automatic",...h}=e,x=(0,u.useDirection)(m),[f,g]=(0,d.useControllableState)({prop:n,onChange:r,defaultProp:i});return(0,a.jsx)(T,{scope:s,baseId:(0,o.useId)(),value:f,onValueChange:g,orientation:c,dir:x,activationMode:p,children:(0,a.jsx)(l.Primitive.div,{dir:x,"data-orientation":c,...h,ref:t})})});z.displayName=M;var L="TabsList",A=t.forwardRef((e,t)=>{let{__scopeTabs:s,loop:n=!0,...r}=e,i=F(L,s),o=I(s);return(0,a.jsx)(y,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:(0,a.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});A.displayName=L;var R="TabsTrigger",B=t.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,disabled:i=!1,...o}=e,c=F(R,n),d=I(n),u=q(c.baseId,r),m=W(c.baseId,r),p=r===c.value;return(0,a.jsx)(_,{asChild:!0,...d,focusable:!i,active:p,children:(0,a.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...o,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(r)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(r)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;p||i||!e||c.onValueChange(r)})})})});B.displayName=R;var H="TabsContent",O=t.forwardRef((e,s)=>{let{__scopeTabs:n,value:r,forceMount:i,children:o,...c}=e,d=F(H,n),u=q(d.baseId,r),m=W(d.baseId,r),p=r===d.value,h=t.useRef(p);return t.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(D.Presence,{present:i||p,children:({present:t})=>(0,a.jsx)(l.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:m,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0},children:t&&o})})});function q(e,a){return`${e}-trigger-${a}`}function W(e,a){return`${e}-content-${a}`}O.displayName=H;var U=e.i(68614);function V({className:e,...t}){return(0,a.jsx)(z,{"data-slot":"tabs",className:(0,U.cn)("flex flex-col gap-2",e),...t})}function $({className:e,...t}){return(0,a.jsx)(A,{"data-slot":"tabs-list",className:(0,U.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function G({className:e,...t}){return(0,a.jsx)(B,{"data-slot":"tabs-trigger",className:(0,U.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Y({className:e,...t}){return(0,a.jsx)(O,{"data-slot":"tabs-content",className:(0,U.cn)("flex-1 outline-none",e),...t})}var K=e.i(27225),X=e.i(11333);let Q=(0,X.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),J=(0,X.default)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Z=(0,X.default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),ee=(0,X.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var ea=e.i(86733);let et=(0,X.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var es=e.i(60814),en=e.i(99846),er=e.i(32954);function ei({className:e,...t}){return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,U.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var eo=e.i(11422),el=e.i(68459);let ec=(0,X.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ed=(0,X.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var eu=e.i(30759),em=e.i(88814);function ep(){let[e,s]=(0,t.useState)([]),[n,r]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),{toast:d}=(0,em.useToast)(),[u,m]=(0,t.useState)({name:"",description:"",price:"",features:"",max_screens:"1",plan_type:"",plan_type_id:""});(0,t.useEffect)(()=>{p()},[]);let p=async()=>{let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("plans").select("*").order("price",{ascending:!0});t?d({variant:"destructive",title:"Error al cargar planes",description:t.message,duration:3e3}):s(a||[]),r(!1)},h=e=>{e?(o(e),m({name:e.name,description:e.description,price:e.price.toString(),features:e.features.join("\n"),max_screens:e.max_screens?.toString()||"1",plan_type:e.plan_type||"",plan_type_id:e.plan_type_id||""})):(o(null),m({name:"",description:"",price:"",features:"",max_screens:"1",plan_type:"",plan_type_id:""})),c(!0)},x=async()=>{let e,a=(0,el.createBrowserClient)(),t={name:u.name,description:u.description,price:parseFloat(u.price),features:u.features.split("\n").filter(e=>e.trim()),max_screens:parseInt(u.max_screens),plan_type:u.plan_type||null,plan_type_id:u.plan_type_id||null};i||(t.id=u.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),t.id=`${t.id}-${Date.now()}`),(e=i?(await a.from("plans").update(t).eq("id",i.id)).error:(await a.from("plans").insert([t])).error)?d({variant:"destructive",title:"Error al guardar plan",description:e.message,duration:3e3}):(d({variant:"success",title:i?"Plan actualizado":"Plan creado",description:`El plan ha sido ${i?"actualizado":"creado"} exitosamente`,duration:3e3}),c(!1),p())},f=async e=>{if(!confirm("¿Estás seguro de eliminar este plan?"))return;let a=(0,el.createBrowserClient)(),{error:t}=await a.from("plans").delete().eq("id",e);t?d({variant:"destructive",title:"Error al eliminar plan",description:t.message,duration:3e3}):(d({variant:"success",title:"Plan eliminado",description:"El plan ha sido eliminado exitosamente",duration:3e3}),p())};return n?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Paquetes"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Administra los planes de suscripción disponibles"})]}),(0,a.jsxs)(eo.Dialog,{open:l,onOpenChange:c,children:[(0,a.jsx)(eo.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(K.Button,{onClick:()=>h(),className:"gap-2",children:[(0,a.jsx)(ec,{className:"h-4 w-4"}),"Nuevo Paquete"]})}),(0,a.jsxs)(eo.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:i?"Editar Paquete":"Nuevo Paquete"}),(0,a.jsx)(eo.DialogDescription,{children:i?"Modifica los detalles del paquete":"Crea un nuevo paquete de suscripción"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"name",children:"Nombre del Paquete"}),(0,a.jsx)(en.Input,{id:"name",value:u.name,onChange:e=>m({...u,name:e.target.value}),placeholder:"Ej: Básico"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"description",children:"Descripción"}),(0,a.jsx)(ei,{id:"description",value:u.description,onChange:e=>m({...u,description:e.target.value}),placeholder:"Descripción del paquete",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"price",children:"Precio (S/)"}),(0,a.jsx)(en.Input,{id:"price",type:"number",step:"0.01",value:u.price,onChange:e=>m({...u,price:e.target.value}),placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"max_screens",children:"Número de Pantallas Simultáneas"}),(0,a.jsx)(en.Input,{id:"max_screens",type:"number",min:"1",max:"10",value:u.max_screens,onChange:e=>m({...u,max_screens:e.target.value}),placeholder:"1"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cantidad de dispositivos que pueden ver simultáneamente"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"plan_type_id",children:"ID del Tipo de Paquete"}),(0,a.jsx)(en.Input,{id:"plan_type_id",type:"text",value:u.plan_type_id,onChange:e=>m({...u,plan_type_id:e.target.value}),placeholder:"Ej: 1, 4, 10 o 2,4,5"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ID numérico para el backend (puede ser múltiple: 2,4,5)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"plan_type",children:"Nombre del Tipo de Paquete"}),(0,a.jsx)(en.Input,{id:"plan_type",value:u.plan_type,onChange:e=>m({...u,plan_type:e.target.value}),placeholder:"Ej: Gold, Silver"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nombre del tipo de paquete"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"features",children:"Características (una por línea)"}),(0,a.jsx)(ei,{id:"features",value:u.features,onChange:e=>m({...u,features:e.target.value}),placeholder:"Canales HD Soporte 24/7 Sin publicidad",rows:6})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),(0,a.jsxs)(K.Button,{onClick:x,children:[i?"Actualizar":"Crear"," Paquete"]})]})]})]})]})]}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(e=>(0,a.jsxs)(es.Card,{className:"hover:shadow-lg transition-shadow flex flex-col",children:[(0,a.jsx)(es.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)(es.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(Q,{className:"h-4 w-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),(0,a.jsx)(es.CardDescription,{className:"mt-1 text-xs line-clamp-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-1 flex-shrink-0",children:[(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>h(e),children:(0,a.jsx)(ed,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>f(e.id),children:(0,a.jsx)(eu.Trash2,{className:"h-3.5 w-3.5 text-red-500"})})]})]})}),(0,a.jsxs)(es.CardContent,{className:"space-y-3 flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["S/ ",e.price.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[(0,a.jsxs)("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded font-medium",children:[e.max_screens," ",1===e.max_screens?"pantalla":"pantallas"]}),e.plan_type&&(0,a.jsx)("span",{className:"bg-accent/10 text-accent px-2 py-0.5 rounded font-medium",children:e.plan_type}),e.plan_type_id&&(0,a.jsxs)("span",{className:"bg-muted text-muted-foreground px-2 py-0.5 rounded font-medium",children:["ID: ",e.plan_type_id]})]}),(0,a.jsx)("div",{className:"space-y-2 flex-1",children:(0,a.jsxs)("ul",{className:"space-y-1",children:[e.features.slice(0,5).map((e,t)=>(0,a.jsxs)("li",{className:"text-xs flex items-start gap-1.5",children:[(0,a.jsx)("span",{className:"text-green-500 mt-0.5 flex-shrink-0",children:"✓"}),(0,a.jsx)("span",{className:"line-clamp-2",children:e})]},t)),e.features.length>5&&(0,a.jsxs)("li",{className:"text-xs text-muted-foreground italic",children:["+",e.features.length-5," más..."]})]})})]})]},e.id))})]})}var eh=e.i(16279),ex=e.i(69041);function ef(){let[e,s]=(0,t.useState)([]),[n,r]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),{toast:d}=(0,em.useToast)(),[u,m]=(0,t.useState)({name:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",active:!0,start_date:"",end_date:""});(0,t.useEffect)(()=>{p()},[]);let p=async()=>{let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("promotions").select("*").order("created_at",{ascending:!1});t?d({variant:"destructive",title:"Error al cargar promociones",description:t.message,duration:3e3}):s(a||[]),r(!1)},h=e=>{e?(o(e),m({name:e.name,description:e.description||"",discount_type:e.discount_percentage?"percentage":"amount",discount_percentage:e.discount_percentage?.toString()||"",discount_amount:e.discount_amount?.toString()||"",active:e.active,start_date:e.start_date?e.start_date.split("T")[0]:"",end_date:e.end_date?e.end_date.split("T")[0]:""})):(o(null),m({name:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",active:!0,start_date:"",end_date:""})),c(!0)},x=async()=>{let e,a=(0,el.createBrowserClient)(),t={name:u.name,description:u.description,active:u.active,start_date:u.start_date||null,end_date:u.end_date||null};"percentage"===u.discount_type?(t.discount_percentage=parseInt(u.discount_percentage),t.discount_amount=null):(t.discount_amount=parseFloat(u.discount_amount),t.discount_percentage=null),(e=i?(await a.from("promotions").update(t).eq("id",i.id)).error:(await a.from("promotions").insert([t])).error)?d({variant:"destructive",title:"Error al guardar promoción",description:e.message,duration:3e3}):(d({variant:"success",title:i?"Promoción actualizada":"Promoción creada",description:`La promoci\xf3n ha sido ${i?"actualizada":"creada"} exitosamente`,duration:3e3}),c(!1),p())},f=async e=>{if(!confirm("¿Estás seguro de eliminar esta promoción?"))return;let a=(0,el.createBrowserClient)(),{error:t}=await a.from("promotions").delete().eq("id",e);t?d({variant:"destructive",title:"Error al eliminar promoción",description:t.message,duration:3e3}):(d({variant:"success",title:"Promoción eliminada",description:"La promoción ha sido eliminada exitosamente",duration:3e3}),p())},g=async(e,a)=>{let t=(0,el.createBrowserClient)(),{error:s}=await t.from("promotions").update({active:!a}).eq("id",e);s?d({variant:"destructive",title:"Error",description:s.message,duration:3e3}):p()};return n?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Promociones"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Crea promociones temporales con descuentos"})]}),(0,a.jsxs)(eo.Dialog,{open:l,onOpenChange:c,children:[(0,a.jsx)(eo.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(K.Button,{onClick:()=>h(),className:"gap-2",children:[(0,a.jsx)(ec,{className:"h-4 w-4"}),"Nueva Promoción"]})}),(0,a.jsxs)(eo.DialogContent,{className:"max-w-2xl",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:i?"Editar Promoción":"Nueva Promoción"}),(0,a.jsx)(eo.DialogDescription,{children:i?"Modifica los detalles de la promoción":"Crea una nueva promoción temporal"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"promo-name",children:"Nombre de la Promoción"}),(0,a.jsx)(en.Input,{id:"promo-name",value:u.name,onChange:e=>m({...u,name:e.target.value}),placeholder:"Ej: Descuento de Verano"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"promo-description",children:"Descripción"}),(0,a.jsx)(ei,{id:"promo-description",value:u.description,onChange:e=>m({...u,description:e.target.value}),placeholder:"Descripción de la promoción",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(er.Label,{children:"Tipo de Descuento"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"discount_type",value:"percentage",checked:"percentage"===u.discount_type,onChange:e=>m({...u,discount_type:e.target.value}),className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Porcentaje (%)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"discount_type",value:"amount",checked:"amount"===u.discount_type,onChange:e=>m({...u,discount_type:e.target.value}),className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Monto Fijo (S/)"})]})]})]}),"percentage"===u.discount_type?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"discount-percentage",children:"Porcentaje de Descuento"}),(0,a.jsx)(en.Input,{id:"discount-percentage",type:"number",min:"0",max:"100",value:u.discount_percentage,onChange:e=>m({...u,discount_percentage:e.target.value}),placeholder:"20"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"discount-amount",children:"Monto de Descuento (S/)"}),(0,a.jsx)(en.Input,{id:"discount-amount",type:"number",step:"0.01",value:u.discount_amount,onChange:e=>m({...u,discount_amount:e.target.value}),placeholder:"10.00"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"start-date",children:"Fecha de Inicio"}),(0,a.jsx)(en.Input,{id:"start-date",type:"date",value:u.start_date,onChange:e=>m({...u,start_date:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"end-date",children:"Fecha de Fin"}),(0,a.jsx)(en.Input,{id:"end-date",type:"date",value:u.end_date,onChange:e=>m({...u,end_date:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(er.Label,{htmlFor:"active-switch",children:"Activar Promoción"}),(0,a.jsx)(eh.Switch,{id:"active-switch",checked:u.active,onCheckedChange:e=>m({...u,active:e})})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),(0,a.jsxs)(K.Button,{onClick:x,children:[i?"Actualizar":"Crear"," Promoción"]})]})]})]})]})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsxs)(es.Card,{className:`hover:shadow-lg transition-shadow ${!e.active?"opacity-60":""}`,children:[(0,a.jsx)(es.CardHeader,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(es.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(J,{className:"h-5 w-5 text-orange-500"}),e.name]}),(0,a.jsx)(es.CardDescription,{className:"mt-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",onClick:()=>h(e),children:(0,a.jsx)(ed,{className:"h-4 w-4"})}),(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",onClick:()=>f(e.id),children:(0,a.jsx)(eu.Trash2,{className:"h-4 w-4 text-red-500"})})]})]})}),(0,a.jsxs)(es.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-orange-600",children:e.discount_percentage?`${e.discount_percentage}%`:`S/ ${e.discount_amount?.toFixed(2)}`}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"de descuento"})]}),(e.start_date||e.end_date)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(ex.Calendar,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.start_date&&new Date(e.start_date).toLocaleDateString(),e.start_date&&e.end_date&&" - ",e.end_date&&new Date(e.end_date).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.active?"Activa":"Inactiva"}),(0,a.jsx)(eh.Switch,{checked:e.active,onCheckedChange:()=>g(e.id,e.active)})]})]})]},e.id))})]})}var eg=e.i(77900);function ev(){let[e,s]=(0,t.useState)([]),[n,r]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),{toast:d}=(0,em.useToast)(),[u,m]=(0,t.useState)({code:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",max_uses:"",active:!0,start_date:"",end_date:""});(0,t.useEffect)(()=>{p()},[]);let p=async()=>{let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("coupons").select("*").order("created_at",{ascending:!1});t?d({variant:"destructive",title:"Error al cargar cupones",description:t.message,duration:3e3}):s(a||[]),r(!1)},h=e=>{e?(o(e),m({code:e.code,description:e.description||"",discount_type:e.discount_percentage?"percentage":"amount",discount_percentage:e.discount_percentage?.toString()||"",discount_amount:e.discount_amount?.toString()||"",max_uses:e.max_uses?.toString()||"",active:e.active,start_date:e.start_date?e.start_date.split("T")[0]:"",end_date:e.end_date?e.end_date.split("T")[0]:""})):(o(null),m({code:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",max_uses:"",active:!0,start_date:"",end_date:""})),c(!0)},x=async()=>{let e,a=(0,el.createBrowserClient)(),t={code:u.code.toUpperCase(),description:u.description,max_uses:u.max_uses?parseInt(u.max_uses):null,active:u.active,start_date:u.start_date||null,end_date:u.end_date||null};"percentage"===u.discount_type?(t.discount_percentage=parseInt(u.discount_percentage),t.discount_amount=null):(t.discount_amount=parseFloat(u.discount_amount),t.discount_percentage=null),(e=i?(await a.from("coupons").update(t).eq("id",i.id)).error:(await a.from("coupons").insert([{...t,current_uses:0}])).error)?d({variant:"destructive",title:"Error al guardar cupón",description:e.message,duration:3e3}):(d({variant:"success",title:i?"Cupón actualizado":"Cupón creado",description:`El cup\xf3n ha sido ${i?"actualizado":"creado"} exitosamente`,duration:3e3}),c(!1),p())},f=async e=>{if(!confirm("¿Estás seguro de eliminar este cupón?"))return;let a=(0,el.createBrowserClient)(),{error:t}=await a.from("coupons").delete().eq("id",e);t?d({variant:"destructive",title:"Error al eliminar cupón",description:t.message,duration:3e3}):(d({variant:"success",title:"Cupón eliminado",description:"El cupón ha sido eliminado exitosamente",duration:3e3}),p())},g=async(e,a)=>{let t=(0,el.createBrowserClient)(),{error:s}=await t.from("coupons").update({active:!a}).eq("id",e);s?d({variant:"destructive",title:"Error",description:s.message,duration:3e3}):p()};return n?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Cupones"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Crea códigos de descuento únicos para tus clientes"})]}),(0,a.jsxs)(eo.Dialog,{open:l,onOpenChange:c,children:[(0,a.jsx)(eo.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(K.Button,{onClick:()=>h(),className:"gap-2",children:[(0,a.jsx)(ec,{className:"h-4 w-4"}),"Nuevo Cupón"]})}),(0,a.jsxs)(eo.DialogContent,{className:"max-w-2xl",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:i?"Editar Cupón":"Nuevo Cupón"}),(0,a.jsx)(eo.DialogDescription,{children:i?"Modifica los detalles del cupón":"Crea un nuevo código de descuento"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-code",children:"Código del Cupón"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(en.Input,{id:"coupon-code",value:u.code,onChange:e=>m({...u,code:e.target.value.toUpperCase()}),placeholder:"VERANO2024",className:"uppercase"}),(0,a.jsx)(K.Button,{type:"button",variant:"outline",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="";for(let t=0;t<8;t++)a+=e.charAt(Math.floor(Math.random()*e.length));m({...u,code:a})},children:"Generar"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-description",children:"Descripción"}),(0,a.jsx)(ei,{id:"coupon-description",value:u.description,onChange:e=>m({...u,description:e.target.value}),placeholder:"Descripción del cupón",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(er.Label,{children:"Tipo de Descuento"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"coupon_discount_type",value:"percentage",checked:"percentage"===u.discount_type,onChange:e=>m({...u,discount_type:e.target.value}),className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Porcentaje (%)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"coupon_discount_type",value:"amount",checked:"amount"===u.discount_type,onChange:e=>m({...u,discount_type:e.target.value}),className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Monto Fijo (S/)"})]})]})]}),"percentage"===u.discount_type?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-discount-percentage",children:"Porcentaje de Descuento"}),(0,a.jsx)(en.Input,{id:"coupon-discount-percentage",type:"number",min:"0",max:"100",value:u.discount_percentage,onChange:e=>m({...u,discount_percentage:e.target.value}),placeholder:"20"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-discount-amount",children:"Monto de Descuento (S/)"}),(0,a.jsx)(en.Input,{id:"coupon-discount-amount",type:"number",step:"0.01",value:u.discount_amount,onChange:e=>m({...u,discount_amount:e.target.value}),placeholder:"10.00"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"max-uses",children:"Usos Máximos (opcional)"}),(0,a.jsx)(en.Input,{id:"max-uses",type:"number",min:"1",value:u.max_uses,onChange:e=>m({...u,max_uses:e.target.value}),placeholder:"Ilimitado"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-start-date",children:"Fecha de Inicio"}),(0,a.jsx)(en.Input,{id:"coupon-start-date",type:"date",value:u.start_date,onChange:e=>m({...u,start_date:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-end-date",children:"Fecha de Fin"}),(0,a.jsx)(en.Input,{id:"coupon-end-date",type:"date",value:u.end_date,onChange:e=>m({...u,end_date:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(er.Label,{htmlFor:"coupon-active-switch",children:"Activar Cupón"}),(0,a.jsx)(eh.Switch,{id:"coupon-active-switch",checked:u.active,onCheckedChange:e=>m({...u,active:e})})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),(0,a.jsxs)(K.Button,{onClick:x,children:[i?"Actualizar":"Crear"," Cupón"]})]})]})]})]})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsxs)(es.Card,{className:`hover:shadow-lg transition-shadow ${!e.active?"opacity-60":""}`,children:[(0,a.jsx)(es.CardHeader,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(es.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(Z,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("code",{className:"text-lg font-mono bg-slate-100 px-2 py-1 rounded",children:e.code}),(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>{var a;return a=e.code,void(navigator.clipboard.writeText(a),d({variant:"success",title:"Código copiado",description:`El c\xf3digo ${a} ha sido copiado al portapapeles`,duration:3e3}))},children:(0,a.jsx)(eg.Copy,{className:"h-3 w-3"})})]}),(0,a.jsx)(es.CardDescription,{className:"mt-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",onClick:()=>h(e),children:(0,a.jsx)(ed,{className:"h-4 w-4"})}),(0,a.jsx)(K.Button,{size:"icon",variant:"ghost",onClick:()=>f(e.id),children:(0,a.jsx)(eu.Trash2,{className:"h-4 w-4 text-red-500"})})]})]})}),(0,a.jsxs)(es.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-green-600",children:e.discount_percentage?`${e.discount_percentage}%`:`S/ ${e.discount_amount?.toFixed(2)}`}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"de descuento"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[e.max_uses&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Usos:"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.current_uses," / ",e.max_uses]})]}),(e.start_date||e.end_date)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(ex.Calendar,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.start_date&&new Date(e.start_date).toLocaleDateString(),e.start_date&&e.end_date&&" - ",e.end_date&&new Date(e.end_date).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.active?"Activo":"Inactivo"}),(0,a.jsx)(eh.Switch,{checked:e.active,onCheckedChange:()=>g(e.id,e.active)})]})]})]},e.id))})]})}var ej=e.i(66199);let eb=(0,e.i(76423).cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ew({className:e,variant:t,asChild:s=!1,...n}){let r=s?ej.Slot:"span";return(0,a.jsx)(r,{"data-slot":"badge",className:(0,U.cn)(eb({variant:t}),e),...n})}function ey({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,U.cn)("w-full caption-bottom text-sm",e),...t})})}function eN({className:e,...t}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,U.cn)("[&_tr]:border-b",e),...t})}function eC({className:e,...t}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,U.cn)("[&_tr:last-child]:border-0",e),...t})}function e_({className:e,...t}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,U.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function eS({className:e,...t}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,U.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function ek({className:e,...t}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,U.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}var eD=e.i(46861),eM=e.i(78217),eP=e.i(59211),eE=e.i(43123),eI=e.i(33906),eT=e.i(35370),eF=e.i(51819),ez=["Enter"," "],eL=["ArrowUp","PageDown","End"],eA=["ArrowDown","PageUp","Home",...eL],eR={ltr:[...ez,"ArrowRight"],rtl:[...ez,"ArrowLeft"]},eB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eH="Menu",[eO,eq,eW]=(0,r.createCollection)(eH),[eU,eV]=(0,n.createContextScope)(eH,[eW,eE.createPopperScope,j]),e$=(0,eE.createPopperScope)(),eG=j(),[eY,eK]=eU(eH),[eX,eQ]=eU(eH),eJ=e=>{let{__scopeMenu:s,open:n=!1,children:r,dir:i,onOpenChange:o,modal:l=!0}=e,d=e$(s),[m,p]=t.useState(null),h=t.useRef(!1),x=(0,c.useCallbackRef)(o),f=(0,u.useDirection)(i);return t.useEffect(()=>{let e=()=>{h.current=!0,document.addEventListener("pointerdown",a,{capture:!0,once:!0}),document.addEventListener("pointermove",a,{capture:!0,once:!0})},a=()=>h.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",a,{capture:!0}),document.removeEventListener("pointermove",a,{capture:!0})}},[]),(0,a.jsx)(eE.Root,{...d,children:(0,a.jsx)(eY,{scope:s,open:n,onOpenChange:x,content:m,onContentChange:p,children:(0,a.jsx)(eX,{scope:s,onClose:t.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:h,dir:f,modal:l,children:r})})})};eJ.displayName=eH;var eZ=t.forwardRef((e,t)=>{let{__scopeMenu:s,...n}=e,r=e$(s);return(0,a.jsx)(eE.Anchor,{...r,...n,ref:t})});eZ.displayName="MenuAnchor";var e0="MenuPortal",[e1,e2]=eU(e0,{forceMount:void 0}),e4=e=>{let{__scopeMenu:t,forceMount:s,children:n,container:r}=e,i=eK(e0,t);return(0,a.jsx)(e1,{scope:t,forceMount:s,children:(0,a.jsx)(D.Presence,{present:s||i.open,children:(0,a.jsx)(eI.Portal,{asChild:!0,container:r,children:n})})})};e4.displayName=e0;var e3="MenuContent",[e5,e6]=eU(e3),e8=t.forwardRef((e,t)=>{let s=e2(e3,e.__scopeMenu),{forceMount:n=s.forceMount,...r}=e,i=eK(e3,e.__scopeMenu),o=eQ(e3,e.__scopeMenu);return(0,a.jsx)(eO.Provider,{scope:e.__scopeMenu,children:(0,a.jsx)(D.Presence,{present:n||i.open,children:(0,a.jsx)(eO.Slot,{scope:e.__scopeMenu,children:o.modal?(0,a.jsx)(e7,{...r,ref:t}):(0,a.jsx)(e9,{...r,ref:t})})})})}),e7=t.forwardRef((e,n)=>{let r=eK(e3,e.__scopeMenu),o=t.useRef(null),l=(0,i.useComposedRefs)(n,o);return t.useEffect(()=>{let e=o.current;if(e)return(0,eT.hideOthers)(e)},[]),(0,a.jsx)(ae,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),e9=t.forwardRef((e,t)=>{let s=eK(e3,e.__scopeMenu);return(0,a.jsx)(ae,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),ae=t.forwardRef((e,n)=>{let{__scopeMenu:r,loop:o=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:m,onEscapeKeyDown:p,onPointerDownOutside:h,onFocusOutside:x,onInteractOutside:f,onDismiss:g,disableOutsideScroll:v,...j}=e,b=eK(e3,r),w=eQ(e3,r),N=e$(r),C=eG(r),_=eq(r),[S,k]=t.useState(null),D=t.useRef(null),M=(0,i.useComposedRefs)(n,D,b.onContentChange),P=t.useRef(0),E=t.useRef(""),I=t.useRef(0),T=t.useRef(null),F=t.useRef("right"),z=t.useRef(0),L=v?eF.RemoveScroll:t.Fragment,A=v?{as:ej.Slot,allowPinchZoom:!0}:void 0;t.useEffect(()=>()=>window.clearTimeout(P.current),[]),(0,eM.useFocusGuards)();let R=t.useCallback(e=>{var a,t;return F.current===T.current?.side&&(a=e,!!(t=T.current?.area)&&function(e,a){let{x:t,y:s}=e,n=!1;for(let e=0,r=a.length-1;e<a.length;r=e++){let i=a[e].x,o=a[e].y,l=a[r].x,c=a[r].y;o>s!=c>s&&t<(l-i)*(s-o)/(c-o)+i&&(n=!n)}return n}({x:a.clientX,y:a.clientY},t))},[]);return(0,a.jsx)(e5,{scope:r,searchRef:E,onItemEnter:t.useCallback(e=>{R(e)&&e.preventDefault()},[R]),onItemLeave:t.useCallback(e=>{R(e)||(D.current?.focus(),k(null))},[R]),onTriggerLeave:t.useCallback(e=>{R(e)&&e.preventDefault()},[R]),pointerGraceTimerRef:I,onPointerGraceIntentChange:t.useCallback(e=>{T.current=e},[]),children:(0,a.jsx)(L,{...A,children:(0,a.jsx)(eP.FocusScope,{asChild:!0,trapped:l,onMountAutoFocus:(0,s.composeEventHandlers)(c,e=>{e.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:(0,a.jsx)(eD.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:h,onFocusOutside:x,onInteractOutside:f,onDismiss:g,children:(0,a.jsx)(y,{asChild:!0,...C,dir:w.dir,orientation:"vertical",loop:o,currentTabStopId:S,onCurrentTabStopIdChange:k,onEntryFocus:(0,s.composeEventHandlers)(m,e=>{w.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,a.jsx)(eE.Content,{role:"menu","aria-orientation":"vertical","data-state":aS(b.open),"data-radix-menu-content":"",dir:w.dir,...N,...j,ref:M,style:{outline:"none",...j.style},onKeyDown:(0,s.composeEventHandlers)(j.onKeyDown,e=>{let a=e.target.closest("[data-radix-menu-content]")===e.currentTarget,t=e.ctrlKey||e.altKey||e.metaKey,s=1===e.key.length;if(a){var n;let a,r,i,o,l,c;"Tab"===e.key&&e.preventDefault(),!t&&s&&(n=e.key,a=E.current+n,r=_().filter(e=>!e.disabled),i=document.activeElement,o=r.find(e=>e.ref.current===i)?.textValue,l=function(e,a,t){var s;let n=a.length>1&&Array.from(a).every(e=>e===a[0])?a[0]:a,r=t?e.indexOf(t):-1,i=(s=Math.max(r,0),e.map((a,t)=>e[(s+t)%e.length]));1===n.length&&(i=i.filter(e=>e!==t));let o=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return o!==t?o:void 0}(r.map(e=>e.textValue),a,o),c=r.find(e=>e.textValue===l)?.ref.current,function e(a){E.current=a,window.clearTimeout(P.current),""!==a&&(P.current=window.setTimeout(()=>e(""),1e3))}(a),c&&setTimeout(()=>c.focus()))}let r=D.current;if(e.target!==r||!eA.includes(e.key))return;e.preventDefault();let i=_().filter(e=>!e.disabled).map(e=>e.ref.current);eL.includes(e.key)&&i.reverse(),function(e){let a=document.activeElement;for(let t of e)if(t===a||(t.focus(),document.activeElement!==a))return}(i)}),onBlur:(0,s.composeEventHandlers)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(P.current),E.current="")}),onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,aM(e=>{let a=e.target,t=z.current!==e.clientX;e.currentTarget.contains(a)&&t&&(F.current=e.clientX>z.current?"right":"left",z.current=e.clientX)}))})})})})})})});e8.displayName=e3;var aa=t.forwardRef((e,t)=>{let{__scopeMenu:s,...n}=e;return(0,a.jsx)(l.Primitive.div,{role:"group",...n,ref:t})});aa.displayName="MenuGroup";var at=t.forwardRef((e,t)=>{let{__scopeMenu:s,...n}=e;return(0,a.jsx)(l.Primitive.div,{...n,ref:t})});at.displayName="MenuLabel";var as="MenuItem",an="menu.itemSelect",ar=t.forwardRef((e,n)=>{let{disabled:r=!1,onSelect:o,...c}=e,d=t.useRef(null),u=eQ(as,e.__scopeMenu),m=e6(as,e.__scopeMenu),p=(0,i.useComposedRefs)(n,d),h=t.useRef(!1);return(0,a.jsx)(ai,{...c,ref:p,disabled:r,onClick:(0,s.composeEventHandlers)(e.onClick,()=>{let e=d.current;if(!r&&e){let a=new CustomEvent(an,{bubbles:!0,cancelable:!0});e.addEventListener(an,e=>o?.(e),{once:!0}),(0,l.dispatchDiscreteCustomEvent)(e,a),a.defaultPrevented?h.current=!1:u.onClose()}}),onPointerDown:a=>{e.onPointerDown?.(a),h.current=!0},onPointerUp:(0,s.composeEventHandlers)(e.onPointerUp,e=>{h.current||e.currentTarget?.click()}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{let a=""!==m.searchRef.current;r||a&&" "===e.key||ez.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ar.displayName=as;var ai=t.forwardRef((e,n)=>{let{__scopeMenu:r,disabled:o=!1,textValue:c,...d}=e,u=e6(as,r),m=eG(r),p=t.useRef(null),h=(0,i.useComposedRefs)(n,p),[x,f]=t.useState(!1),[g,v]=t.useState("");return t.useEffect(()=>{let e=p.current;e&&v((e.textContent??"").trim())},[d.children]),(0,a.jsx)(eO.ItemSlot,{scope:r,disabled:o,textValue:c??g,children:(0,a.jsx)(_,{asChild:!0,...m,focusable:!o,children:(0,a.jsx)(l.Primitive.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...d,ref:h,onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,aM(e=>{o?u.onItemLeave(e):(u.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,s.composeEventHandlers)(e.onPointerLeave,aM(e=>u.onItemLeave(e))),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>f(!0)),onBlur:(0,s.composeEventHandlers)(e.onBlur,()=>f(!1))})})})}),ao=t.forwardRef((e,t)=>{let{checked:n=!1,onCheckedChange:r,...i}=e;return(0,a.jsx)(ax,{scope:e.__scopeMenu,checked:n,children:(0,a.jsx)(ar,{role:"menuitemcheckbox","aria-checked":ak(n)?"mixed":n,...i,ref:t,"data-state":aD(n),onSelect:(0,s.composeEventHandlers)(i.onSelect,()=>r?.(!!ak(n)||!n),{checkForDefaultPrevented:!1})})})});ao.displayName="MenuCheckboxItem";var al="MenuRadioGroup",[ac,ad]=eU(al,{value:void 0,onValueChange:()=>{}}),au=t.forwardRef((e,t)=>{let{value:s,onValueChange:n,...r}=e,i=(0,c.useCallbackRef)(n);return(0,a.jsx)(ac,{scope:e.__scopeMenu,value:s,onValueChange:i,children:(0,a.jsx)(aa,{...r,ref:t})})});au.displayName=al;var am="MenuRadioItem",ap=t.forwardRef((e,t)=>{let{value:n,...r}=e,i=ad(am,e.__scopeMenu),o=n===i.value;return(0,a.jsx)(ax,{scope:e.__scopeMenu,checked:o,children:(0,a.jsx)(ar,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":aD(o),onSelect:(0,s.composeEventHandlers)(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});ap.displayName=am;var ah="MenuItemIndicator",[ax,af]=eU(ah,{checked:!1}),ag=t.forwardRef((e,t)=>{let{__scopeMenu:s,forceMount:n,...r}=e,i=af(ah,s);return(0,a.jsx)(D.Presence,{present:n||ak(i.checked)||!0===i.checked,children:(0,a.jsx)(l.Primitive.span,{...r,ref:t,"data-state":aD(i.checked)})})});ag.displayName=ah;var av=t.forwardRef((e,t)=>{let{__scopeMenu:s,...n}=e;return(0,a.jsx)(l.Primitive.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});av.displayName="MenuSeparator";var aj=t.forwardRef((e,t)=>{let{__scopeMenu:s,...n}=e,r=e$(s);return(0,a.jsx)(eE.Arrow,{...r,...n,ref:t})});aj.displayName="MenuArrow";var[ab,aw]=eU("MenuSub"),ay="MenuSubTrigger",aN=t.forwardRef((e,n)=>{let r=eK(ay,e.__scopeMenu),o=eQ(ay,e.__scopeMenu),l=aw(ay,e.__scopeMenu),c=e6(ay,e.__scopeMenu),d=t.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:m}=c,p={__scopeMenu:e.__scopeMenu},h=t.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return t.useEffect(()=>h,[h]),t.useEffect(()=>{let e=u.current;return()=>{window.clearTimeout(e),m(null)}},[u,m]),(0,a.jsx)(eZ,{asChild:!0,...p,children:(0,a.jsx)(ai,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":l.contentId,"data-state":aS(r.open),...e,ref:(0,i.composeRefs)(n,l.onTriggerChange),onClick:a=>{e.onClick?.(a),e.disabled||a.defaultPrevented||(a.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,aM(a=>{c.onItemEnter(a),!a.defaultPrevented&&(e.disabled||r.open||d.current||(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100)))})),onPointerLeave:(0,s.composeEventHandlers)(e.onPointerLeave,aM(e=>{h();let a=r.content?.getBoundingClientRect();if(a){let t=r.content?.dataset.side,s="right"===t,n=a[s?"left":"right"],i=a[s?"right":"left"];c.onPointerGraceIntentChange({area:[{x:e.clientX+(s?-5:5),y:e.clientY},{x:n,y:a.top},{x:i,y:a.top},{x:i,y:a.bottom},{x:n,y:a.bottom}],side:t}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(e),e.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,a=>{let t=""!==c.searchRef.current;e.disabled||t&&" "===a.key||eR[o.dir].includes(a.key)&&(r.onOpenChange(!0),r.content?.focus(),a.preventDefault())})})})});aN.displayName=ay;var aC="MenuSubContent",a_=t.forwardRef((e,n)=>{let r=e2(e3,e.__scopeMenu),{forceMount:o=r.forceMount,...l}=e,c=eK(e3,e.__scopeMenu),d=eQ(e3,e.__scopeMenu),u=aw(aC,e.__scopeMenu),m=t.useRef(null),p=(0,i.useComposedRefs)(n,m);return(0,a.jsx)(eO.Provider,{scope:e.__scopeMenu,children:(0,a.jsx)(D.Presence,{present:o||c.open,children:(0,a.jsx)(eO.Slot,{scope:e.__scopeMenu,children:(0,a.jsx)(ae,{id:u.contentId,"aria-labelledby":u.triggerId,...l,ref:p,align:"start",side:"rtl"===d.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{d.isUsingKeyboardRef.current&&m.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>{e.target!==u.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:(0,s.composeEventHandlers)(e.onEscapeKeyDown,e=>{d.onClose(),e.preventDefault()}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{let a=e.currentTarget.contains(e.target),t=eB[d.dir].includes(e.key);a&&t&&(c.onOpenChange(!1),u.trigger?.focus(),e.preventDefault())})})})})})});function aS(e){return e?"open":"closed"}function ak(e){return"indeterminate"===e}function aD(e){return ak(e)?"indeterminate":e?"checked":"unchecked"}function aM(e){return a=>"mouse"===a.pointerType?e(a):void 0}a_.displayName=aC;var aP="DropdownMenu",[aE,aI]=(0,n.createContextScope)(aP,[eV]),aT=eV(),[aF,az]=aE(aP),aL=e=>{let{__scopeDropdownMenu:s,children:n,dir:r,open:i,defaultOpen:l,onOpenChange:c,modal:u=!0}=e,m=aT(s),p=t.useRef(null),[h=!1,x]=(0,d.useControllableState)({prop:i,defaultProp:l,onChange:c});return(0,a.jsx)(aF,{scope:s,triggerId:(0,o.useId)(),triggerRef:p,contentId:(0,o.useId)(),open:h,onOpenChange:x,onOpenToggle:t.useCallback(()=>x(e=>!e),[x]),modal:u,children:(0,a.jsx)(eJ,{...m,open:h,onOpenChange:x,dir:r,modal:u,children:n})})};aL.displayName=aP;var aA="DropdownMenuTrigger",aR=t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,c=az(aA,n),d=aT(n);return(0,a.jsx)(eZ,{asChild:!0,...d,children:(0,a.jsx)(l.Primitive.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:(0,i.composeRefs)(t,c.triggerRef),onPointerDown:(0,s.composeEventHandlers)(e.onPointerDown,e=>{!r&&0===e.button&&!1===e.ctrlKey&&(c.onOpenToggle(),c.open||e.preventDefault())}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{!r&&(["Enter"," "].includes(e.key)&&c.onOpenToggle(),"ArrowDown"===e.key&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});aR.displayName=aA;var aB=e=>{let{__scopeDropdownMenu:t,...s}=e,n=aT(t);return(0,a.jsx)(e4,{...n,...s})};aB.displayName="DropdownMenuPortal";var aH="DropdownMenuContent",aO=t.forwardRef((e,n)=>{let{__scopeDropdownMenu:r,...i}=e,o=az(aH,r),l=aT(r),c=t.useRef(!1);return(0,a.jsx)(e8,{id:o.contentId,"aria-labelledby":o.triggerId,...l,...i,ref:n,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{c.current||o.triggerRef.current?.focus(),c.current=!1,e.preventDefault()}),onInteractOutside:(0,s.composeEventHandlers)(e.onInteractOutside,e=>{let a=e.detail.originalEvent,t=0===a.button&&!0===a.ctrlKey,s=2===a.button||t;(!o.modal||s)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aO.displayName=aH,t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(aa,{...r,...n,ref:t})}).displayName="DropdownMenuGroup";var aq=t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(at,{...r,...n,ref:t})});aq.displayName="DropdownMenuLabel";var aW=t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(ar,{...r,...n,ref:t})});aW.displayName="DropdownMenuItem",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(ao,{...r,...n,ref:t})}).displayName="DropdownMenuCheckboxItem",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(au,{...r,...n,ref:t})}).displayName="DropdownMenuRadioGroup",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(ap,{...r,...n,ref:t})}).displayName="DropdownMenuRadioItem",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(ag,{...r,...n,ref:t})}).displayName="DropdownMenuItemIndicator";var aU=t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(av,{...r,...n,ref:t})});aU.displayName="DropdownMenuSeparator",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(aj,{...r,...n,ref:t})}).displayName="DropdownMenuArrow",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(aN,{...r,...n,ref:t})}).displayName="DropdownMenuSubTrigger",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:s,...n}=e,r=aT(s);return(0,a.jsx)(a_,{...r,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent";var aV=e.i(34513);function a$({...e}){return(0,a.jsx)(aL,{"data-slot":"dropdown-menu",...e})}function aG({...e}){return(0,a.jsx)(aR,{"data-slot":"dropdown-menu-trigger",...e})}function aY({className:e,sideOffset:t=4,...s}){return(0,a.jsx)(aB,{children:(0,a.jsx)(aO,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,U.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...s})})}function aK({className:e,inset:t,variant:s="default",...n}){return(0,a.jsx)(aW,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":s,className:(0,U.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function aX({className:e,inset:t,...s}){return(0,a.jsx)(aq,{"data-slot":"dropdown-menu-label","data-inset":t,className:(0,U.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...s})}function aQ({className:e,...t}){return(0,a.jsx)(aU,{"data-slot":"dropdown-menu-separator",className:(0,U.cn)("bg-border -mx-1 my-1 h-px",e),...t})}e.i(28303),(0,X.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var aJ=e.i(67170);let aZ=(0,X.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),a0=(0,X.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var a1=e.i(94306),a2=e.i(98194),a4=e.i(27447),a3=e.i(90100);let a5=(0,X.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var a6=e.i(51305),a8=e.i(19320),a7=e.i(89408),a9=e.i(40657),te=e.i(11292),ta=e.i(80773),tt=e.i(44652),ts="Checkbox",[tn,tr]=(0,n.createContextScope)(ts),[ti,to]=tn(ts),tl=t.forwardRef((e,n)=>{let{__scopeCheckbox:r,name:o,checked:c,defaultChecked:u,required:m,disabled:p,value:h="on",onCheckedChange:x,form:f,...g}=e,[v,j]=t.useState(null),b=(0,i.useComposedRefs)(n,e=>j(e)),w=t.useRef(!1),y=!v||f||!!v.closest("form"),[N=!1,C]=(0,d.useControllableState)({prop:c,defaultProp:u,onChange:x}),_=t.useRef(N);return t.useEffect(()=>{let e=v?.form;if(e){let a=()=>C(_.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[v,C]),(0,a.jsxs)(ti,{scope:r,state:N,disabled:p,children:[(0,a.jsx)(l.Primitive.button,{type:"button",role:"checkbox","aria-checked":tm(N)?"mixed":N,"aria-required":m,"data-state":tp(N),"data-disabled":p?"":void 0,disabled:p,value:h,...g,ref:b,onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.composeEventHandlers)(e.onClick,e=>{C(e=>!!tm(e)||!e),y&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),y&&(0,a.jsx)(tu,{control:v,bubbles:!w.current,name:o,value:h,checked:N,required:m,disabled:p,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!tm(u)&&u})]})});tl.displayName=ts;var tc="CheckboxIndicator",td=t.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:n,...r}=e,i=to(tc,s);return(0,a.jsx)(D.Presence,{present:n||tm(i.state)||!0===i.state,children:(0,a.jsx)(l.Primitive.span,{"data-state":tp(i.state),"data-disabled":i.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});td.displayName=tc;var tu=e=>{let{control:s,checked:n,bubbles:r=!0,defaultChecked:i,...o}=e,l=t.useRef(null),c=(0,ta.usePrevious)(n),d=(0,tt.useSize)(s);t.useEffect(()=>{let e=l.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==n&&a){let t=new Event("click",{bubbles:r});e.indeterminate=tm(n),a.call(e,!tm(n)&&n),e.dispatchEvent(t)}},[c,n,r]);let u=t.useRef(!tm(n)&&n);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...o,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function tm(e){return"indeterminate"===e}function tp(e){return tm(e)?"indeterminate":e?"checked":"unchecked"}function th({className:e,...t}){return(0,a.jsx)(tl,{"data-slot":"checkbox",className:(0,U.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,a.jsx)(td,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(aV.CheckIcon,{className:"size-3.5"})})})}let tx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function tf(e){return (a={})=>{let t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}let tg={date:tf({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:tf({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:tf({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function tj(e){return(a,t)=>{let s;if("formatting"===(t?.context?String(t.context):"standalone")&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,n=t?.width?String(t.width):a;s=e.formattingValues[n]||e.formattingValues[a]}else{let a=e.defaultWidth,n=t?.width?String(t.width):e.defaultWidth;s=e.values[n]||e.values[a]}return s[e.argumentCallback?e.argumentCallback(a):a]}}function tb(e){return(a,t={})=>{let s,n=t.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=a.match(r);if(!i)return null;let o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t}(l,e=>e.test(o)):function(e,a){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t}(l,e=>e.test(o));return s=e.valueCallback?e.valueCallback(c):c,{value:s=t.valueCallback?t.valueCallback(s):s,rest:a.slice(o.length)}}}function tw(e){return(a,t={})=>{let s=a.match(e.matchPattern);if(!s)return null;let n=s[0],r=a.match(e.parsePattern);if(!r)return null;let i=e.valueCallback?e.valueCallback(r[0]):r[0];return{value:i=t.valueCallback?t.valueCallback(i):i,rest:a.slice(n.length)}}}let ty={code:"en-US",formatDistance:(e,a,t)=>{let s,n=tx[e];if(s="string"==typeof n?n:1===a?n.one:n.other.replace("{{count}}",a.toString()),t?.addSuffix)if(t.comparison&&t.comparison>0)return"in "+s;else return s+" ago";return s},formatLong:tg,formatRelative:(e,a,t,s)=>tv[e],localize:{ordinalNumber:(e,a)=>{let t=Number(e),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:tj({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tj({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:tj({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tj({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tj({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:tw({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:tb({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tb({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tb({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},tN={},tC=Symbol.for("constructDateFrom");function t_(e,a){return"function"==typeof e?e(a):e&&"object"==typeof e&&tC in e?e[tC](a):e instanceof Date?new e.constructor(a):new Date(a)}function tS(e,a){return t_(a||e,e)}function tk(e){let a=tS(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),e-t}function tD(e,a){let t=tS(e,a?.in);return t.setHours(0,0,0,0),t}function tM(e,a){let t=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??tN.weekStartsOn??tN.locale?.options?.weekStartsOn??0,s=tS(e,a?.in),n=s.getDay();return s.setDate(s.getDate()-(7*(n<t)+n-t)),s.setHours(0,0,0,0),s}function tP(e,a){return tM(e,{...a,weekStartsOn:1})}function tE(e,a){let t=tS(e,a?.in),s=t.getFullYear(),n=t_(t,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);let r=tP(n),i=t_(t,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);let o=tP(i);return t.getTime()>=r.getTime()?s+1:t.getTime()>=o.getTime()?s:s-1}function tI(e,a){let t=tS(e,a?.in),s=t.getFullYear(),n=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??tN.firstWeekContainsDate??tN.locale?.options?.firstWeekContainsDate??1,r=t_(a?.in||e,0);r.setFullYear(s+1,0,n),r.setHours(0,0,0,0);let i=tM(r,a),o=t_(a?.in||e,0);o.setFullYear(s,0,n),o.setHours(0,0,0,0);let l=tM(o,a);return+t>=+i?s+1:+t>=+l?s:s-1}function tT(e,a){let t=Math.abs(e).toString().padStart(a,"0");return(e<0?"-":"")+t}let tF={y(e,a){let t=e.getFullYear(),s=t>0?t:1-t;return tT("yy"===a?s%100:s,a.length)},M(e,a){let t=e.getMonth();return"M"===a?String(t+1):tT(t+1,2)},d:(e,a)=>tT(e.getDate(),a.length),a(e,a){let t=e.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];default:return"am"===t?"a.m.":"p.m."}},h:(e,a)=>tT(e.getHours()%12||12,a.length),H:(e,a)=>tT(e.getHours(),a.length),m:(e,a)=>tT(e.getMinutes(),a.length),s:(e,a)=>tT(e.getSeconds(),a.length),S(e,a){let t=a.length;return tT(Math.trunc(e.getMilliseconds()*Math.pow(10,t-3)),a.length)}},tz={G:function(e,a,t){let s=+(e.getFullYear()>0);switch(a){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});default:return t.era(s,{width:"wide"})}},y:function(e,a,t){if("yo"===a){let a=e.getFullYear();return t.ordinalNumber(a>0?a:1-a,{unit:"year"})}return tF.y(e,a)},Y:function(e,a,t,s){let n=tI(e,s),r=n>0?n:1-n;return"YY"===a?tT(r%100,2):"Yo"===a?t.ordinalNumber(r,{unit:"year"}):tT(r,a.length)},R:function(e,a){return tT(tE(e),a.length)},u:function(e,a){return tT(e.getFullYear(),a.length)},Q:function(e,a,t){let s=Math.ceil((e.getMonth()+1)/3);switch(a){case"Q":return String(s);case"QQ":return tT(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,a,t){let s=Math.ceil((e.getMonth()+1)/3);switch(a){case"q":return String(s);case"qq":return tT(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,a,t){let s=e.getMonth();switch(a){case"M":case"MM":return tF.M(e,a);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(e,a,t){let s=e.getMonth();switch(a){case"L":return String(s+1);case"LL":return tT(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(e,a,t,s){let n,r,i,o,l=Math.round((tM(n=tS(e,s?.in),s)-(r=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??tN.firstWeekContainsDate??tN.locale?.options?.firstWeekContainsDate??1,i=tI(n,s),(o=t_(s?.in||n,0)).setFullYear(i,0,r),o.setHours(0,0,0,0),tM(o,s)))/6048e5)+1;return"wo"===a?t.ordinalNumber(l,{unit:"week"}):tT(l,a.length)},I:function(e,a,t){let s,n,r,i=Math.round((tP(s=tS(e,void 0))-(n=tE(s,void 0),(r=t_(s,0)).setFullYear(n,0,4),r.setHours(0,0,0,0),tP(r)))/6048e5)+1;return"Io"===a?t.ordinalNumber(i,{unit:"week"}):tT(i,a.length)},d:function(e,a,t){return"do"===a?t.ordinalNumber(e.getDate(),{unit:"date"}):tF.d(e,a)},D:function(e,a,t){let s,n,r=function(e,a,t){let[s,n]=function(e,...a){let t=t_.bind(null,e||a.find(e=>"object"==typeof e));return a.map(t)}(void 0,e,a),r=tD(s),i=tD(n);return Math.round((r-tk(r)-(i-tk(i)))/864e5)}(s=tS(e,void 0),((n=tS(s,void 0)).setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n))+1;return"Do"===a?t.ordinalNumber(r,{unit:"dayOfYear"}):tT(r,a.length)},E:function(e,a,t){let s=e.getDay();switch(a){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(e,a,t,s){let n=e.getDay(),r=(n-s.weekStartsOn+8)%7||7;switch(a){case"e":return String(r);case"ee":return tT(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(e,a,t,s){let n=e.getDay(),r=(n-s.weekStartsOn+8)%7||7;switch(a){case"c":return String(r);case"cc":return tT(r,a.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(e,a,t){let s=e.getDay(),n=0===s?7:s;switch(a){case"i":return String(n);case"ii":return tT(n,a.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(e,a,t){let s=e.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,a,t){let s,n=e.getHours();switch(s=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",a){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,a,t){let s,n=e.getHours();switch(s=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",a){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,a,t){if("ho"===a){let a=e.getHours()%12;return 0===a&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return tF.h(e,a)},H:function(e,a,t){return"Ho"===a?t.ordinalNumber(e.getHours(),{unit:"hour"}):tF.H(e,a)},K:function(e,a,t){let s=e.getHours()%12;return"Ko"===a?t.ordinalNumber(s,{unit:"hour"}):tT(s,a.length)},k:function(e,a,t){let s=e.getHours();return(0===s&&(s=24),"ko"===a)?t.ordinalNumber(s,{unit:"hour"}):tT(s,a.length)},m:function(e,a,t){return"mo"===a?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):tF.m(e,a)},s:function(e,a,t){return"so"===a?t.ordinalNumber(e.getSeconds(),{unit:"second"}):tF.s(e,a)},S:function(e,a){return tF.S(e,a)},X:function(e,a,t){let s=e.getTimezoneOffset();if(0===s)return"Z";switch(a){case"X":return tA(s);case"XXXX":case"XX":return tR(s);default:return tR(s,":")}},x:function(e,a,t){let s=e.getTimezoneOffset();switch(a){case"x":return tA(s);case"xxxx":case"xx":return tR(s);default:return tR(s,":")}},O:function(e,a,t){let s=e.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+tL(s,":");default:return"GMT"+tR(s,":")}},z:function(e,a,t){let s=e.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+tL(s,":");default:return"GMT"+tR(s,":")}},t:function(e,a,t){return tT(Math.trunc(e/1e3),a.length)},T:function(e,a,t){return tT(+e,a.length)}};function tL(e,a=""){let t=e>0?"-":"+",s=Math.abs(e),n=Math.trunc(s/60),r=s%60;return 0===r?t+String(n):t+String(n)+a+tT(r,2)}function tA(e,a){return e%60==0?(e>0?"-":"+")+tT(Math.abs(e)/60,2):tR(e,a)}function tR(e,a=""){let t=Math.abs(e);return(e>0?"-":"+")+tT(Math.trunc(t/60),2)+a+tT(t%60,2)}let tB=(e,a)=>{switch(e){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},tH=(e,a)=>{switch(e){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},tO={p:tH,P:(e,a)=>{let t,s=e.match(/(P+)(p+)?/)||[],n=s[1],r=s[2];if(!r)return tB(e,a);switch(n){case"P":t=a.dateTime({width:"short"});break;case"PP":t=a.dateTime({width:"medium"});break;case"PPP":t=a.dateTime({width:"long"});break;default:t=a.dateTime({width:"full"})}return t.replace("{{date}}",tB(n,a)).replace("{{time}}",tH(r,a))}},tq=/^D+$/,tW=/^Y+$/,tU=["D","DD","YY","YYYY"],tV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,t$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tG=/^'([^]*?)'?$/,tY=/''/g,tK=/[a-zA-Z]/;function tX(e,a,t){let s=t?.locale??tN.locale??ty,n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??tN.firstWeekContainsDate??tN.locale?.options?.firstWeekContainsDate??1,r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??tN.weekStartsOn??tN.locale?.options?.weekStartsOn??0,i=tS(e,t?.in);if(!(i instanceof Date||"object"==typeof i&&"[object Date]"===Object.prototype.toString.call(i))&&"number"!=typeof i||isNaN(+tS(i)))throw RangeError("Invalid time value");let o=a.match(t$).map(e=>{let a=e[0];return"p"===a||"P"===a?(0,tO[a])(e,s.formatLong):e}).join("").match(tV).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let a=e[0];if("'"===a){var t;let a;return{isToken:!1,value:(a=(t=e).match(tG))?a[1].replace(tY,"'"):t}}if(tz[a])return{isToken:!0,value:e};if(a.match(tK))throw RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(o=s.localize.preprocessor(i,o));let l={firstWeekContainsDate:n,weekStartsOn:r,locale:s};return o.map(n=>{if(!n.isToken)return n.value;let r=n.value;return(!t?.useAdditionalWeekYearTokens&&tW.test(r)||!t?.useAdditionalDayOfYearTokens&&tq.test(r))&&function(e,a,t){var s,n,r;let i,o=(s=e,n=a,r=t,i="Y"===s[0]?"years":"days of the month",`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${n}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(o),tU.includes(e))throw RangeError(o)}(r,a,String(e)),(0,tz[r[0]])(i,r,s.localize,l)}).join("")}let tQ={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},tJ={date:tf({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:tf({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:tf({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tZ={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},t0={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},t1={code:"es",formatDistance:(e,a,t)=>{let s,n=tQ[e];if(s="string"==typeof n?n:1===a?n.one:n.other.replace("{{count}}",a.toString()),t?.addSuffix)if(t.comparison&&t.comparison>0)return"en "+s;else return"hace "+s;return s},formatLong:tJ,formatRelative:(e,a,t,s)=>1!==a.getHours()?t0[e]:tZ[e],localize:{ordinalNumber:(e,a)=>Number(e)+"º",era:tj({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},defaultWidth:"wide"}),quarter:tj({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:tj({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:tj({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},defaultWidth:"wide"}),dayPeriod:tj({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:tw({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:tb({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:tb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tb({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:tb({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tb({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};var t2=e.i(31116),t4=(0,t2.createServerReference)("406180a501f2cec38b90065e6869c85164bc4f8f35",t2.callServer,void 0,t2.findSourceMapURL,"deleteUsers"),t3=(0,t2.createServerReference)("4055f5e515b19e983cd75d24bdb70cc170c476a2b2",t2.callServer,void 0,t2.findSourceMapURL,"createUser"),t5=(0,t2.createServerReference)("60452541bb342ec454b8c602739f72fe3559355b55",t2.callServer,void 0,t2.findSourceMapURL,"updateUserPassword"),t6=(0,t2.createServerReference)("400a6bbb7defd9ef61a2c3db3df5111735798e0794",t2.callServer,void 0,t2.findSourceMapURL,"createSubscription"),t8=e.i(86048),t7=e.i(43907),t9=e.i(46158);let se=(0,X.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var sa=e.i(21162);let st=(0,X.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function ss({user:e,isOpen:s,onClose:n,availablePlans:r,onUpdateProfile:i,onUpdateIptvCredentials:o,onUpdateSubscriptionDetails:l,onUpdateSubscriptionStatus:c,onCreateSubscription:d,onManualPasswordUpdate:u,onSendPasswordReset:m,userLogs:p,userInvoices:h,loadingLogs:x,loadingInvoices:f}){let[g,v]=(0,t.useState)("details"),[j,b]=(0,t.useState)(!1),[w,y]=(0,t.useState)({first_name:"",last_name:"",email:"",whatsapp:""}),[N,C]=(0,t.useState)({username:"",password:""}),[_,S]=(0,t.useState)({plan_name:""}),[k,D]=(0,t.useState)({price:""}),[M,P]=(0,t.useState)({date:""}),[E,I]=(0,t.useState)("");(0,t.useEffect)(()=>{e&&(y({first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",whatsapp:e.whatsapp||""}),C({username:e.credentials?.username||"",password:e.credentials?.password||""}),S({plan_name:e.subscription?.plan_name||""}),D({price:e.subscription?.price?.toString()||""}),P({date:e.subscription?.next_billing_date?new Date(e.subscription.next_billing_date).toISOString().split("T")[0]:""}),I(""))},[e]);let T=async()=>{if(e){b(!0);try{await i(e.id,w)}finally{b(!1)}}},F=async()=>{if(e){b(!0);try{await o(e.id,N)}finally{b(!1)}}},z=async()=>{if(e){b(!0);try{await l(e.id,{plan_name:_.plan_name,price:parseFloat(k.price)||0,next_billing_date:M.date})}finally{b(!1)}}},L=async()=>{if(e){b(!0);try{await d(e.id,{plan_name:_.plan_name,price:parseFloat(k.price)||0})}finally{b(!1)}}},A=async()=>{if(e){b(!0);try{await u(e.id,E),I("")}finally{b(!1)}}};return e?(0,a.jsx)(eo.Dialog,{open:s,onOpenChange:e=>!e&&n(),children:(0,a.jsxs)(eo.DialogContent,{className:"max-w-[95vw] sm:max-w-5xl h-[95vh] flex flex-col p-0",children:[(0,a.jsxs)(eo.DialogHeader,{className:"px-6 pt-6 pb-4 border-b",children:[(0,a.jsxs)(eo.DialogTitle,{className:"text-lg sm:text-xl",children:["Gestión de Cliente: ",`${e.first_name||""} ${e.last_name||""}`.trim()]}),(0,a.jsx)(eo.DialogDescription,{children:"Administra la cuenta, servicios y comunicaciones"})]}),(0,a.jsxs)(V,{value:g,onValueChange:v,className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 pt-4 pb-2",children:(0,a.jsx)("div",{className:"overflow-x-auto pb-2 -mx-6 px-6 md:mx-0 md:px-0 md:pb-0",children:(0,a.jsxs)($,{className:"inline-flex h-auto w-auto p-1 min-w-full md:grid md:w-full md:grid-cols-4 gap-2",children:[(0,a.jsx)(G,{value:"details",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Detalles"}),(0,a.jsx)(G,{value:"billing",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Facturación"}),(0,a.jsx)(G,{value:"communications",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Comunicación"}),(0,a.jsx)(G,{value:"history",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Historial"})]})})}),(0,a.jsx)(Y,{value:"details",className:"flex-1 overflow-y-auto px-6 py-4 mt-0",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 pb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(a1.User,{className:"h-4 w-4"})," Información Personal"]}),(0,a.jsx)(es.Card,{className:"bg-muted/30",children:(0,a.jsxs)(es.CardContent,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"first-name",className:"text-sm font-medium",children:"Nombre"}),(0,a.jsx)(en.Input,{id:"first-name",value:w.first_name,onChange:e=>y({...w,first_name:e.target.value}),className:"h-9 bg-background",placeholder:"Nombre del cliente"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"last-name",className:"text-sm font-medium",children:"Apellido"}),(0,a.jsx)(en.Input,{id:"last-name",value:w.last_name,onChange:e=>y({...w,last_name:e.target.value}),className:"h-9 bg-background",placeholder:"Apellido del cliente"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),(0,a.jsx)(en.Input,{id:"email",type:"email",value:w.email,onChange:e=>y({...w,email:e.target.value}),className:"h-9 bg-background",placeholder:"correo@ejemplo.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"whatsapp",className:"text-sm font-medium",children:"WhatsApp"}),(0,a.jsx)(en.Input,{id:"whatsapp",value:w.whatsapp,onChange:e=>y({...w,whatsapp:e.target.value}),className:"h-9 bg-background",placeholder:"+51 999 999 999"})]}),(0,a.jsxs)("div",{className:"pt-2 border-t space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Rol:"}),(0,a.jsx)(ew,{variant:"outline",className:"capitalize",children:e.role})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Registro:"}),(0,a.jsx)("span",{className:"font-medium",children:e.created_at?tX(new Date(e.created_at),"dd/MM/yyyy",{locale:t1}):"-"})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsxs)(K.Button,{onClick:T,disabled:j,className:"w-full",size:"sm",children:[(0,a.jsx)(se,{className:"mr-2 h-4 w-4"})," Guardar Información Personal"]})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(t7.Tv,{className:"h-4 w-4"})," Credenciales IPTV"]}),(0,a.jsx)(es.Card,{className:"bg-muted/30",children:(0,a.jsxs)(es.CardContent,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Usuario IPTV"}),(0,a.jsx)(en.Input,{value:N.username,onChange:e=>C({...N,username:e.target.value}),className:"bg-background",placeholder:"Usuario del servicio"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Contraseña IPTV"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(en.Input,{value:N.password,onChange:e=>C({...N,password:e.target.value}),className:"bg-background",placeholder:"Contraseña del servicio"}),(0,a.jsx)(K.Button,{variant:"outline",size:"icon",onClick:()=>C({...N,password:"Temp"+Math.random().toString(36).slice(-8)}),children:(0,a.jsx)(a4.RefreshCw,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsxs)(K.Button,{onClick:F,disabled:j,className:"w-full",size:"sm",children:[(0,a.jsx)(se,{className:"mr-2 h-4 w-4"})," Actualizar Credenciales"]})})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(a6.CreditCard,{className:"h-4 w-4"})," Suscripción Actual"]}),(0,a.jsx)(es.Card,{className:"bg-muted/30",children:(0,a.jsx)(es.CardContent,{className:"p-4 space-y-4",children:e.subscription?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Plan"}),(0,a.jsxs)(aJ.Select,{value:_.plan_name,onValueChange:e=>S({plan_name:e}),children:[(0,a.jsx)(aJ.SelectTrigger,{className:"h-9 bg-background",children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Seleccionar plan"})}),(0,a.jsx)(aJ.SelectContent,{children:r.map(e=>(0,a.jsx)(aJ.SelectItem,{value:e.name,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Precio Mensual"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(a9.DollarSign,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),(0,a.jsx)(en.Input,{type:"number",step:"0.01",value:k.price,onChange:e=>D({price:e.target.value}),className:"h-9 pl-7 bg-background"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Próximo Pago"}),(0,a.jsx)(en.Input,{type:"date",value:M.date,onChange:e=>P({date:e.target.value}),className:"h-9 bg-background"})]}),(0,a.jsxs)(K.Button,{onClick:z,disabled:j,className:"w-full",size:"sm",children:[(0,a.jsx)(se,{className:"mr-2 h-4 w-4"})," Guardar Cambios de Suscripción"]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Estado de Suscripción"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(K.Button,{size:"sm",variant:"active"===e.subscription.status?"default":"outline",className:`h-8 flex-1 ${"active"===e.subscription.status?"bg-green-600 hover:bg-green-700":"text-green-600 border-green-200 hover:bg-green-50"}`,onClick:()=>c(e.id,"active"),disabled:j,children:"Activo"}),(0,a.jsx)(K.Button,{size:"sm",variant:"inactive"===e.subscription.status?"default":"outline",className:`h-8 flex-1 ${"inactive"===e.subscription.status?"bg-yellow-600 hover:bg-yellow-700":"text-yellow-600 border-yellow-200 hover:bg-yellow-50"}`,onClick:()=>c(e.id,"inactive"),disabled:j,children:"Inactivo"}),(0,a.jsx)(K.Button,{size:"sm",variant:"cancelled"===e.subscription.status?"default":"outline",className:`h-8 flex-1 ${"cancelled"===e.subscription.status?"bg-red-600 hover:bg-red-700":"text-red-600 border-red-200 hover:bg-red-50"}`,onClick:()=>c(e.id,"cancelled"),disabled:j,children:"Cancelado"})]})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-4 text-muted-foreground border-b mb-4",children:[(0,a.jsx)(a6.CreditCard,{className:"h-8 w-8 mx-auto mb-2 opacity-20"}),(0,a.jsx)("p",{className:"text-sm",children:"El usuario no tiene una suscripción activa"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-sm font-medium",children:"Agregar Suscripción Manual"}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-xs text-muted-foreground",children:"Plan"}),(0,a.jsxs)(aJ.Select,{value:_.plan_name,onValueChange:e=>{let a=r.find(a=>a.name===e);S({plan_name:e}),a&&D({price:a.price.toString()})},children:[(0,a.jsx)(aJ.SelectTrigger,{className:"h-9 bg-background",children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Seleccionar plan"})}),(0,a.jsx)(aJ.SelectContent,{children:r.map(e=>(0,a.jsxs)(aJ.SelectItem,{value:e.name,children:[e.name," - $",e.price]},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{className:"text-xs text-muted-foreground",children:"Precio Acordado"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(a9.DollarSign,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),(0,a.jsx)(en.Input,{type:"number",step:"0.01",value:k.price,onChange:e=>D({price:e.target.value}),className:"h-9 pl-7 bg-background",placeholder:"0.00"})]})]}),(0,a.jsxs)(K.Button,{onClick:L,disabled:j||!_.plan_name,className:"w-full",children:[(0,a.jsx)(ec,{className:"mr-2 h-4 w-4"})," Crear Suscripción"]})]})]})]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(t9.Lock,{className:"h-4 w-4"})," Seguridad de la Cuenta"]}),(0,a.jsx)(es.Card,{className:"bg-muted/30",children:(0,a.jsxs)(es.CardContent,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-background",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Restablecer Contraseña"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Envía correo para nueva contraseña."})]}),(0,a.jsxs)(K.Button,{onClick:()=>e.email&&m(e.email),disabled:j||!e.email,size:"sm",variant:"outline",children:[(0,a.jsx)(t8.Mail,{className:"mr-2 h-3 w-3"})," Enviar"]})]}),(0,a.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg bg-background",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Cambio Manual de Contraseña"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Establece una nueva contraseña directamente."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(en.Input,{type:"text",placeholder:"Nueva contraseña",value:E,onChange:e=>I(e.target.value),className:"h-9 text-sm"}),(0,a.jsx)(K.Button,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0",onClick:()=>I(Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8)),title:"Generar aleatoria",children:(0,a.jsx)(a4.RefreshCw,{className:"h-4 w-4"})})]}),(0,a.jsxs)(K.Button,{onClick:A,disabled:j||!E,className:"w-full",size:"sm",children:[(0,a.jsx)(se,{className:"mr-2 h-4 w-4"})," Guardar Nueva Contraseña"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-red-50 border-red-100",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-red-700",children:"Zona de Peligro"}),(0,a.jsx)("p",{className:"text-xs text-red-600/80",children:"Acciones críticas de cuenta."})]}),(0,a.jsxs)(K.Button,{variant:"destructive",size:"sm",children:[(0,a.jsx)(te.Shield,{className:"mr-2 h-3 w-3"})," Suspender"]})]})]})})]})]})]})}),(0,a.jsx)(Y,{value:"billing",className:"space-y-4 py-4 overflow-y-auto px-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(a9.DollarSign,{className:"h-4 w-4"})," Información de Pago Actual"]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(es.Card,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,a.jsxs)(es.CardContent,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-green-700 font-medium",children:"Precio Actual"}),(0,a.jsx)(a9.DollarSign,{className:"h-5 w-5 text-green-600"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-800",children:["$",e.subscription?.price?.toFixed(2)||"0.00"]}),(0,a.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Por mes"})]})}),(0,a.jsx)(es.Card,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,a.jsxs)(es.CardContent,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Próxima Facturación"}),(0,a.jsx)(a5,{className:"h-5 w-5 text-blue-600"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:e.subscription?.next_billing_date?tX(new Date(e.subscription.next_billing_date),"dd MMM yyyy",{locale:t1}):"No programada"}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Renovación automática"})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(sa.FileText,{className:"h-4 w-4"})," Historial de Facturas"]}),(0,a.jsx)("div",{className:"border rounded-md",children:f?(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando facturas..."}):h.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"ID"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Fecha"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Monto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Estado"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:h.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-4 py-3 font-mono text-xs",children:[e.id.slice(0,8),"..."]}),(0,a.jsx)("td",{className:"px-4 py-3",children:tX(new Date(e.invoice_date),"dd/MM/yyyy")}),(0,a.jsxs)("td",{className:"px-4 py-3",children:["$",e.amount.toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(ew,{variant:"paid"===e.status?"default":"secondary",className:"paid"===e.status?"bg-green-100 text-green-800 hover:bg-green-100":"",children:"paid"===e.status?"Pagado":e.status})})]},e.id))})]})}):(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No hay facturas registradas"})})]})]})}),(0,a.jsx)(Y,{value:"communications",className:"flex-1 overflow-y-auto px-6 py-4 mt-0",children:(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-4 border-2 border-dashed rounded-lg",children:[(0,a.jsx)("div",{className:"p-4 bg-muted rounded-full",children:(0,a.jsx)(st,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Centro de Comunicaciones"}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-sm mx-auto",children:"Próximamente podrás enviar correos y mensajes de WhatsApp directamente desde aquí."})]}),(0,a.jsx)(K.Button,{variant:"outline",disabled:!0,children:"Nueva Comunicación"})]})})}),(0,a.jsx)(Y,{value:"history",className:"flex-1 overflow-y-auto px-6 py-4 mt-0",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,a.jsx)(a5,{className:"h-4 w-4"})," Registro de Actividad"]}),(0,a.jsx)("div",{className:"space-y-4",children:x?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando historial..."}):p.length>0?(0,a.jsx)("div",{className:"relative pl-4 border-l-2 border-muted space-y-6",children:p.map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-[21px] top-1 h-3 w-3 rounded-full bg-primary/20 border-2 border-primary"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.action}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:tX(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:t1})})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground bg-muted/30 p-2 rounded border font-mono",children:JSON.stringify(e.details,null,2)})]})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No hay actividad registrada"})})]})})]})]})}):null}function sn(){let[e,s]=(0,t.useState)([]),[n,r]=(0,t.useState)(!0),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("all"),[d,u]=(0,t.useState)("all"),[m,p]=(0,t.useState)(null),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)([]),[v,j]=(0,t.useState)({title:"",message:"",type:"info"}),[b,w]=(0,t.useState)(!1),[y,N]=(0,t.useState)(new Set),[C,_]=(0,t.useState)(!1),[S,k]=(0,t.useState)(!1),[D,M]=(0,t.useState)(!1),[P,E]=(0,t.useState)(!1),[I,T]=(0,t.useState)(!1),[F,z]=(0,t.useState)(""),[L,A]=(0,t.useState)(""),[R,B]=(0,t.useState)(""),[H,O]=(0,t.useState)([]),[q,W]=(0,t.useState)(!1),[U,V]=(0,t.useState)([]),[$,G]=(0,t.useState)(!1),[Y,X]=(0,t.useState)([]),[Q,J]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(!1),[ea,et]=(0,t.useState)({email:"",password:"",first_name:"",last_name:"",whatsapp:"",plan_id:"",plan_name:"",price:"",iptv_username:"",iptv_password:""}),{toast:ec}=(0,em.useToast)();(0,t.useEffect)(()=>{ep(),ed(),eh()},[]);let ed=async()=>{let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("plans").select("id, name, price").order("name");!t&&a&&g(a)},ep=async()=>{let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("profiles").select("*").order("created_at",{ascending:!1});if(t){ec({variant:"destructive",title:"Error al cargar usuarios",description:t.message}),r(!1);return}let{data:n}=await e.from("subscriptions").select("*"),{data:i}=await e.from("credentials").select("*");s(a.map(e=>({...e,subscription:n?.find(a=>a.user_id===e.id)||null,credentials:i?.find(a=>a.user_id===e.id)||null}))),r(!1)},eh=async()=>{let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("notification_batches").select("*").order("created_at",{ascending:!1});a&&O(a)},ef=async e=>{G(!0);let a=(0,el.createBrowserClient)(),{data:t,error:s}=await a.from("user_logs").select("*").eq("user_id",e).order("created_at",{ascending:!1});t&&V(t),G(!1)},eg=async e=>{J(!0);let a=(0,el.createBrowserClient)(),{data:t,error:s}=await a.from("invoices").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(10);t&&X(t),J(!1)},ev=async(e,a,t)=>{let s=(0,el.createBrowserClient)(),{data:{user:n}}=await s.auth.getUser();await s.from("user_logs").insert({user_id:e,admin_id:n?.id,action:a,details:t}),m?.id===e&&ef(e)},ej=e.filter(e=>{let a=`${e.first_name||""} ${e.last_name||""}`.trim().toLowerCase().includes(i.toLowerCase())||(e.email?.toLowerCase()||"").includes(i.toLowerCase())||(e.whatsapp||"").includes(i),t="all"===l||e.subscription?.status===l,s="all"===d||e.subscription?.plan_name===d;return a&&t&&s}),eb=async(e,a)=>{w(!0);let t=(0,el.createBrowserClient)(),{error:s}=await t.from("profiles").update({first_name:a.first_name,last_name:a.last_name,email:a.email,whatsapp:a.whatsapp}).eq("id",e);s?ec({variant:"destructive",title:"Error al actualizar perfil",description:s.message}):(ec({title:"Perfil actualizado",description:"Los datos del usuario han sido actualizados correctamente."}),ep(),m&&(ev(e,"UPDATE_PROFILE",{previous:m,new:a}),p({...m,...a}))),w(!1)},eD=async()=>{if(!ea.email||!ea.password)return void ec({variant:"destructive",title:"Campos requeridos",description:"El email y la contraseña son obligatorios."});w(!0);let e="";if(ea.plan_id){let a=f.find(e=>e.id===ea.plan_id);a&&(e=a.name)}if(!ea.email||!ea.password)return void ec({variant:"destructive",title:"Campos requeridos",description:"Por favor ingresa email y contraseña."});if(ea.password.length<6)return void ec({variant:"destructive",title:"Contraseña muy corta",description:"La contraseña debe tener al menos 6 caracteres."});let a=await t3({...ea,plan_name:e});a.success?(ec({title:"Usuario creado",description:"El usuario ha sido creado exitosamente."}),ee(!1),et({email:"",password:"",first_name:"",last_name:"",whatsapp:"",plan_id:"",plan_name:"",price:"",iptv_username:"",iptv_password:""}),ep()):ec({variant:"destructive",title:"Error al crear usuario",description:a.error}),w(!1)},eM=async(a,t)=>{if(!m?.subscription?.id)return;w(!0);let n=(0,el.createBrowserClient)(),r={},i=!1;if(t.plan_name&&t.plan_name!==m.subscription.plan_name){let e=f.find(e=>e.name===t.plan_name);e&&(r.plan_id=e.id,r.plan_name=e.name,i=!0)}if(void 0!==t.price&&t.price!==m.subscription.price&&(r.price=t.price,i=!0),t.next_billing_date){let e=new Date(t.next_billing_date),a=new Date(m.subscription.next_billing_date);e.toISOString().split("T")[0]!==a.toISOString().split("T")[0]&&(r.next_billing_date=e.toISOString(),i=!0)}if(!i)return void w(!1);r.updated_at=new Date().toISOString();let{error:o}=await n.from("subscriptions").update(r).eq("id",m.subscription.id);if(o)ec({variant:"destructive",title:"Error al actualizar suscripción",description:o.message});else{ec({title:"Suscripción actualizada",description:"Los detalles de la suscripción han sido guardados."});let t={...m,subscription:{...m.subscription,...r}};p(t),s(e.map(e=>e.id===t.id?t:e)),ev(a,"UPDATE_SUBSCRIPTION",{updates:r})}w(!1)},eP=async(e,a)=>{w(!0);let t=f.find(e=>e.name===a.plan_name);if(!t){ec({variant:"destructive",title:"Error",description:"Plan no válido"}),w(!1);return}let s=await t6({user_id:e,plan_id:t.id,plan_name:t.name,price:a.price||t.price});s.success?(ec({title:"Suscripción creada exitosamente"}),ep(),x(!1)):ec({variant:"destructive",title:"Error",description:s.error}),w(!1)},eE=async(e,a)=>{w(!0);let t=await t5(e,a);t.success?(ec({title:"Contraseña actualizada",description:"La contraseña del usuario ha sido cambiada exitosamente."}),ev(e,"UPDATE_PASSWORD_MANUAL",{userId:e})):ec({variant:"destructive",title:"Error",description:t.error}),w(!1)},eI=async e=>{w(!0);let a=(0,el.createBrowserClient)(),{error:t}=await a.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/update-password`});t?ec({variant:"destructive",title:"Error al enviar correo",description:t.message}):(ec({variant:"success",title:"Correo enviado",description:`Se ha enviado un correo de restablecimiento a ${e}`}),m&&await ev(m.id,"send_password_reset",{})),w(!1)},eT=async(a,t)=>{w(!0);let n=(0,el.createBrowserClient)(),r=m?.credentials?.username,{error:i}=await n.from("credentials").update({username:t.username,password:t.password,updated_at:new Date().toISOString()}).eq("user_id",a);i?ec({variant:"destructive",title:"Error al actualizar",description:i.message}):(ec({variant:"success",title:"Credenciales actualizadas",description:"Las credenciales IPTV han sido actualizadas correctamente"}),s(e.map(e=>e.id===a?{...e,credentials:{...e.credentials,username:t.username,password:t.password}}:e)),m&&m.id===a&&p({...m,credentials:{...m.credentials,username:t.username,password:t.password}}),ev(a,"update_credentials",{previous_username:r,new_username:t.username})),w(!1)},eF=async(a,t)=>{w(!0);let n=(0,el.createBrowserClient)(),{error:r}=await n.from("subscriptions").update({status:t,updated_at:new Date().toISOString()}).eq("user_id",a);r?ec({variant:"destructive",title:"Error al actualizar estado",description:r.message}):(ec({variant:"success",title:"Estado actualizado",description:`El estado de la suscripci\xf3n se ha actualizado a ${t}`}),s(e.map(e=>e.id===a&&e.subscription?{...e,subscription:{...e.subscription,status:t}}:e)),m&&m.id===a&&m.subscription&&p({...m,subscription:{...m.subscription,status:t}}),ev(a,"update_status",{status:t})),w(!1)},ez=e=>{let a=new Set(y);a.has(e)?a.delete(e):a.add(e),N(a)},eL=async()=>{if(0===y.size)return;w(!0);let e=(0,el.createBrowserClient)(),{data:a,error:t}=await e.from("notification_batches").insert({title:v.title,message:v.message,type:v.type,target_count:y.size}).select().single();if(t||!a){ec({variant:"destructive",title:"Error",description:"No se pudo crear el envío masivo"}),w(!1);return}let s=Array.from(y).map(e=>({user_id:e,title:v.title,message:v.message,type:v.type,batch_id:a.id})),{error:n}=await e.from("notifications").insert(s);n?ec({variant:"destructive",title:"Error parcial",description:"Algunas notificaciones fallaron"}):(ec({variant:"success",title:"Enviado",description:`Se enviaron ${y.size} notificaciones`}),_(!1),j({title:"",message:"",type:"info"}),N(new Set),eh(),Array.from(y).forEach(e=>{ev(e,"receive_bulk_notification",{batch_id:a.id,title:v.title})})),w(!1)},eA=async()=>{if(0===y.size||!F)return;w(!0);let e=(0,el.createBrowserClient)(),{data:a}=await e.from("plans").select("price").eq("name",F).single(),t={plan_name:F,updated_at:new Date().toISOString()};a&&(t.price=a.price);let{error:s}=await e.from("subscriptions").update(t).in("user_id",Array.from(y));s?ec({variant:"destructive",title:"Error",description:"No se pudieron actualizar los planes"}):(ec({variant:"success",title:"Planes actualizados",description:`Se actualiz\xf3 el plan de ${y.size} usuarios`}),k(!1),N(new Set),ep(),Array.from(y).forEach(e=>{ev(e,"change_plan",{previous:"N/A",new:F,new_price:a?.price})})),w(!1)},eR=async()=>{if(0===y.size||!L)return;w(!0);let e=(0,el.createBrowserClient)(),{error:a}=await e.from("subscriptions").update({status:L,updated_at:new Date().toISOString()}).in("user_id",Array.from(y));a?ec({variant:"destructive",title:"Error",description:"No se pudieron actualizar los estados"}):(ec({variant:"success",title:"Estados actualizados",description:`Se actualiz\xf3 el estado de ${y.size} usuarios`}),M(!1),N(new Set),ep(),Array.from(y).forEach(e=>{ev(e,"change_status",{previous:"N/A",new:L})})),w(!1)},eB=async()=>{if(0===y.size||!R)return;w(!0);let e=(0,el.createBrowserClient)(),a=new Date(R),{error:t}=await e.from("subscriptions").update({next_billing_date:a.toISOString(),updated_at:new Date().toISOString()}).in("user_id",Array.from(y));t?ec({variant:"destructive",title:"Error",description:"No se pudieron actualizar las fechas"}):(ec({variant:"success",title:"Fechas actualizadas",description:`Se actualiz\xf3 la fecha de facturaci\xf3n de ${y.size} usuarios`}),E(!1),N(new Set),ep(),Array.from(y).forEach(e=>{ev(e,"update_billing_date",{previous:"N/A",new:a.toISOString()})})),w(!1)},eH=async()=>{if(0===y.size)return;w(!0);let e=await t4(Array.from(y));e.success?(ec({variant:"success",title:"Usuarios eliminados",description:`Se eliminaron ${y.size} usuarios permanentemente`}),T(!1),N(new Set),ep(),Array.from(y).forEach(e=>{ev(e,"bulk_delete",{})})):ec({variant:"destructive",title:"Error",description:e.error}),w(!1)},eO=async e=>{let a=(0,el.createBrowserClient)(),{error:t}=await a.from("notification_batches").delete().eq("id",e);t?ec({variant:"destructive",title:"Error",description:"No se pudo eliminar el envío"}):(ec({variant:"success",title:"Eliminado",description:"Se eliminaron las notificaciones enviadas"}),eh(),await ev("system","delete_notification_batch",{batch_id:e}))};return n?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Usuarios"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Administra tus clientes y suscripciones"})]}),(0,a.jsxs)(K.Button,{variant:"outline",onClick:()=>W(!q),children:[(0,a.jsx)(a5,{className:"mr-2 h-4 w-4"}),q?"Ver Usuarios":"Historial de Envíos"]})]}),q?(0,a.jsxs)(es.Card,{children:[(0,a.jsxs)(es.CardHeader,{children:[(0,a.jsx)(es.CardTitle,{children:"Historial de Notificaciones Masivas"}),(0,a.jsx)(es.CardDescription,{children:"Gestiona los envíos realizados. Eliminar un envío borrará las notificaciones de los usuarios."})]}),(0,a.jsx)(es.CardContent,{children:(0,a.jsxs)(ey,{children:[(0,a.jsx)(eN,{children:(0,a.jsxs)(e_,{children:[(0,a.jsx)(eS,{children:"Fecha"}),(0,a.jsx)(eS,{children:"Título"}),(0,a.jsx)(eS,{children:"Mensaje"}),(0,a.jsx)(eS,{children:"Destinatarios"}),(0,a.jsx)(eS,{className:"text-right",children:"Acciones"})]})}),(0,a.jsxs)(eC,{children:[H.map(e=>(0,a.jsxs)(e_,{children:[(0,a.jsx)(ek,{children:tX(new Date(e.created_at),"PPP p",{locale:t1})}),(0,a.jsx)(ek,{className:"font-medium",children:e.title}),(0,a.jsx)(ek,{className:"max-w-md truncate",children:e.message}),(0,a.jsx)(ek,{children:(0,a.jsxs)(ew,{variant:"secondary",children:[e.target_count," usuarios"]})}),(0,a.jsx)(ek,{className:"text-right",children:(0,a.jsxs)(K.Button,{variant:"destructive",size:"sm",onClick:()=>eO(e.id),children:[(0,a.jsx)(eu.Trash2,{className:"h-4 w-4 mr-2"})," Eliminar / Cancelar"]})})]},e.id)),0===H.length&&(0,a.jsx)(e_,{children:(0,a.jsx)(ek,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No hay envíos masivos registrados"})})]})]})})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(es.Card,{className:"overflow-hidden border-none shadow-md",children:[(0,a.jsxs)("div",{className:"p-4 border-b bg-muted/30 flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,a.jsx)(aZ,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-primary"}),(0,a.jsx)(en.Input,{placeholder:"Buscar por nombre, email...",value:i,onChange:e=>o(e.target.value),className:"pl-9 border-primary/30 focus-visible:ring-primary bg-background shadow-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[(0,a.jsxs)(K.Button,{onClick:()=>ee(!0),className:"gap-2 w-full sm:w-auto",children:[(0,a.jsx)(a1.User,{className:"h-4 w-4"}),"Agregar Usuario"]}),(0,a.jsxs)(aJ.Select,{value:l,onValueChange:c,children:[(0,a.jsx)(aJ.SelectTrigger,{className:"w-full sm:w-[160px] bg-background",children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Estado"})}),(0,a.jsxs)(aJ.SelectContent,{children:[(0,a.jsx)(aJ.SelectItem,{value:"all",children:"Todos los estados"}),(0,a.jsx)(aJ.SelectItem,{value:"active",children:"Activo"}),(0,a.jsx)(aJ.SelectItem,{value:"inactive",children:"Inactivo"}),(0,a.jsx)(aJ.SelectItem,{value:"cancelled",children:"Cancelado"})]})]}),(0,a.jsxs)(aJ.Select,{value:d,onValueChange:u,children:[(0,a.jsx)(aJ.SelectTrigger,{className:"w-full sm:w-[180px] bg-background",children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Plan"})}),(0,a.jsxs)(aJ.SelectContent,{children:[(0,a.jsx)(aJ.SelectItem,{value:"all",children:"Todos los planes"}),f.map(e=>(0,a.jsx)(aJ.SelectItem,{value:e.name,children:e.name},e.id))]})]})]})]}),y.size>0&&(0,a.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-background border shadow-xl rounded-full px-6 py-3 flex items-center gap-4 animate-in slide-in-from-bottom-4 duration-200",children:[(0,a.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2 border-r pr-4",children:[(0,a.jsx)("div",{className:"bg-primary text-primary-foreground rounded-full w-5 h-5 flex items-center justify-center text-xs",children:y.size}),"seleccionados"]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(K.Button,{size:"sm",variant:"ghost",onClick:()=>k(!0),title:"Cambiar Plan",children:(0,a.jsx)(a6.CreditCard,{className:"h-4 w-4"})}),(0,a.jsx)(K.Button,{size:"sm",variant:"ghost",onClick:()=>M(!0),title:"Cambiar Estado",children:(0,a.jsx)(a4.RefreshCw,{className:"h-4 w-4"})}),(0,a.jsx)(K.Button,{size:"sm",variant:"ghost",onClick:()=>E(!0),title:"Cambiar Fecha",children:(0,a.jsx)(ex.Calendar,{className:"h-4 w-4"})}),(0,a.jsx)(K.Button,{size:"sm",variant:"ghost",onClick:()=>_(!0),title:"Enviar Notificación",children:(0,a.jsx)(a2.Bell,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"h-4 w-px bg-border mx-1"}),(0,a.jsx)(K.Button,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>T(!0),title:"Eliminar",children:(0,a.jsx)(eu.Trash2,{className:"h-4 w-4"})}),(0,a.jsx)(K.Button,{size:"sm",variant:"ghost",onClick:()=>N(new Set),children:(0,a.jsx)(a8.XCircle,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(es.CardContent,{className:"p-0",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(ey,{className:"w-full min-w-[1000px]",children:[(0,a.jsx)(eN,{children:(0,a.jsxs)(e_,{className:"bg-muted/50 hover:bg-muted/50",children:[(0,a.jsx)(eS,{className:"w-[50px] pl-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(th,{checked:ej.length>0&&y.size===ej.length,onCheckedChange:()=>{y.size===ej.length?N(new Set):N(new Set(ej.map(e=>e.id)))},className:"h-5 w-5 scale-125 border-2 border-muted-foreground/50 data-[state=checked]:border-primary data-[state=checked]:bg-primary transition-all"})})}),(0,a.jsx)(eS,{className:"w-[20%]",children:"Usuario"}),(0,a.jsx)(eS,{className:"w-[15%]",children:"Contacto"}),(0,a.jsx)(eS,{className:"w-[12%]",children:"Plan Actual"}),(0,a.jsx)(eS,{className:"w-[12%]",children:"Costo"}),(0,a.jsx)(eS,{className:"w-[12%]",children:"Próximo Pago"}),(0,a.jsx)(eS,{className:"w-[10%]",children:"Estado"}),(0,a.jsx)(eS,{className:"w-[14%]",children:"Registro"}),(0,a.jsx)(eS,{className:"text-right w-[5%]",children:"Acciones"})]})}),(0,a.jsx)(eC,{children:0===ej.length?(0,a.jsx)(e_,{children:(0,a.jsx)(ek,{colSpan:9,className:"text-center py-12 text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(a1.User,{className:"h-8 w-8 opacity-20"}),(0,a.jsx)("p",{children:"No se encontraron usuarios con los filtros seleccionados"})]})})}):ej.map(e=>(0,a.jsxs)(e_,{className:`hover: bg - muted / 50 transition - colors cursor - pointer ${y.has(e.id)?"bg-primary/5 border-l-2 border-l-primary":"border-l-2 border-l-transparent"} `,onClick:a=>{a.target.closest("button")||a.target.closest("a")||a.target.closest('[role="checkbox"]')||ez(e.id)},children:[(0,a.jsx)(ek,{className:"pl-4 py-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(th,{checked:y.has(e.id),onCheckedChange:()=>ez(e.id),className:"h-5 w-5 scale-125 border-2 border-muted-foreground/50 data-[state=checked]:border-primary data-[state=checked]:bg-primary transition-all"})})}),(0,a.jsx)(ek,{children:(0,a.jsxs)("div",{className:"flex flex-col max-w-[200px]",children:[(0,a.jsx)("span",{className:"font-medium truncate",title:`${e.first_name||""} ${e.last_name||""} `.trim(),children:`${e.first_name||""} ${e.last_name||""} `.trim()||"Sin nombre"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate",title:e.email||"",children:e.email})]})}),(0,a.jsx)(ek,{children:(0,a.jsx)("div",{className:"flex items-center gap-2 text-sm",children:e.whatsapp?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(a7.Phone,{className:"h-3 w-3 text-green-500 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.whatsapp})]}):(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"})})}),(0,a.jsx)(ek,{children:e.subscription?(0,a.jsx)(ew,{variant:"outline",className:"font-normal bg-background",children:e.subscription.plan_name}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Sin suscripción"})}),(0,a.jsx)(ek,{children:e.subscription?(0,a.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-primary",children:[(0,a.jsx)(a9.DollarSign,{className:"h-3 w-3"}),e.subscription.price.toFixed(2)]}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,a.jsx)(ek,{children:e.subscription?.next_billing_date?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(ex.Calendar,{className:"h-3 w-3"}),tX(new Date(e.subscription.next_billing_date),"dd/MM/yyyy")]}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,a.jsx)(ek,{children:(0,a.jsx)(ew,{className:function(e){switch(e){case"active":return"bg-green-500/10 text-green-500 hover:bg-green-500/20";case"inactive":return"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20";case"cancelled":return"bg-red-500/10 text-red-500 hover:bg-red-500/20";default:return"bg-gray-500/10 text-gray-500 hover:bg-gray-500/20"}}(e.subscription?.status),children:function(e){switch(e){case"active":return"Activo";case"inactive":return"Inactivo";case"cancelled":return"Cancelado";default:return"Sin Plan"}}(e.subscription?.status)})}),(0,a.jsx)(ek,{className:"text-sm text-muted-foreground",children:tX(new Date(e.created_at),"dd/MM/yyyy",{locale:t1})}),(0,a.jsx)(ek,{className:"text-right",children:(0,a.jsxs)(a$,{children:[(0,a.jsx)(aG,{asChild:!0,children:(0,a.jsx)(K.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(a0,{className:"h-4 w-4"})})}),(0,a.jsxs)(aY,{align:"end",children:[(0,a.jsx)(aX,{children:"Acciones"}),(0,a.jsxs)(aK,{onClick:()=>{p(e),x(!0),ef(e.id),eg(e.id)},children:[(0,a.jsx)(a1.User,{className:"mr-2 h-4 w-4"})," Ver Detalles"]}),(0,a.jsx)(aQ,{}),(0,a.jsxs)(aK,{className:"text-red-600",children:[(0,a.jsx)(te.Shield,{className:"mr-2 h-4 w-4"})," Suspender Cuenta"]})]})]})})]},e.id))})]})})})]})}),(0,a.jsx)(eo.Dialog,{open:C,onOpenChange:_,children:(0,a.jsxs)(eo.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:"Enviar Notificación Masiva"}),(0,a.jsxs)(eo.DialogDescription,{children:["Se enviará a ",y.size," usuarios seleccionados."]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Título"}),(0,a.jsx)(en.Input,{placeholder:"Ej: Mantenimiento programado",value:v.title,onChange:e=>j({...v,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Tipo"}),(0,a.jsxs)(aJ.Select,{value:v.type,onValueChange:e=>j({...v,type:e}),children:[(0,a.jsx)(aJ.SelectTrigger,{children:(0,a.jsx)(aJ.SelectValue,{})}),(0,a.jsxs)(aJ.SelectContent,{children:[(0,a.jsx)(aJ.SelectItem,{value:"info",children:"Información"}),(0,a.jsx)(aJ.SelectItem,{value:"success",children:"Éxito"}),(0,a.jsx)(aJ.SelectItem,{value:"warning",children:"Advertencia"}),(0,a.jsx)(aJ.SelectItem,{value:"error",children:"Error"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Mensaje"}),(0,a.jsx)(ei,{placeholder:"Escribe el mensaje para los usuarios...",value:v.message,onChange:e=>j({...v,message:e.target.value})})]})]}),(0,a.jsxs)(eo.DialogFooter,{children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>_(!1),children:"Cancelar"}),(0,a.jsx)(K.Button,{onClick:eL,disabled:b,children:b?"Enviando...":"Enviar a Todos"})]})]})}),(0,a.jsx)(eo.Dialog,{open:S,onOpenChange:k,children:(0,a.jsxs)(eo.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:"Cambiar Plan Masivamente"}),(0,a.jsxs)(eo.DialogDescription,{children:["Selecciona el nuevo plan para los ",y.size," usuarios seleccionados."]})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Nuevo Plan"}),(0,a.jsxs)(aJ.Select,{value:F,onValueChange:z,children:[(0,a.jsx)(aJ.SelectTrigger,{children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Seleccionar plan"})}),(0,a.jsx)(aJ.SelectContent,{children:f.map(e=>(0,a.jsx)(aJ.SelectItem,{value:e.name,children:e.name},e.id))})]})]})}),(0,a.jsxs)(eo.DialogFooter,{children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>k(!1),children:"Cancelar"}),(0,a.jsx)(K.Button,{onClick:eA,disabled:b||!F,children:b?"Actualizando...":"Actualizar Planes"})]})]})}),(0,a.jsx)(eo.Dialog,{open:D,onOpenChange:M,children:(0,a.jsxs)(eo.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:"Cambiar Estado Masivamente"}),(0,a.jsxs)(eo.DialogDescription,{children:["Selecciona el nuevo estado para los ",y.size," usuarios seleccionados."]})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Nuevo Estado"}),(0,a.jsxs)(aJ.Select,{value:L,onValueChange:A,children:[(0,a.jsx)(aJ.SelectTrigger,{children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Seleccionar estado"})}),(0,a.jsxs)(aJ.SelectContent,{children:[(0,a.jsx)(aJ.SelectItem,{value:"active",children:"Activo"}),(0,a.jsx)(aJ.SelectItem,{value:"inactive",children:"Inactivo"}),(0,a.jsx)(aJ.SelectItem,{value:"cancelled",children:"Cancelado"})]})]})]})}),(0,a.jsxs)(eo.DialogFooter,{children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>M(!1),children:"Cancelar"}),(0,a.jsx)(K.Button,{onClick:eR,disabled:b||!L,children:b?"Actualizando...":"Actualizar Estados"})]})]})}),(0,a.jsx)(eo.Dialog,{open:P,onOpenChange:E,children:(0,a.jsxs)(eo.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:"Cambiar Fecha de Facturación Masivamente"}),(0,a.jsxs)(eo.DialogDescription,{children:["Selecciona la nueva fecha de facturación para los ",y.size," usuarios seleccionados."]})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Nueva Fecha"}),(0,a.jsx)(en.Input,{type:"date",value:R,onChange:e=>B(e.target.value)})]})}),(0,a.jsxs)(eo.DialogFooter,{children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>E(!1),children:"Cancelar"}),(0,a.jsx)(K.Button,{onClick:eB,disabled:b||!R,children:b?"Actualizando...":"Actualizar Fechas"})]})]})}),(0,a.jsx)(eo.Dialog,{open:I,onOpenChange:T,children:(0,a.jsxs)(eo.DialogContent,{children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsxs)(eo.DialogTitle,{className:"text-red-600 flex items-center gap-2",children:[(0,a.jsx)(a3.AlertTriangle,{className:"h-5 w-5"})," Eliminar Usuarios"]}),(0,a.jsxs)(eo.DialogDescription,{children:["¿Estás seguro de que deseas eliminar a los ",y.size," usuarios seleccionados? Esta acción es irreversible y eliminará todos sus datos, suscripciones y credenciales."]})]}),(0,a.jsxs)(eo.DialogFooter,{children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancelar"}),(0,a.jsx)(K.Button,{variant:"destructive",onClick:eH,disabled:b,children:b?"Eliminando...":"Sí, Eliminar Usuarios"})]})]})}),(0,a.jsx)(ss,{user:m,isOpen:h,onClose:()=>x(!1),availablePlans:f,onUpdateProfile:eb,onUpdateIptvCredentials:eT,onUpdateSubscriptionDetails:eM,onUpdateSubscriptionStatus:eF,onCreateSubscription:eP,onManualPasswordUpdate:eE,onSendPasswordReset:eI,userLogs:U,userInvoices:Y,loadingLogs:$,loadingInvoices:Q}),(0,a.jsx)(eo.Dialog,{open:Z,onOpenChange:ee,children:(0,a.jsxs)(eo.DialogContent,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(eo.DialogHeader,{children:[(0,a.jsx)(eo.DialogTitle,{children:"Agregar Nuevo Usuario"}),(0,a.jsx)(eo.DialogDescription,{children:"Crea un nuevo usuario manualmente. Se creará la cuenta de acceso y opcionalmente la suscripción."})]}),(0,a.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Credenciales de Acceso (Obligatorio)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(er.Label,{htmlFor:"new-email",children:["Email ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(en.Input,{id:"new-email",type:"email",placeholder:"cliente@ejemplo.com",value:ea.email,onChange:e=>et({...ea,email:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(er.Label,{htmlFor:"new-password",children:["Contraseña ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(en.Input,{id:"new-password",type:"text",placeholder:"Contraseña segura",value:ea.password,onChange:e=>et({...ea,password:e.target.value}),required:!0}),(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Mínimo 6 caracteres"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Información Personal"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"new-firstname",children:"Nombre"}),(0,a.jsx)(en.Input,{id:"new-firstname",placeholder:"Juan",value:ea.first_name,onChange:e=>et({...ea,first_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"new-lastname",children:"Apellido"}),(0,a.jsx)(en.Input,{id:"new-lastname",placeholder:"Pérez",value:ea.last_name,onChange:e=>et({...ea,last_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"new-whatsapp",children:"WhatsApp"}),(0,a.jsx)(en.Input,{id:"new-whatsapp",placeholder:"+593...",value:ea.whatsapp,onChange:e=>et({...ea,whatsapp:e.target.value})})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Suscripción Inicial (Opcional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{children:"Plan"}),(0,a.jsxs)(aJ.Select,{value:ea.plan_id,onValueChange:e=>{let a=f.find(a=>a.id===e);et({...ea,plan_id:e,price:a?a.price.toString():""})},children:[(0,a.jsx)(aJ.SelectTrigger,{children:(0,a.jsx)(aJ.SelectValue,{placeholder:"Seleccionar plan"})}),(0,a.jsx)(aJ.SelectContent,{children:f.map(e=>(0,a.jsxs)(aJ.SelectItem,{value:e.id,children:[e.name," - $",e.price]},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"new-price",children:"Precio Acordado"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(a9.DollarSign,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(en.Input,{id:"new-price",className:"pl-9",placeholder:"0.00",value:ea.price,onChange:e=>et({...ea,price:e.target.value})})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Credenciales IPTV (Opcional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"new-iptv-user",children:"Usuario IPTV"}),(0,a.jsx)(en.Input,{id:"new-iptv-user",placeholder:"user123",value:ea.iptv_username,onChange:e=>et({...ea,iptv_username:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(er.Label,{htmlFor:"new-iptv-pass",children:"Contraseña IPTV"}),(0,a.jsx)(en.Input,{id:"new-iptv-pass",placeholder:"pass123",value:ea.iptv_password,onChange:e=>et({...ea,iptv_password:e.target.value})})]})]})]})]}),(0,a.jsxs)(eo.DialogFooter,{children:[(0,a.jsx)(K.Button,{variant:"outline",onClick:()=>ee(!1),children:"Cancelar"}),(0,a.jsx)(K.Button,{onClick:eD,disabled:b,children:b?"Creando...":"Crear Usuario"})]})]})})]})}function sr(){let[e,s]=(0,t.useState)({totalUsers:0,activePlans:0,activePromotions:0,activeCoupons:0,monthlyRevenue:0}),[n,r]=(0,t.useState)(!0);(0,t.useEffect)(()=>{i()},[]);let i=async()=>{let e=(0,el.createBrowserClient)(),[a,t,n,i]=await Promise.all([e.from("subscriptions").select("user_id",{count:"exact"}),e.from("plans").select("*",{count:"exact"}),e.from("promotions").select("*",{count:"exact"}).eq("active",!0),e.from("coupons").select("*",{count:"exact"}).eq("active",!0)]);s({totalUsers:a.data?new Set(a.data.map(e=>e.user_id)).size:0,activePlans:t.count||t.data?.length||0,activePromotions:n.count||n.data?.length||0,activeCoupons:i.count||i.data?.length||0,monthlyRevenue:0}),r(!1)},o=[{title:"Usuarios Totales",value:e.totalUsers,icon:et,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Paquetes Activos",value:e.activePlans,icon:Q,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Promociones Activas",value:e.activePromotions,icon:J,color:"text-orange-600",bgColor:"bg-orange-50"},{title:"Cupones Activos",value:e.activeCoupons,icon:Z,color:"text-green-600",bgColor:"bg-green-50"}];return n?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:o.map(e=>(0,a.jsxs)(es.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(es.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(es.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,a.jsx)("div",{className:`${e.bgColor} p-2 rounded-lg`,children:(0,a.jsx)(e.icon,{className:`h-5 w-5 ${e.color}`})})]}),(0,a.jsx)(es.CardContent,{children:(0,a.jsx)("div",{className:"text-3xl font-bold",children:e.value})})]},e.title))})}var si=e.i(70021);function so(){let e=(0,si.useRouter)(),t=async()=>{let a=(0,el.createBrowserClient)();await a.auth.signOut(),e.push("/auth/login")};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Panel de Administración"}),(0,a.jsx)("p",{className:"text-sm md:text-base text-muted-foreground mt-1 md:mt-2",children:"Gestiona paquetes, promociones, cupones y usuarios de tu servicio IPTV"})]}),(0,a.jsxs)(K.Button,{variant:"outline",onClick:t,className:"gap-2 w-full md:w-auto",children:[(0,a.jsx)(ea.LogOut,{className:"h-4 w-4"}),"Cerrar Sesión"]})]}),(0,a.jsxs)(V,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsx)("div",{className:"overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0",children:(0,a.jsxs)($,{className:"inline-flex h-auto w-auto p-1 min-w-full md:grid md:w-full md:grid-cols-5 gap-2",children:[(0,a.jsxs)(G,{value:"overview",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,a.jsx)(ee,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Resumen"})]}),(0,a.jsxs)(G,{value:"users",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,a.jsx)(et,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Usuarios"})]}),(0,a.jsxs)(G,{value:"plans",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,a.jsx)(Q,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Paquetes"})]}),(0,a.jsxs)(G,{value:"promotions",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,a.jsx)(J,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Promociones"})]}),(0,a.jsxs)(G,{value:"coupons",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,a.jsx)(Z,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Cupones"})]})]})}),(0,a.jsx)(Y,{value:"overview",children:(0,a.jsx)(sr,{})}),(0,a.jsx)(Y,{value:"users",children:(0,a.jsx)(sn,{})}),(0,a.jsx)(Y,{value:"plans",children:(0,a.jsx)(ep,{})}),(0,a.jsx)(Y,{value:"promotions",children:(0,a.jsx)(ef,{})}),(0,a.jsx)(Y,{value:"coupons",children:(0,a.jsx)(ev,{})})]})]})})}e.s(["default",()=>so],37714)}]);