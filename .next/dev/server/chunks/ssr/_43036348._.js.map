{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,4SAAI,GAAG;IAE9B,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient as createSupabaseBrowserClient } from \"@supabase/ssr\"\r\n\r\nexport function createClient() {\r\n  return createSupabaseBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n  )\r\n}\r\n\r\nexport const createBrowserClient = createClient\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,8SAA2B;AAIpC;AAEO,MAAM,sBAAsB","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/header-nav.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { LogOut } from 'lucide-react'\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { useRouter } from 'next/navigation'\r\nimport type { User } from \"@supabase/supabase-js\"\r\n\r\ninterface HeaderNavProps {\r\n  user?: User | null\r\n  profile?: any\r\n}\r\n\r\nexport function HeaderNav({ user, profile }: HeaderNavProps) {\r\n  const router = useRouter()\r\n  const supabase = createClient()\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut()\r\n    router.push(\"/auth/login\")\r\n  }\r\n\r\n  const getDisplayName = () => {\r\n    if (profile?.first_name && profile?.last_name) {\r\n      return `${profile.first_name} ${profile.last_name}`\r\n    } else if (profile?.first_name) {\r\n      return profile.first_name\r\n    } else if (user?.email) {\r\n      return user.email.split(\"@\")[0]\r\n    }\r\n    return \"Usuario\"\r\n  }\r\n\r\n  const userName = getDisplayName()\r\n\r\n  return (\r\n    <header className=\"border-b border-border bg-card\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center\">\r\n            <span className=\"text-white font-bold text-lg\">üì∫</span>\r\n          </div>\r\n          <h1 className=\"text-xl font-bold text-foreground\">MaxPlayer IPTV</h1>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-4\">\r\n          <span className=\"text-sm text-muted-foreground\">{userName}</span>\r\n          <Button\r\n            onClick={handleLogout}\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-muted-foreground hover:text-foreground\"\r\n          >\r\n            <LogOut className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaO,SAAS,UAAU,EAAE,IAAI,EAAE,OAAO,EAAkB;IACzD,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,WAAW,IAAA,yIAAY;IAE7B,MAAM,eAAe;QACnB,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,iBAAiB;QACrB,IAAI,SAAS,cAAc,SAAS,WAAW;YAC7C,OAAO,GAAG,QAAQ,UAAU,CAAC,CAAC,EAAE,QAAQ,SAAS,EAAE;QACrD,OAAO,IAAI,SAAS,YAAY;YAC9B,OAAO,QAAQ,UAAU;QAC3B,OAAO,IAAI,MAAM,OAAO;YACtB,OAAO,KAAK,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;QACjC;QACA,OAAO;IACT;IAEA,MAAM,WAAW;IAEjB,qBACE,6WAAC;QAAO,WAAU;kBAChB,cAAA,6WAAC;YAAI,WAAU;;8BACb,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAI,WAAU;sCACb,cAAA,6WAAC;gCAAK,WAAU;0CAA+B;;;;;;;;;;;sCAEjD,6WAAC;4BAAG,WAAU;sCAAoC;;;;;;;;;;;;8BAGpD,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAK,WAAU;sCAAiC;;;;;;sCACjD,6WAAC,qIAAM;4BACL,SAAS;4BACT,SAAQ;4BACR,MAAK;4BACL,WAAU;sCAEV,cAAA,6WAAC,wSAAM;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9B","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/dashboard-layout.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { Home, Tv, FileText, Key, Settings } from 'lucide-react'\r\n\r\ninterface DashboardLayoutProps {\r\n  children: React.ReactNode\r\n  currentView: string\r\n  setCurrentView: (view: string) => void\r\n}\r\n\r\nexport function DashboardLayout({ children, currentView, setCurrentView }: DashboardLayoutProps) {\r\n  const navItems = [\r\n    { id: \"home\", label: \"Inicio\", icon: Home },\r\n    { id: \"plans\", label: \"Planes\", icon: Tv },\r\n    { id: \"billing\", label: \"Facturaci√≥n\", icon: FileText },\r\n    { id: \"credentials\", label: \"Credenciales\", icon: Key },\r\n    { id: \"settings\", label: \"Configuraci√≥n\", icon: Settings },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"flex gap-6 max-w-7xl mx-auto px-4 py-8\">\r\n      {/* Sidebar Navigation */}\r\n      <aside className=\"w-64 flex flex-col gap-2 sticky top-8 h-fit\">\r\n        <nav className=\"space-y-2\">\r\n          {navItems.map((item) => {\r\n            const Icon = item.icon\r\n            const isActive = currentView === item.id\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => setCurrentView(item.id)}\r\n                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors ${\r\n                  isActive ? \"bg-primary text-primary-foreground\" : \"text-foreground hover:bg-muted\"\r\n                }`}\r\n              >\r\n                <Icon className=\"w-5 h-5\" />\r\n                <span>{item.label}</span>\r\n              </button>\r\n            )\r\n          })}\r\n        </nav>\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"flex-1\">{children}</main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAHA;;;AAWO,SAAS,gBAAgB,EAAE,QAAQ,EAAE,WAAW,EAAE,cAAc,EAAwB;IAC7F,MAAM,WAAW;QACf;YAAE,IAAI;YAAQ,OAAO;YAAU,MAAM,+RAAI;QAAC;QAC1C;YAAE,IAAI;YAAS,OAAO;YAAU,MAAM,wRAAE;QAAC;QACzC;YAAE,IAAI;YAAW,OAAO;YAAe,MAAM,8SAAQ;QAAC;QACtD;YAAE,IAAI;YAAe,OAAO;YAAgB,MAAM,2RAAG;QAAC;QACtD;YAAE,IAAI;YAAY,OAAO;YAAiB,MAAM,0SAAQ;QAAC;KAC1D;IAED,qBACE,6WAAC;QAAI,WAAU;;0BAEb,6WAAC;gBAAM,WAAU;0BACf,cAAA,6WAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC;wBACb,MAAM,OAAO,KAAK,IAAI;wBACtB,MAAM,WAAW,gBAAgB,KAAK,EAAE;wBACxC,qBACE,6WAAC;4BAEC,SAAS,IAAM,eAAe,KAAK,EAAE;4BACrC,WAAW,CAAC,kFAAkF,EAC5F,WAAW,uCAAuC,kCAClD;;8CAEF,6WAAC;oCAAK,WAAU;;;;;;8CAChB,6WAAC;8CAAM,KAAK,KAAK;;;;;;;2BAPZ,KAAK,EAAE;;;;;oBAUlB;;;;;;;;;;;0BAKJ,6WAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAGhC","debugId":null}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-auth.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport type { User } from \"@supabase/supabase-js\"\r\n\r\nexport function useAuth() {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    const supabase = createClient()\r\n\r\n    const getUser = async () => {\r\n      console.log('[useAuth] Fetching user...')\r\n      try {\r\n        const {\r\n          data: { user },\r\n        } = await supabase.auth.getUser()\r\n        console.log('[useAuth] User fetched:', user?.email || 'No user')\r\n        setUser(user)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    getUser()\r\n\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange((_, session) => {\r\n      setUser(session?.user ?? null)\r\n    })\r\n\r\n    return () => subscription?.unsubscribe()\r\n  }, []) // Empty dependency array since createClient is now stable\r\n\r\n  return { user, loading }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAMO,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gVAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IAEvC,IAAA,iVAAS,EAAC;QACR,MAAM,WAAW,IAAA,yIAAY;QAE7B,MAAM,UAAU;YACd,QAAQ,GAAG,CAAC;YACZ,IAAI;gBACF,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBAC/B,QAAQ,GAAG,CAAC,2BAA2B,MAAM,SAAS;gBACtD,QAAQ;YACV,SAAU;gBACR,WAAW;YACb;QACF;QAEA;QAEA,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG;YACtC,QAAQ,SAAS,QAAQ;QAC3B;QAEA,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE,GAAE,0DAA0D;IAEjE,OAAO;QAAE;QAAM;IAAQ;AACzB","debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-subscription.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, useCallback } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { useAuth } from \"./use-auth\"\r\n\r\nexport interface Subscription {\r\n  id: string\r\n  user_id: string\r\n  plan_id: string\r\n  plan_name: string\r\n  price: number\r\n  status: string\r\n  next_billing_date: string\r\n  created_at: string\r\n  updated_at: string\r\n  plan?: {\r\n    id: string\r\n    name: string\r\n    max_screens: number\r\n    price: number\r\n  }\r\n}\r\n\r\nexport function useSubscription() {\r\n  const [subscription, setSubscription] = useState<Subscription | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const { user } = useAuth()\r\n\r\n  const fetchSubscription = useCallback(async () => {\r\n    console.log('[useSubscription] fetchSubscription called, user:', user?.email || 'No user')\r\n    if (!user) {\r\n      console.log('[useSubscription] No user, skipping fetch')\r\n      setSubscription(null)\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      console.log('[useSubscription] Fetching subscription for user:', user.id)\r\n      setLoading(true)\r\n      const supabase = createClient()\r\n      const { data, error } = await supabase\r\n        .from(\"subscriptions\")\r\n        .select(`\r\n          *,\r\n          plan:plans!subscriptions_plan_id_fkey (\r\n            id,\r\n            name,\r\n            max_screens,\r\n            price\r\n          )\r\n        `)\r\n        .eq(\"user_id\", user.id)\r\n        .order(\"created_at\", { ascending: false })\r\n        .limit(1)\r\n        .single()\r\n\r\n      if (error && error.code !== \"PGRST116\") throw error\r\n      console.log('[useSubscription] Subscription fetched:', data?.plan_name || 'No subscription')\r\n      setSubscription(data || null)\r\n      setError(null)\r\n    } catch (err) {\r\n      console.error('[useSubscription] Error:', err)\r\n      setError(err instanceof Error ? err.message : \"Error fetching subscription\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [user])\r\n\r\n  useEffect(() => {\r\n    fetchSubscription()\r\n  }, [fetchSubscription])\r\n\r\n  return { subscription, loading, error, refetch: fetchSubscription }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAwBO,SAAS;IACd,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAsB;IACtE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAClD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IAExB,MAAM,oBAAoB,IAAA,mVAAW,EAAC;QACpC,QAAQ,GAAG,CAAC,qDAAqD,MAAM,SAAS;QAChF,IAAI,CAAC,MAAM;YACT,QAAQ,GAAG,CAAC;YACZ,gBAAgB;YAChB,WAAW;YACX;QACF;QAEA,IAAI;YACF,QAAQ,GAAG,CAAC,qDAAqD,KAAK,EAAE;YACxE,WAAW;YACX,MAAM,WAAW,IAAA,yIAAY;YAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;;;;;QAQT,CAAC,EACA,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GACvC,KAAK,CAAC,GACN,MAAM;YAET,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY,MAAM;YAC9C,QAAQ,GAAG,CAAC,2CAA2C,MAAM,aAAa;YAC1E,gBAAgB,QAAQ;YACxB,SAAS;QACX,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;KAAK;IAET,IAAA,iVAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAkB;IAEtB,OAAO;QAAE;QAAc;QAAS;QAAO,SAAS;IAAkB;AACpE","debugId":null}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/notifications-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, useCallback } from \"react\"\r\nimport { createBrowserClient } from \"@/lib/supabase/client\"\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\r\nimport { X, Info, CheckCircle, AlertTriangle, AlertCircle } from 'lucide-react'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\n\r\ninterface Notification {\r\n  id: string\r\n  title: string\r\n  message: string\r\n  type: 'info' | 'success' | 'warning' | 'error'\r\n  created_at: string\r\n  read: boolean\r\n}\r\n\r\nexport function NotificationsList() {\r\n  const [notifications, setNotifications] = useState<Notification[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const fetchNotifications = useCallback(async () => {\r\n    const supabase = createBrowserClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return\r\n\r\n    const { data, error } = await supabase\r\n      .from('notifications')\r\n      .select('*')\r\n      .eq('user_id', user.id)\r\n      .eq('read', false)\r\n      .order('created_at', { ascending: false })\r\n\r\n    if (!error && data) {\r\n      setNotifications(data)\r\n    }\r\n    setLoading(false)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    fetchNotifications()\r\n\r\n    // Subscribe to new notifications\r\n    const supabase = createBrowserClient()\r\n    const channel = supabase\r\n      .channel('notifications-changes')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: 'INSERT',\r\n          schema: 'public',\r\n          table: 'notifications',\r\n          filter: `read=eq.false`\r\n        },\r\n        (payload) => {\r\n          // Refresh notifications when a new one arrives\r\n          fetchNotifications()\r\n        }\r\n      )\r\n      .subscribe()\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel)\r\n    }\r\n  }, [fetchNotifications])\r\n\r\n  const markAsRead = async (id: string) => {\r\n    // Optimistic update\r\n    setNotifications(prev => prev.filter(n => n.id !== id))\r\n\r\n    const supabase = createBrowserClient()\r\n    await supabase\r\n      .from('notifications')\r\n      .update({ read: true })\r\n      .eq('id', id)\r\n  }\r\n\r\n  const getIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'success': return <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n      case 'warning': return <AlertTriangle className=\"h-5 w-5 text-orange-600\" />\r\n      case 'error': return <AlertCircle className=\"h-5 w-5 text-red-600\" />\r\n      default: return <Info className=\"h-5 w-5 text-blue-600\" />\r\n    }\r\n  }\r\n\r\n  const getStyles = (type: string) => {\r\n    switch (type) {\r\n      case 'success': return \"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-900\"\r\n      case 'warning': return \"border-orange-200 bg-orange-50 dark:bg-orange-900/20 dark:border-orange-900\"\r\n      case 'error': return \"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-900\"\r\n      default: return \"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-900\"\r\n    }\r\n  }\r\n\r\n  if (loading || notifications.length === 0) return null\r\n\r\n  return (\r\n    <div className=\"space-y-3 mb-6\">\r\n      {notifications.map((notification) => (\r\n        <div\r\n          key={notification.id}\r\n          className={`relative flex items-start gap-4 p-4 rounded-lg border ${getStyles(notification.type)} shadow-sm transition-all animate-in fade-in slide-in-from-top-2`}\r\n        >\r\n          <div className=\"flex-shrink-0 mt-0.5\">\r\n            {getIcon(notification.type)}\r\n          </div>\r\n          <div className=\"flex-1 mr-6\">\r\n            <h4 className=\"font-semibold text-sm mb-1\">{notification.title}</h4>\r\n            <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n              {notification.message}\r\n            </p>\r\n            <p className=\"text-xs text-muted-foreground/60 mt-2\">\r\n              {new Date(notification.created_at).toLocaleDateString()} ‚Ä¢ {new Date(notification.created_at).toLocaleTimeString()}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={() => markAsRead(notification.id)}\r\n            className=\"absolute top-3 right-3 p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors\"\r\n            aria-label=\"Cerrar notificaci√≥n\"\r\n          >\r\n            <X className=\"h-4 w-4 text-muted-foreground\" />\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AALA;;;;;AAkBO,SAAS;IACd,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,gVAAQ,EAAiB,EAAE;IACrE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IAEvC,MAAM,qBAAqB,IAAA,mVAAW,EAAC;QACrC,MAAM,WAAW,IAAA,gJAAmB;QACpC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAEtD,IAAI,CAAC,MAAM;QAEX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,QAAQ,OACX,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,CAAC,SAAS,MAAM;YAClB,iBAAiB;QACnB;QACA,WAAW;IACb,GAAG,EAAE;IAEL,IAAA,iVAAS,EAAC;QACR;QAEA,iCAAiC;QACjC,MAAM,WAAW,IAAA,gJAAmB;QACpC,MAAM,UAAU,SACb,OAAO,CAAC,yBACR,EAAE,CACD,oBACA;YACE,OAAO;YACP,QAAQ;YACR,OAAO;YACP,QAAQ,CAAC,aAAa,CAAC;QACzB,GACA,CAAC;YACC,+CAA+C;YAC/C;QACF,GAED,SAAS;QAEZ,OAAO;YACL,SAAS,aAAa,CAAC;QACzB;IACF,GAAG;QAAC;KAAmB;IAEvB,MAAM,aAAa,OAAO;QACxB,oBAAoB;QACpB,iBAAiB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAEnD,MAAM,WAAW,IAAA,gJAAmB;QACpC,MAAM,SACH,IAAI,CAAC,iBACL,MAAM,CAAC;YAAE,MAAM;QAAK,GACpB,EAAE,CAAC,MAAM;IACd;IAEA,MAAM,UAAU,CAAC;QACf,OAAQ;YACN,KAAK;gBAAW,qBAAO,6WAAC,8TAAW;oBAAC,WAAU;;;;;;YAC9C,KAAK;gBAAW,qBAAO,6WAAC,6TAAa;oBAAC,WAAU;;;;;;YAChD,KAAK;gBAAS,qBAAO,6WAAC,uTAAW;oBAAC,WAAU;;;;;;YAC5C;gBAAS,qBAAO,6WAAC,8RAAI;oBAAC,WAAU;;;;;;QAClC;IACF;IAEA,MAAM,YAAY,CAAC;QACjB,OAAQ;YACN,KAAK;gBAAW,OAAO;YACvB,KAAK;gBAAW,OAAO;YACvB,KAAK;gBAAS,OAAO;YACrB;gBAAS,OAAO;QAClB;IACF;IAEA,IAAI,WAAW,cAAc,MAAM,KAAK,GAAG,OAAO;IAElD,qBACE,6WAAC;QAAI,WAAU;kBACZ,cAAc,GAAG,CAAC,CAAC,6BAClB,6WAAC;gBAEC,WAAW,CAAC,sDAAsD,EAAE,UAAU,aAAa,IAAI,EAAE,gEAAgE,CAAC;;kCAElK,6WAAC;wBAAI,WAAU;kCACZ,QAAQ,aAAa,IAAI;;;;;;kCAE5B,6WAAC;wBAAI,WAAU;;0CACb,6WAAC;gCAAG,WAAU;0CAA8B,aAAa,KAAK;;;;;;0CAC9D,6WAAC;gCAAE,WAAU;0CACV,aAAa,OAAO;;;;;;0CAEvB,6WAAC;gCAAE,WAAU;;oCACV,IAAI,KAAK,aAAa,UAAU,EAAE,kBAAkB;oCAAG;oCAAI,IAAI,KAAK,aAAa,UAAU,EAAE,kBAAkB;;;;;;;;;;;;;kCAGpH,6WAAC;wBACC,SAAS,IAAM,WAAW,aAAa,EAAE;wBACzC,WAAU;wBACV,cAAW;kCAEX,cAAA,6WAAC,qRAAC;4BAAC,WAAU;;;;;;;;;;;;eApBV,aAAa,EAAE;;;;;;;;;;AA0B9B","debugId":null}},
    {"offset": {"line": 704, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/dashboard-home.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { ChevronRight, Check, AlertCircle, Tv, CreditCard, Key, HelpCircle, AlertTriangle, CheckCircle, Info, Monitor, Percent } from 'lucide-react'\r\nimport { useSubscription } from \"@/hooks/use-subscription\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { NotificationsList } from \"@/components/notifications-list\"\r\n\r\ninterface DashboardHomeProps {\r\n  setCurrentView: (view: string) => void\r\n}\r\n\r\nexport function DashboardHome({ setCurrentView }: DashboardHomeProps) {\r\n  const { subscription, loading } = useSubscription()\r\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false)\r\n  const [activePromotions, setActivePromotions] = useState<any[]>([])\r\n\r\n  useEffect(() => {\r\n    if (!loading && !hasLoadedOnce) {\r\n      setHasLoadedOnce(true)\r\n    }\r\n  }, [loading, hasLoadedOnce])\r\n\r\n  useEffect(() => {\r\n    loadActivePromotions()\r\n  }, [])\r\n\r\n  const loadActivePromotions = async () => {\r\n    const supabase = createClient()\r\n    const now = new Date().toISOString()\r\n\r\n    const { data, error } = await supabase\r\n      .from('promotions')\r\n      .select('*')\r\n      .eq('active', true)\r\n      .or(`start_date.is.null,start_date.lte.${now}`)\r\n      .or(`end_date.is.null,end_date.gte.${now}`)\r\n\r\n    if (!error && data) {\r\n      setActivePromotions(data)\r\n    }\r\n  }\r\n\r\n  const daysRemaining = subscription\r\n    ? Math.ceil((new Date(subscription.next_billing_date).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\r\n    : 0\r\n\r\n  // Dispositivos conectados - primer valor dummy, m√°ximo desde el plan\r\n  const connectedDevices = 2 // TODO: Obtener de tabla de dispositivos reales\r\n  const maxDevices = subscription?.plan?.max_screens || 1\r\n  const devicePercentage = (connectedDevices / maxDevices) * 100\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleDateString(\"es-ES\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    })\r\n  }\r\n\r\n  const getAlertStatus = () => {\r\n    if (!subscription || subscription.status !== \"active\") {\r\n      return {\r\n        variant: \"destructive\",\r\n        icon: AlertTriangle,\r\n        title: \"Atenci√≥n Requerida\",\r\n        message: \"Tu suscripci√≥n no est√° activa. Por favor contacta a soporte o renueva tu plan.\",\r\n        bgColor: \"bg-red-50 dark:bg-red-950/30\",\r\n        borderColor: \"border-red-200 dark:border-red-900\",\r\n        iconColor: \"text-red-600 dark:text-red-400\"\r\n      }\r\n    }\r\n\r\n    if (daysRemaining <= 2) {\r\n      return {\r\n        variant: \"warning\",\r\n        icon: AlertTriangle,\r\n        title: \"Renovaci√≥n Pr√≥xima\",\r\n        message: `Tu suscripci√≥n caduca en ${daysRemaining} d√≠a${daysRemaining === 1 ? '' : 's'}. Aseg√∫rate de que tu m√©todo de pago est√© actualizado.`,\r\n        bgColor: \"bg-orange-50 dark:bg-orange-950/30\",\r\n        borderColor: \"border-orange-200 dark:border-orange-900\",\r\n        iconColor: \"text-orange-600 dark:text-orange-400\"\r\n      }\r\n    }\r\n\r\n    if (daysRemaining <= 7) {\r\n      return {\r\n        variant: \"info\",\r\n        icon: Info,\r\n        title: \"Informaci√≥n\",\r\n        message: `Tu suscripci√≥n se renovar√° en ${daysRemaining} d√≠as. Tu pr√≥xima facturaci√≥n es el ${formatDate(subscription.next_billing_date)}.`,\r\n        bgColor: \"bg-blue-50 dark:bg-blue-950/30\",\r\n        borderColor: \"border-blue-200 dark:border-blue-900\",\r\n        iconColor: \"text-blue-600 dark:text-blue-400\"\r\n      }\r\n    }\r\n\r\n    return {\r\n      variant: \"success\",\r\n      icon: CheckCircle,\r\n      title: \"Todo en Orden\",\r\n      message: \"Tu suscripci√≥n est√° activa y funcionando correctamente. Para cualquier inconveniente, contacta a nuestro soporte.\",\r\n      bgColor: \"bg-green-50 dark:bg-green-950/30\",\r\n      borderColor: \"border-green-200 dark:border-green-900\",\r\n      iconColor: \"text-green-600 dark:text-green-400\"\r\n    }\r\n  }\r\n\r\n  const alertStatus = getAlertStatus()\r\n  const AlertIcon = alertStatus.icon\r\n\r\n  if (loading && !hasLoadedOnce) {\r\n    return <div className=\"text-center py-8\">Cargando informaci√≥n...</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\">Bienvenido de vuelta</h2>\r\n        <p className=\"text-muted-foreground\">Aqu√≠ est√° el resumen de tu cuenta</p>\r\n      </div>\r\n\r\n      {/* NotificationsList component */}\r\n      <NotificationsList />\r\n\r\n      {activePromotions.length > 0 && (\r\n        <Card className=\"p-4 border-2 border-orange-500 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30 shadow-lg\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <div className=\"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0\">\r\n              <Percent className=\"w-6 h-6 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-orange-900 dark:text-orange-100 mb-1 text-lg\">\r\n                üéâ ¬°Promoci√≥n Activa! {activePromotions[0].name}\r\n              </h3>\r\n              <p className=\"text-sm text-orange-700 dark:text-orange-200 mb-3\">\r\n                {activePromotions[0].description}\r\n              </p>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"inline-flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-md\">\r\n                  {activePromotions[0].discount_percentage ? (\r\n                    <>{activePromotions[0].discount_percentage}% de descuento</>\r\n                  ) : (\r\n                    <>S/ {activePromotions[0].discount_amount} de descuento</>\r\n                  )}\r\n                </div>\r\n                <button\r\n                  onClick={() => setCurrentView(\"plans\")}\r\n                  className=\"text-sm text-orange-700 dark:text-orange-200 hover:text-orange-900 dark:hover:text-orange-100 font-semibold underline\"\r\n                >\r\n                  Ver planes ‚Üí\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Status Cards Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        {/* Plan Status */}\r\n        <Card className=\"p-6 border border-border bg-card hover:shadow-lg transition-shadow\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-muted-foreground mb-1\">Plan Actual</p>\r\n              <p className=\"text-2xl font-bold text-foreground\">{subscription?.plan_name || \"Sin plan\"}</p>\r\n              <p className=\"text-xs text-accent mt-2\">{subscription?.status === \"active\" ? \"Activo\" : \"Inactivo\"}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center\">\r\n              <Tv className=\"w-6 h-6 text-accent\" />\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Next Billing */}\r\n        <Card className=\"p-6 border border-border bg-card hover:shadow-lg transition-shadow\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-muted-foreground mb-1\">Pr√≥xima Facturaci√≥n</p>\r\n              <p className=\"text-2xl font-bold text-foreground\">\r\n                {subscription ? formatDate(subscription.next_billing_date) : \"N/A\"}\r\n              </p>\r\n              <p className=\"text-xs text-green-600 mt-2 flex items-center gap-1\">\r\n                <Check className=\"w-3 h-3\" /> {subscription?.status === \"active\" ? \"Activo\" : \"Inactivo\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center\">\r\n              <Check className=\"w-6 h-6 text-green-600\" />\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Dispositivos Conectados */}\r\n        <Card\r\n          className=\"p-6 border border-border bg-card hover:shadow-lg transition-shadow cursor-pointer\"\r\n          onClick={() => {\r\n            setCurrentView(\"settings\")\r\n            // Scroll to devices section after a small delay\r\n            setTimeout(() => {\r\n              document.getElementById('devices-section')?.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n            }, 100)\r\n          }}\r\n        >\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-sm text-muted-foreground mb-1\">Dispositivos Conectados</p>\r\n              <p className=\"text-2xl font-bold text-foreground\">{connectedDevices} de {maxDevices}</p>\r\n              <p className=\"text-xs text-muted-foreground mt-2\">Dispositivos activos</p>\r\n            </div>\r\n            <div className=\"relative w-16 h-16 flex-shrink-0\">\r\n              {/* Circular Progress */}\r\n              <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 36 36\">\r\n                {/* Background circle */}\r\n                <circle\r\n                  cx=\"18\"\r\n                  cy=\"18\"\r\n                  r=\"16\"\r\n                  fill=\"none\"\r\n                  className=\"stroke-muted\"\r\n                  strokeWidth=\"3\"\r\n                />\r\n                {/* Progress circle */}\r\n                <circle\r\n                  cx=\"18\"\r\n                  cy=\"18\"\r\n                  r=\"16\"\r\n                  fill=\"none\"\r\n                  className=\"stroke-accent\"\r\n                  strokeWidth=\"3\"\r\n                  strokeDasharray={`${devicePercentage} 100`}\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n              {/* Center icon */}\r\n              <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                <Monitor className=\"w-6 h-6 text-accent\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Acciones R√°pidas</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <Card className=\"p-4 border border-border bg-card hover:bg-muted/50 transition-colors cursor-pointer\" onClick={() => setCurrentView(\"plans\")}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                  <Tv className=\"w-5 h-5 text-accent\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-medium text-foreground\">Cambiar de Plan</p>\r\n                  <p className=\"text-sm text-muted-foreground\">Actualiza a un plan superior</p>\r\n                </div>\r\n              </div>\r\n              <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\r\n            </div>\r\n          </Card>\r\n\r\n          <Card className=\"p-4 border border-border bg-card hover:bg-muted/50 transition-colors cursor-pointer\" onClick={() => setCurrentView(\"billing\")}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                  <CreditCard className=\"w-5 h-5 text-primary\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-medium text-foreground\">Ver Facturas</p>\r\n                  <p className=\"text-sm text-muted-foreground\">Historial de pagos</p>\r\n                </div>\r\n              </div>\r\n              <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\r\n            </div>\r\n          </Card>\r\n\r\n          <Card className=\"p-4 border border-border bg-card hover:bg-muted/50 transition-colors cursor-pointer\" onClick={() => setCurrentView(\"credentials\")}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                  <Key className=\"w-5 h-5 text-green-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-medium text-foreground\">Ver Credenciales</p>\r\n                  <p className=\"text-sm text-muted-foreground\">Tu usuario y contrase√±a</p>\r\n                </div>\r\n              </div>\r\n              <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\r\n            </div>\r\n          </Card>\r\n\r\n          <Card className=\"p-4 border border-border bg-card hover:bg-muted/50 transition-colors cursor-pointer\" onClick={() => setCurrentView(\"support\")}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                  <HelpCircle className=\"w-5 h-5 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-medium text-foreground\">Soporte T√©cnico</p>\r\n                  <p className=\"text-sm text-muted-foreground\">Contacta a nuestro equipo</p>\r\n                </div>\r\n              </div>\r\n              <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Important Notice */}\r\n      <Card className={`p-4 border ${alertStatus.borderColor} ${alertStatus.bgColor}`}>\r\n        <div className=\"flex gap-3\">\r\n          <AlertIcon className={`w-5 h-5 ${alertStatus.iconColor} flex-shrink-0 mt-0.5`} />\r\n          <div>\r\n            <p className=\"font-medium text-foreground mb-1\">{alertStatus.title}</p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {alertStatus.message}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1586, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n      suppressHydrationWarning\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6WAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;QACT,wBAAwB;;;;;;AAG9B","debugId":null}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/label.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as LabelPrimitive from '@radix-ui/react-label'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6WAAC,sRAAmB;QAClB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 1639, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-plans.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\nexport interface Plan {\r\n  id: string\r\n  name: string\r\n  description: string\r\n  price: number\r\n  features: string[]\r\n  max_screens: number\r\n  plan_type: string\r\n  plan_type_id: string // Changed from number to string to support multiple IDs like \"2,4,5\"\r\n  created_at: string\r\n}\r\n\r\nexport function usePlans() {\r\n  const [plans, setPlans] = useState<Plan[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    async function fetchPlans() {\r\n      try {\r\n        setLoading(true)\r\n        const supabase = createClient()\r\n        const { data, error } = await supabase\r\n          .from(\"plans\")\r\n          .select(\"*\")\r\n          .order(\"price\", { ascending: true })\r\n\r\n        if (error) throw error\r\n        setPlans(data || [])\r\n        setError(null)\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : \"Error fetching plans\")\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchPlans()\r\n  }, [])\r\n\r\n  return { plans, loading, error }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAiBO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,IAAA,iVAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,WAAW;gBACX,MAAM,WAAW,IAAA,yIAAY;gBAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,KAAK,CAAC,SAAS;oBAAE,WAAW;gBAAK;gBAEpC,IAAI,OAAO,MAAM;gBACjB,SAAS,QAAQ,EAAE;gBACnB,SAAS;YACX,EAAE,OAAO,KAAK;gBACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAO;QAAS;IAAM;AACjC","debugId":null}},
    {"offset": {"line": 1681, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\r\nimport { XIcon } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Dialog({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\r\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\r\n}\r\n\r\nfunction DialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\r\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\r\n}\r\n\r\nfunction DialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\r\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\r\n}\r\n\r\nfunction DialogClose({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\r\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\r\n}\r\n\r\nfunction DialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      data-slot=\"dialog-overlay\"\r\n      className={cn(\r\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogContent({\r\n  className,\r\n  children,\r\n  showCloseButton = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\r\n  showCloseButton?: boolean\r\n}) {\r\n  return (\r\n    <DialogPortal data-slot=\"dialog-portal\">\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        data-slot=\"dialog-content\"\r\n        className={cn(\r\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        {showCloseButton && (\r\n          <DialogPrimitive.Close\r\n            data-slot=\"dialog-close\"\r\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\r\n          >\r\n            <XIcon />\r\n            <span className=\"sr-only\">Close</span>\r\n          </DialogPrimitive.Close>\r\n        )}\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  )\r\n}\r\n\r\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-header\"\r\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-footer\"\r\n      className={cn(\r\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      data-slot=\"dialog-title\"\r\n      className={cn('text-lg leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      data-slot=\"dialog-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6WAAC,uRAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6WAAC,0RAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6WAAC,yRAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6WAAC,wRAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6WAAC,0RAAuB;QACtB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6WAAC;QAAa,aAAU;;0BACtB,6WAAC;;;;;0BACD,6WAAC,0RAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6WAAC,wRAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6WAAC,6RAAK;;;;;0CACN,6WAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6WAAC,wRAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6WAAC,8RAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 1863, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/plans-section.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Check, Zap, Crown, Rocket, X, Tag, Percent } from 'lucide-react'\r\nimport { useSubscription } from \"@/hooks/use-subscription\"\r\nimport { usePlans } from \"@/hooks/use-plans\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\n\r\ninterface PlansSectionProps {\r\n  setCurrentView: (view: string) => void\r\n}\r\n\r\nconst PLAN_ICONS: Record<string, any> = {\r\n  basic: Zap,\r\n  premium: Crown,\r\n  \"premium-plus\": Rocket,\r\n}\r\n\r\nexport function PlansSection({ setCurrentView }: PlansSectionProps) {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null)\r\n  const [isProcessing, setIsProcessing] = useState(false)\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false)\r\n  const [couponCode, setCouponCode] = useState(\"\")\r\n  const [appliedCoupon, setAppliedCoupon] = useState<any>(null)\r\n  const [activePromotions, setActivePromotions] = useState<any[]>([])\r\n  const [loadingCoupon, setLoadingCoupon] = useState(false)\r\n\r\n  const { subscription, refetch } = useSubscription()\r\n  const { plans, loading: loadingPlans } = usePlans()\r\n  const { toast } = useToast()\r\n\r\n  const currentPlanId = subscription?.plan_id || \"basic\"\r\n\r\n  useEffect(() => {\r\n    loadActivePromotions()\r\n  }, [])\r\n\r\n  const loadActivePromotions = async () => {\r\n    const supabase = createClient()\r\n    const now = new Date().toISOString()\r\n\r\n    const { data, error } = await supabase\r\n      .from('promotions')\r\n      .select('*')\r\n      .eq('active', true)\r\n      .or(`start_date.is.null,start_date.lte.${now}`)\r\n      .or(`end_date.is.null,end_date.gte.${now}`)\r\n\r\n    if (!error && data) {\r\n      setActivePromotions(data)\r\n    }\r\n  }\r\n\r\n  const applyCoupon = async () => {\r\n    if (!couponCode.trim()) {\r\n      toast({\r\n        title: \"C√≥digo requerido\",\r\n        description: \"Por favor ingresa un c√≥digo de cup√≥n\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n      return\r\n    }\r\n\r\n    setLoadingCoupon(true)\r\n    const supabase = createClient()\r\n    const now = new Date().toISOString()\r\n\r\n    const { data, error } = await supabase\r\n      .from('coupons')\r\n      .select('*')\r\n      .eq('code', couponCode.toUpperCase())\r\n      .eq('active', true)\r\n      .single()\r\n\r\n    if (error || !data) {\r\n      toast({\r\n        title: \"Cup√≥n inv√°lido\",\r\n        description: \"El c√≥digo ingresado no existe o ha expirado\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n      setLoadingCoupon(false)\r\n      return\r\n    }\r\n\r\n    if (data.start_date && new Date(data.start_date) > new Date(now)) {\r\n      toast({\r\n        title: \"Cup√≥n no disponible\",\r\n        description: \"Este cup√≥n a√∫n no est√° disponible\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n      setLoadingCoupon(false)\r\n      return\r\n    }\r\n\r\n    if (data.end_date && new Date(data.end_date) < new Date(now)) {\r\n      toast({\r\n        title: \"Cup√≥n expirado\",\r\n        description: \"Este cup√≥n ya no est√° disponible\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n      setLoadingCoupon(false)\r\n      return\r\n    }\r\n\r\n    if (data.max_uses && data.current_uses >= data.max_uses) {\r\n      toast({\r\n        title: \"Cup√≥n agotado\",\r\n        description: \"Este cup√≥n ya alcanz√≥ su l√≠mite de usos\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n      setLoadingCoupon(false)\r\n      return\r\n    }\r\n\r\n    setAppliedCoupon(data)\r\n    toast({\r\n      title: \"Cup√≥n aplicado\",\r\n      description: `Has obtenido un descuento de ${data.discount_percentage ? `${data.discount_percentage}%` : `S/ ${data.discount_amount}`}`,\r\n      variant: \"success\",\r\n      duration: 3000,\r\n    })\r\n    setLoadingCoupon(false)\r\n  }\r\n\r\n  const calculateFinalPrice = (basePrice: number) => {\r\n    let finalPrice = basePrice\r\n\r\n    if (activePromotions.length > 0) {\r\n      const promo = activePromotions[0]\r\n      if (promo.discount_percentage) {\r\n        finalPrice -= (finalPrice * promo.discount_percentage) / 100\r\n      } else if (promo.discount_amount) {\r\n        finalPrice -= promo.discount_amount\r\n      }\r\n    }\r\n\r\n    if (appliedCoupon) {\r\n      if (appliedCoupon.discount_percentage) {\r\n        finalPrice -= (finalPrice * appliedCoupon.discount_percentage) / 100\r\n      } else if (appliedCoupon.discount_amount) {\r\n        finalPrice -= appliedCoupon.discount_amount\r\n      }\r\n    }\r\n\r\n    return Math.max(0, finalPrice)\r\n  }\r\n\r\n  const handlePlanChange = (planId: string) => {\r\n    if (planId === currentPlanId) {\r\n      toast({\r\n        title: \"Plan actual\",\r\n        description: \"Ya tienes este plan activo\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n      return\r\n    }\r\n    setSelectedPlan(planId)\r\n    setShowConfirmModal(true)\r\n  }\r\n\r\n  const confirmPlanChange = async () => {\r\n    if (!selectedPlan || !subscription) return\r\n\r\n    setIsProcessing(true)\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      const selectedPlanData = plans.find((p) => p.id === selectedPlan)\r\n\r\n      if (!selectedPlanData) throw new Error(\"Plan no encontrado\")\r\n\r\n      const finalPrice = calculateFinalPrice(selectedPlanData.price)\r\n\r\n      const { error: updateError } = await supabase\r\n        .from(\"subscriptions\")\r\n        .update({\r\n          plan_id: selectedPlanData.id,\r\n          plan_name: selectedPlanData.name,\r\n          price: finalPrice,\r\n          updated_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"user_id\", subscription.user_id)\r\n\r\n      if (updateError) throw updateError\r\n\r\n      if (appliedCoupon) {\r\n        await supabase\r\n          .from('coupons')\r\n          .update({ current_uses: appliedCoupon.current_uses + 1 })\r\n          .eq('id', appliedCoupon.id)\r\n      }\r\n\r\n      await supabase.from(\"invoices\").insert({\r\n        user_id: subscription.user_id,\r\n        amount: finalPrice,\r\n        status: \"paid\",\r\n        description: `Cambio a ${selectedPlanData.name}${appliedCoupon ? ` (Cup√≥n: ${appliedCoupon.code})` : ''}${activePromotions.length > 0 ? ` (Promoci√≥n aplicada)` : ''}`,\r\n        invoice_date: new Date().toISOString(),\r\n      })\r\n\r\n      await refetch()\r\n\r\n      toast({\r\n        title: \"Plan actualizado exitosamente\",\r\n        description: `Te hemos cambiado al plan ${selectedPlanData.name}${finalPrice < selectedPlanData.price ? ` con descuento aplicado` : ''}.`,\r\n        variant: \"success\",\r\n        duration: 3000,\r\n      })\r\n\r\n      setShowConfirmModal(false)\r\n      setSelectedPlan(null)\r\n      setAppliedCoupon(null)\r\n      setCouponCode(\"\")\r\n    } catch (error) {\r\n      console.error(\"Error cambiando plan:\", error)\r\n      toast({\r\n        title: \"Error al cambiar plan\",\r\n        description: \"No se pudo cambiar el plan. Por favor, intenta de nuevo.\",\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      })\r\n    } finally {\r\n      setIsProcessing(false)\r\n    }\r\n  }\r\n\r\n  if (loadingPlans) {\r\n    return (\r\n      <div className=\"space-y-8\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold text-foreground mb-2\">Planes y Suscripci√≥n</h2>\r\n          <p className=\"text-muted-foreground\">Cargando planes disponibles...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\">Planes y Suscripci√≥n</h2>\r\n        <p className=\"text-muted-foreground\">\r\n          Tu plan actual: <span className=\"font-semibold text-primary\">{subscription?.plan_name || \"Cargando...\"}</span>\r\n        </p>\r\n      </div>\r\n\r\n      {activePromotions.length > 0 && (\r\n        <Card className=\"p-4 border-2 border-orange-500 bg-orange-50\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <Percent className=\"w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5\" />\r\n            <div>\r\n              <h3 className=\"font-bold text-orange-900 mb-1\">\r\n                ¬°Promoci√≥n Activa! {activePromotions[0].name}\r\n              </h3>\r\n              <p className=\"text-sm text-orange-700 mb-2\">\r\n                {activePromotions[0].description}\r\n              </p>\r\n              <div className=\"inline-flex items-center gap-2 bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-semibold\">\r\n                {activePromotions[0].discount_percentage ? (\r\n                  <>{activePromotions[0].discount_percentage}% de descuento</>\r\n                ) : (\r\n                  <>S/ {activePromotions[0].discount_amount} de descuento</>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      <Card className=\"p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200\">\r\n        <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-end\">\r\n          <div className=\"flex-1 w-full\">\r\n            <Label htmlFor=\"coupon-code\" className=\"text-green-900 font-semibold flex items-center gap-2 mb-2\">\r\n              <Tag className=\"w-4 h-4\" />\r\n              ¬øTienes un c√≥digo de cup√≥n?\r\n            </Label>\r\n            <Input\r\n              id=\"coupon-code\"\r\n              placeholder=\"Ingresa tu c√≥digo\"\r\n              value={couponCode}\r\n              onChange={(e) => setCouponCode(e.target.value.toUpperCase())}\r\n              disabled={!!appliedCoupon || loadingCoupon}\r\n              className=\"uppercase\"\r\n            />\r\n          </div>\r\n          {!appliedCoupon ? (\r\n            <Button\r\n              onClick={applyCoupon}\r\n              disabled={loadingCoupon || !couponCode.trim()}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              {loadingCoupon ? \"Validando...\" : \"Aplicar Cup√≥n\"}\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              onClick={() => {\r\n                setAppliedCoupon(null)\r\n                setCouponCode(\"\")\r\n                toast({\r\n                  title: \"Cup√≥n removido\",\r\n                  description: \"El cup√≥n ha sido removido\",\r\n                  duration: 3000,\r\n                })\r\n              }}\r\n              variant=\"outline\"\r\n              className=\"border-green-600 text-green-600\"\r\n            >\r\n              Remover Cup√≥n\r\n            </Button>\r\n          )}\r\n        </div>\r\n        {appliedCoupon && (\r\n          <div className=\"mt-3 flex items-center gap-2 text-sm text-green-700 bg-green-100 px-3 py-2 rounded-lg\">\r\n            <Check className=\"w-4 h-4\" />\r\n            <span className=\"font-semibold\">Cup√≥n \"{appliedCoupon.code}\" aplicado exitosamente</span>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {plans.map((plan) => {\r\n          const Icon = PLAN_ICONS[plan.id] || Zap\r\n          const isCurrent = currentPlanId === plan.id\r\n          const features = Array.isArray(plan.features) ? plan.features : JSON.parse(plan.features || \"[]\")\r\n          const originalPrice = plan.price\r\n          const finalPrice = calculateFinalPrice(originalPrice)\r\n          const hasDiscount = finalPrice < originalPrice\r\n\r\n          return (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative overflow-hidden transition-all duration-300 flex flex-col ${isCurrent\r\n                  ? \"border-2 border-primary shadow-lg\"\r\n                  : \"border border-border hover:border-primary/50 hover:shadow-md\"\r\n                }`}\r\n            >\r\n              {isCurrent && (\r\n                <div className=\"absolute top-0 left-0 right-0 bg-gradient-to-r from-primary to-accent text-white px-3 py-1.5 text-center font-semibold text-xs\">\r\n                  <Check className=\"w-3 h-3 inline mr-1\" />\r\n                  TU PLAN ACTUAL\r\n                </div>\r\n              )}\r\n\r\n              <div className={`p-5 flex flex-col flex-1 ${isCurrent ? \"pt-10\" : \"\"}`}>\r\n                {/* Header */}\r\n                <div className=\"flex items-start gap-3 mb-4\">\r\n                  <div className={`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${isCurrent ? \"bg-primary/10\" : \"bg-muted\"\r\n                    }`}>\r\n                    <Icon className={`w-5 h-5 ${isCurrent ? \"text-primary\" : \"text-muted-foreground\"}`} />\r\n                  </div>\r\n\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"text-lg font-bold text-foreground mb-0.5 truncate\">{plan.name}</h3>\r\n                    <p className=\"text-xs text-muted-foreground line-clamp-1\">{plan.description}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Pricing */}\r\n                <div className=\"mb-4 pb-4 border-b\">\r\n                  {hasDiscount ? (\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-sm text-muted-foreground line-through\">${originalPrice}</span>\r\n                        <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold\">\r\n                          -{((originalPrice - finalPrice) / originalPrice * 100).toFixed(0)}%\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex items-baseline gap-1\">\r\n                        <span className=\"text-3xl font-bold text-green-600\">${finalPrice.toFixed(2)}</span>\r\n                        <span className=\"text-sm text-green-600\">/mes</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex items-baseline gap-1\">\r\n                      <span className=\"text-3xl font-bold text-foreground\">${plan.price}</span>\r\n                      <span className=\"text-sm text-muted-foreground\">/mes</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Features */}\r\n                <ul className=\"space-y-2 mb-5 flex-1\">\r\n                  {features.slice(0, 6).map((feature: string, idx: number) => (\r\n                    <li key={idx} className=\"flex items-start gap-2 text-sm\">\r\n                      <Check className={`w-4 h-4 shrink-0 mt-0.5 ${isCurrent ? \"text-primary\" : \"text-green-600\"\r\n                        }`} />\r\n                      <span className=\"text-foreground/90 leading-tight\">{feature}</span>\r\n                    </li>\r\n                  ))}\r\n                  {features.length > 6 && (\r\n                    <li className=\"text-xs text-muted-foreground italic pl-6\">\r\n                      +{features.length - 6} caracter√≠sticas m√°s\r\n                    </li>\r\n                  )}\r\n                </ul>\r\n\r\n                {/* Button */}\r\n                <Button\r\n                  onClick={() => handlePlanChange(plan.id)}\r\n                  disabled={isProcessing || isCurrent}\r\n                  className={`w-full ${isCurrent\r\n                      ? \"bg-gradient-to-r from-primary to-accent text-white cursor-default\"\r\n                      : \"bg-primary text-primary-foreground hover:bg-primary/90\"\r\n                    }`}\r\n                >\r\n                  {isCurrent ? (\r\n                    <>\r\n                      <Check className=\"w-4 h-4 mr-2\" />\r\n                      Plan Activo\r\n                    </>\r\n                  ) : (\r\n                    \"Seleccionar Plan\"\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </Card>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      <Dialog open={showConfirmModal} onOpenChange={setShowConfirmModal}>\r\n        <DialogContent className=\"sm:max-w-[500px]\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-2xl flex items-center gap-2\">\r\n              <Crown className=\"w-6 h-6 text-primary\" />\r\n              Confirmar Cambio de Plan\r\n            </DialogTitle>\r\n            <div className=\"text-muted-foreground text-base pt-4 space-y-4\">\r\n              <p>\r\n                Est√°s a punto de cambiar al plan{\" \"}\r\n                <span className=\"font-semibold text-primary\">\r\n                  {plans.find((p) => p.id === selectedPlan)?.name}\r\n                </span>\r\n                .\r\n              </p>\r\n              <div className=\"bg-muted rounded-lg p-4 space-y-2\">\r\n                {selectedPlan && (() => {\r\n                  const plan = plans.find((p) => p.id === selectedPlan)\r\n                  if (!plan) return null\r\n                  const originalPrice = plan.price\r\n                  const finalPrice = calculateFinalPrice(originalPrice)\r\n                  const hasDiscount = finalPrice < originalPrice\r\n\r\n                  return (\r\n                    <>\r\n                      {hasDiscount && (\r\n                        <div className=\"flex justify-between text-sm\">\r\n                          <span className=\"text-muted-foreground\">Precio original:</span>\r\n                          <span className=\"line-through text-muted-foreground\">${originalPrice}/mes</span>\r\n                        </div>\r\n                      )}\r\n                      {activePromotions.length > 0 && (\r\n                        <div className=\"flex justify-between text-sm text-orange-600\">\r\n                          <span>Promoci√≥n activa:</span>\r\n                          <span className=\"font-semibold\">\r\n                            -{activePromotions[0].discount_percentage ? `${activePromotions[0].discount_percentage}%` : `$${activePromotions[0].discount_amount}`}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      {appliedCoupon && (\r\n                        <div className=\"flex justify-between text-sm text-green-600\">\r\n                          <span>Cup√≥n ({appliedCoupon.code}):</span>\r\n                          <span className=\"font-semibold\">\r\n                            -{appliedCoupon.discount_percentage ? `${appliedCoupon.discount_percentage}%` : `$${appliedCoupon.discount_amount}`}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"flex justify-between text-sm border-t pt-2\">\r\n                        <span className=\"font-semibold text-foreground\">Precio final:</span>\r\n                        <span className={`font-bold text-lg ${hasDiscount ? 'text-green-600' : 'text-foreground'}`}>\r\n                          ${finalPrice.toFixed(2)}/mes\r\n                        </span>\r\n                      </div>\r\n                      {hasDiscount && (\r\n                        <div className=\"text-center text-xs text-green-600 font-semibold bg-green-50 py-1 rounded\">\r\n                          ¬°Ahorras ${(originalPrice - finalPrice).toFixed(2)} al mes!\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )\r\n                })()}\r\n              </div>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                El cambio se aplicar√° inmediatamente. Se te cobrar√° la nueva tarifa de forma proporcional.\r\n              </p>\r\n            </div>\r\n          </DialogHeader>\r\n          <DialogFooter className=\"gap-3 sm:gap-3 flex-col sm:flex-row\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setShowConfirmModal(false)\r\n                setSelectedPlan(null)\r\n              }}\r\n              disabled={isProcessing}\r\n              className=\"w-full sm:flex-1\"\r\n            >\r\n              <X className=\"w-4 h-4 mr-2\" />\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              onClick={confirmPlanChange}\r\n              disabled={isProcessing}\r\n              className=\"w-full sm:flex-1 bg-gradient-to-r from-primary to-accent text-white hover:from-primary/90 hover:to-accent/90\"\r\n            >\r\n              {isProcessing ? (\r\n                \"Procesando...\"\r\n              ) : (\r\n                <>\r\n                  <Check className=\"w-4 h-4 mr-2\" />\r\n                  Confirmar Cambio\r\n                </>\r\n              )}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Card className=\"p-6 border border-border bg-card\">\r\n        <h3 className=\"text-xl font-bold text-foreground mb-4\">¬øNecesitas ayuda para elegir?</h3>\r\n        <p className=\"text-muted-foreground mb-4\">\r\n          Todos nuestros planes incluyen acceso a m√°s de 1000 canales internacionales, VOD ilimitado y compatibilidad\r\n          con todos los dispositivos populares.\r\n        </p>\r\n        <Button variant=\"outline\">Contactar Soporte</Button>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2912, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-invoices.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { useAuth } from \"./use-auth\"\r\n\r\nexport interface Invoice {\r\n  id: string\r\n  user_id: string\r\n  amount: number\r\n  status: string\r\n  invoice_date: string\r\n  due_date: string\r\n}\r\n\r\nexport function useInvoices() {\r\n  const [invoices, setInvoices] = useState<Invoice[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const { user } = useAuth()\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setInvoices([])\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    const fetchInvoices = async () => {\r\n      try {\r\n        const supabase = createClient()\r\n        const { data, error } = await supabase\r\n          .from(\"invoices\")\r\n          .select(\"*\")\r\n          .eq(\"user_id\", user.id)\r\n          .order(\"invoice_date\", { ascending: false })\r\n\r\n        if (error) throw error\r\n        setInvoices(data || [])\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : \"Error fetching invoices\")\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchInvoices()\r\n  }, [user]) // Only depend on user, not supabase instance\r\n\r\n  return { invoices, loading, error }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAeO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAClD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IAExB,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,YAAY,EAAE;YACd,WAAW;YACX;QACF;QAEA,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,WAAW,IAAA,yIAAY;gBAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,gBAAgB;oBAAE,WAAW;gBAAM;gBAE5C,IAAI,OAAO,MAAM;gBACjB,YAAY,QAAQ,EAAE;YACxB,EAAE,OAAO,KAAK;gBACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAK,GAAE,6CAA6C;IAExD,OAAO;QAAE;QAAU;QAAS;IAAM;AACpC","debugId":null}},
    {"offset": {"line": 2962, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-profile.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { useAuth } from \"@/hooks/use-auth\"\r\n\r\ninterface Profile {\r\n  id: string\r\n  first_name: string | null\r\n  last_name: string | null\r\n  email: string | null\r\n  whatsapp: string | null\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport function useProfile() {\r\n  const { user } = useAuth()\r\n  const [profile, setProfile] = useState<Profile | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const fetchProfile = async () => {\r\n    if (!user) {\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      setLoading(true)\r\n      const supabase = createClient()\r\n      \r\n      const { data, error: fetchError } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"*\")\r\n        .eq(\"id\", user.id)\r\n        .single()\r\n\r\n      if (fetchError) {\r\n        throw fetchError\r\n      }\r\n      \r\n      setProfile(data)\r\n      setError(null)\r\n    } catch (err) {\r\n      console.error(\"Error fetching profile:\", err)\r\n      setError(err instanceof Error ? err.message : \"Error desconocido\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const updateProfile = async (updates: Partial<Omit<Profile, 'id' | 'created_at' | 'updated_at'>>) => {\r\n    if (!user) return { error: \"No hay usuario autenticado\" }\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      \r\n      const { error: updateError } = await supabase\r\n        .from(\"profiles\")\r\n        .update(updates)\r\n        .eq(\"id\", user.id)\r\n\r\n      if (updateError) {\r\n        throw updateError\r\n      }\r\n      \r\n      // Refetch profile after update\r\n      await fetchProfile()\r\n      \r\n      return { error: null }\r\n    } catch (err) {\r\n      console.error(\"Error updating profile:\", err)\r\n      return { error: err instanceof Error ? err.message : \"Error actualizando perfil\" }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchProfile()\r\n  }, [user])\r\n\r\n  return { profile, loading, error, updateProfile, refetch: fetchProfile }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAgBO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM;YACT,WAAW;YACX;QACF;QAEA,IAAI;YACF,WAAW;YACX,MAAM,WAAW,IAAA,yIAAY;YAE7B,MAAM,EAAE,IAAI,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACvC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAET,IAAI,YAAY;gBACd,MAAM;YACR;YAEA,WAAW;YACX,SAAS;QACX,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,gBAAgB,OAAO;QAC3B,IAAI,CAAC,MAAM,OAAO;YAAE,OAAO;QAA6B;QAExD,IAAI;YACF,MAAM,WAAW,IAAA,yIAAY;YAE7B,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,YACL,MAAM,CAAC,SACP,EAAE,CAAC,MAAM,KAAK,EAAE;YAEnB,IAAI,aAAa;gBACf,MAAM;YACR;YAEA,+BAA+B;YAC/B,MAAM;YAEN,OAAO;gBAAE,OAAO;YAAK;QACvB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO;gBAAE,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;YAA4B;QACnF;IACF;IAEA,IAAA,iVAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAK;IAET,OAAO;QAAE;QAAS;QAAS;QAAO;QAAe,SAAS;IAAa;AACzE","debugId":null}},
    {"offset": {"line": 3038, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/select.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as SelectPrimitive from '@radix-ui/react-select'\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  size = 'default',\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\r\n  size?: 'sm' | 'default'\r\n}) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      data-size={size}\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = 'popper',\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\r\n          position === 'popper' &&\r\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\r\n          className,\r\n        )}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            'p-1',\r\n            position === 'popper' &&\r\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        'flex cursor-default items-center justify-center py-1',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        'flex cursor-default items-center justify-center py-1',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6WAAC,uRAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6WAAC,wRAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6WAAC,wRAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,6WAAC,0RAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,kHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,6WAAC,uRAAoB;gBAAC,OAAO;0BAC3B,cAAA,6WAAC,+TAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,6WAAC,yRAAsB;kBACrB,cAAA,6WAAC,0RAAuB;YACtB,aAAU;YACV,WAAW,IAAA,kHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6WAAC;;;;;8BACD,6WAAC,2RAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6WAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6WAAC,wRAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,6WAAC,uRAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,6WAAC;gBAAK,WAAU;0BACd,cAAA,6WAAC,gSAA6B;8BAC5B,cAAA,6WAAC,ySAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,6WAAC,2RAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,6WAAC,4RAAyB;QACxB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,6WAAC,iSAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6WAAC,yTAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6WAAC,mSAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6WAAC,+TAAe;YAAC,WAAU;;;;;;;;;;;AAGjC","debugId":null}},
    {"offset": {"line": 3271, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/lib/constants.ts"],"sourcesContent":["export const countryCodes = [\r\n    { code: \"+51\", country: \"Per√∫\", flag: \"üáµüá™\", maxDigits: 9 },\r\n    { code: \"+1\", country: \"Estados Unidos/Canad√°\", flag: \"üá∫üá∏\", maxDigits: 10 },\r\n    { code: \"+52\", country: \"M√©xico\", flag: \"üá≤üáΩ\", maxDigits: 10 },\r\n    { code: \"+34\", country: \"Espa√±a\", flag: \"üá™üá∏\", maxDigits: 9 },\r\n    { code: \"+54\", country: \"Argentina\", flag: \"üá¶üá∑\", maxDigits: 10 },\r\n    { code: \"+57\", country: \"Colombia\", flag: \"üá®üá¥\", maxDigits: 10 },\r\n    { code: \"+55\", country: \"Brasil\", flag: \"üáßüá∑\", maxDigits: 11 },\r\n    { code: \"+56\", country: \"Chile\", flag: \"üá®üá±\", maxDigits: 9 },\r\n    { code: \"+49\", country: \"Alemania\", flag: \"üá©üá™\", maxDigits: 11 },\r\n    { code: \"+213\", country: \"Argelia\", flag: \"üá©üáø\", maxDigits: 9 },\r\n    { code: \"+966\", country: \"Arabia Saudita\", flag: \"üá∏üá¶\", maxDigits: 9 },\r\n    { code: \"+61\", country: \"Australia\", flag: \"üá¶üá∫\", maxDigits: 9 },\r\n    { code: \"+43\", country: \"Austria\", flag: \"üá¶üáπ\", maxDigits: 10 },\r\n    { code: \"+32\", country: \"B√©lgica\", flag: \"üáßüá™\", maxDigits: 9 },\r\n    { code: \"+591\", country: \"Bolivia\", flag: \"üáßüá¥\", maxDigits: 8 },\r\n    { code: \"+86\", country: \"China\", flag: \"üá®üá≥\", maxDigits: 11 },\r\n    { code: \"+82\", country: \"Corea del Sur\", flag: \"üá∞üá∑\", maxDigits: 10 },\r\n    { code: \"+506\", country: \"Costa Rica\", flag: \"üá®üá∑\", maxDigits: 8 },\r\n    { code: \"+53\", country: \"Cuba\", flag: \"üá®üá∫\", maxDigits: 8 },\r\n    { code: \"+45\", country: \"Dinamarca\", flag: \"üá©üá∞\", maxDigits: 8 },\r\n    { code: \"+593\", country: \"Ecuador\", flag: \"üá™üá®\", maxDigits: 9 },\r\n    { code: \"+20\", country: \"Egipto\", flag: \"üá™üá¨\", maxDigits: 10 },\r\n    { code: \"+503\", country: \"El Salvador\", flag: \"üá∏üáª\", maxDigits: 8 },\r\n    { code: \"+971\", country: \"Emiratos √Årabes\", flag: \"üá¶üá™\", maxDigits: 9 },\r\n    { code: \"+63\", country: \"Filipinas\", flag: \"üáµüá≠\", maxDigits: 10 },\r\n    { code: \"+358\", country: \"Finlandia\", flag: \"üá´üáÆ\", maxDigits: 10 },\r\n    { code: \"+33\", country: \"Francia\", flag: \"üá´üá∑\", maxDigits: 9 },\r\n    { code: \"+502\", country: \"Guatemala\", flag: \"üá¨üáπ\", maxDigits: 8 },\r\n    { code: \"+594\", country: \"Guayana Francesa\", flag: \"üá¨üá´\", maxDigits: 9 },\r\n    { code: \"+592\", country: \"Guyana\", flag: \"üá¨üáæ\", maxDigits: 7 },\r\n    { code: \"+509\", country: \"Hait√≠\", flag: \"üá≠üáπ\", maxDigits: 8 },\r\n    { code: \"+504\", country: \"Honduras\", flag: \"üá≠üá≥\", maxDigits: 8 },\r\n    { code: \"+91\", country: \"India\", flag: \"üáÆüá≥\", maxDigits: 10 },\r\n    { code: \"+62\", country: \"Indonesia\", flag: \"üáÆüá©\", maxDigits: 11 },\r\n    { code: \"+972\", country: \"Israel\", flag: \"üáÆüá±\", maxDigits: 9 },\r\n    { code: \"+39\", country: \"Italia\", flag: \"üáÆüáπ\", maxDigits: 10 },\r\n    { code: \"+81\", country: \"Jap√≥n\", flag: \"üáØüáµ\", maxDigits: 10 },\r\n    { code: \"+254\", country: \"Kenia\", flag: \"üá∞üá™\", maxDigits: 10 },\r\n    { code: \"+60\", country: \"Malasia\", flag: \"üá≤üáæ\", maxDigits: 10 },\r\n    { code: \"+212\", country: \"Marruecos\", flag: \"üá≤üá¶\", maxDigits: 9 },\r\n    { code: \"+505\", country: \"Nicaragua\", flag: \"üá≥üáÆ\", maxDigits: 8 },\r\n    { code: \"+234\", country: \"Nigeria\", flag: \"üá≥üá¨\", maxDigits: 10 },\r\n    { code: \"+47\", country: \"Noruega\", flag: \"üá≥üá¥\", maxDigits: 8 },\r\n    { code: \"+64\", country: \"Nueva Zelanda\", flag: \"üá≥üáø\", maxDigits: 9 },\r\n    { code: \"+31\", country: \"Pa√≠ses Bajos\", flag: \"üá≥üá±\", maxDigits: 9 },\r\n    { code: \"+507\", country: \"Panam√°\", flag: \"üáµüá¶\", maxDigits: 8 },\r\n    { code: \"+595\", country: \"Paraguay\", flag: \"üáµüáæ\", maxDigits: 9 },\r\n    { code: \"+351\", country: \"Portugal\", flag: \"üáµüáπ\", maxDigits: 9 },\r\n    { code: \"+1-787\", country: \"Puerto Rico\", flag: \"üáµüá∑\", maxDigits: 10 },\r\n    { code: \"+44\", country: \"Reino Unido\", flag: \"üá¨üáß\", maxDigits: 10 },\r\n    { code: \"+1-809\", country: \"Rep√∫blica Dominicana\", flag: \"üá©üá¥\", maxDigits: 10 },\r\n    { code: \"+7\", country: \"Rusia\", flag: \"üá∑üá∫\", maxDigits: 10 },\r\n    { code: \"+65\", country: \"Singapur\", flag: \"üá∏üá¨\", maxDigits: 8 },\r\n    { code: \"+27\", country: \"Sud√°frica\", flag: \"üáøüá¶\", maxDigits: 9 },\r\n    { code: \"+46\", country: \"Suecia\", flag: \"üá∏üá™\", maxDigits: 9 },\r\n    { code: \"+41\", country: \"Suiza\", flag: \"üá®üá≠\", maxDigits: 9 },\r\n    { code: \"+66\", country: \"Tailandia\", flag: \"üáπüá≠\", maxDigits: 9 },\r\n    { code: \"+216\", country: \"T√∫nez\", flag: \"üáπüá≥\", maxDigits: 8 },\r\n    { code: \"+90\", country: \"Turqu√≠a\", flag: \"üáπüá∑\", maxDigits: 10 },\r\n    { code: \"+598\", country: \"Uruguay\", flag: \"üá∫üáæ\", maxDigits: 8 },\r\n    { code: \"+58\", country: \"Venezuela\", flag: \"üáªüá™\", maxDigits: 10 },\r\n    { code: \"+84\", country: \"Vietnam\", flag: \"üáªüá≥\", maxDigits: 10 },\r\n]\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,eAAe;IACxB;QAAE,MAAM;QAAO,SAAS;QAAQ,MAAM;QAAQ,WAAW;IAAE;IAC3D;QAAE,MAAM;QAAM,SAAS;QAAyB,MAAM;QAAQ,WAAW;IAAG;IAC5E;QAAE,MAAM;QAAO,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAG;IAC9D;QAAE,MAAM;QAAO,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAE;IAC7D;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAG;IACjE;QAAE,MAAM;QAAO,SAAS;QAAY,MAAM;QAAQ,WAAW;IAAG;IAChE;QAAE,MAAM;QAAO,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAG;IAC9D;QAAE,MAAM;QAAO,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAE;IAC5D;QAAE,MAAM;QAAO,SAAS;QAAY,MAAM;QAAQ,WAAW;IAAG;IAChE;QAAE,MAAM;QAAQ,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC/D;QAAE,MAAM;QAAQ,SAAS;QAAkB,MAAM;QAAQ,WAAW;IAAE;IACtE;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAG;IAC/D;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC9D;QAAE,MAAM;QAAQ,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC/D;QAAE,MAAM;QAAO,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAG;IAC7D;QAAE,MAAM;QAAO,SAAS;QAAiB,MAAM;QAAQ,WAAW;IAAG;IACrE;QAAE,MAAM;QAAQ,SAAS;QAAc,MAAM;QAAQ,WAAW;IAAE;IAClE;QAAE,MAAM;QAAO,SAAS;QAAQ,MAAM;QAAQ,WAAW;IAAE;IAC3D;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAQ,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC/D;QAAE,MAAM;QAAO,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAG;IAC9D;QAAE,MAAM;QAAQ,SAAS;QAAe,MAAM;QAAQ,WAAW;IAAE;IACnE;QAAE,MAAM;QAAQ,SAAS;QAAmB,MAAM;QAAQ,WAAW;IAAE;IACvE;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAG;IACjE;QAAE,MAAM;QAAQ,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAG;IAClE;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC9D;QAAE,MAAM;QAAQ,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IACjE;QAAE,MAAM;QAAQ,SAAS;QAAoB,MAAM;QAAQ,WAAW;IAAE;IACxE;QAAE,MAAM;QAAQ,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAE;IAC9D;QAAE,MAAM;QAAQ,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAE;IAC7D;QAAE,MAAM;QAAQ,SAAS;QAAY,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAO,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAG;IAC7D;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAG;IACjE;QAAE,MAAM;QAAQ,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAE;IAC9D;QAAE,MAAM;QAAO,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAG;IAC9D;QAAE,MAAM;QAAO,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAG;IAC7D;QAAE,MAAM;QAAQ,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAG;IAC9D;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAG;IAC/D;QAAE,MAAM;QAAQ,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IACjE;QAAE,MAAM;QAAQ,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IACjE;QAAE,MAAM;QAAQ,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAG;IAChE;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC9D;QAAE,MAAM;QAAO,SAAS;QAAiB,MAAM;QAAQ,WAAW;IAAE;IACpE;QAAE,MAAM;QAAO,SAAS;QAAgB,MAAM;QAAQ,WAAW;IAAE;IACnE;QAAE,MAAM;QAAQ,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAE;IAC9D;QAAE,MAAM;QAAQ,SAAS;QAAY,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAQ,SAAS;QAAY,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAU,SAAS;QAAe,MAAM;QAAQ,WAAW;IAAG;IACtE;QAAE,MAAM;QAAO,SAAS;QAAe,MAAM;QAAQ,WAAW;IAAG;IACnE;QAAE,MAAM;QAAU,SAAS;QAAwB,MAAM;QAAQ,WAAW;IAAG;IAC/E;QAAE,MAAM;QAAM,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAG;IAC5D;QAAE,MAAM;QAAO,SAAS;QAAY,MAAM;QAAQ,WAAW;IAAE;IAC/D;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAO,SAAS;QAAU,MAAM;QAAQ,WAAW;IAAE;IAC7D;QAAE,MAAM;QAAO,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAE;IAC5D;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAE;IAChE;QAAE,MAAM;QAAQ,SAAS;QAAS,MAAM;QAAQ,WAAW;IAAE;IAC7D;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAG;IAC/D;QAAE,MAAM;QAAQ,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAE;IAC/D;QAAE,MAAM;QAAO,SAAS;QAAa,MAAM;QAAQ,WAAW;IAAG;IACjE;QAAE,MAAM;QAAO,SAAS;QAAW,MAAM;QAAQ,WAAW;IAAG;CAClE","debugId":null}},
    {"offset": {"line": 3653, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/billing-section.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Download, CreditCard, FileText, CheckCircle2, Clock, XCircle, Calendar, DollarSign } from 'lucide-react'\r\nimport { useState, useEffect } from \"react\"\r\nimport { useInvoices } from \"@/hooks/use-invoices\"\r\nimport { useProfile } from \"@/hooks/use-profile\"\r\nimport { useSubscription } from \"@/hooks/use-subscription\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\"\r\n\r\nimport { countryCodes } from \"@/lib/constants\"\r\n\r\nexport function BillingSection() {\r\n  const [editPaymentOpen, setEditPaymentOpen] = useState(false)\r\n  const [editInfoOpen, setEditInfoOpen] = useState(false)\r\n  const { invoices, loading: loadingInvoices } = useInvoices()\r\n  const { profile, loading: loadingProfile, updateProfile } = useProfile()\r\n  const { subscription, loading: loadingSubscription } = useSubscription()\r\n  const { toast } = useToast()\r\n\r\n  const [clientInfo, setClientInfo] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    countryCode: \"+51\",\r\n    phoneNumber: \"\"\r\n  })\r\n\r\n  const [emailError, setEmailError] = useState(\"\")\r\n\r\n  const parseProfileForEdit = () => {\r\n    if (!profile) return null\r\n\r\n    let countryCode = \"+51\"\r\n    let phoneNumber = \"\"\r\n\r\n    if (profile.whatsapp) {\r\n      const whatsappClean = profile.whatsapp.trim()\r\n      const matchingCountry = countryCodes.find(c => whatsappClean.startsWith(c.code))\r\n\r\n      if (matchingCountry) {\r\n        countryCode = matchingCountry.code\r\n        phoneNumber = whatsappClean.substring(matchingCountry.code.length).replace(/\\D/g, '')\r\n      } else {\r\n        phoneNumber = whatsappClean.replace(/\\D/g, '')\r\n      }\r\n    }\r\n\r\n    return {\r\n      firstName: profile.first_name || \"\",\r\n      lastName: profile.last_name || \"\",\r\n      email: profile.email || \"\",\r\n      countryCode,\r\n      phoneNumber\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (editInfoOpen) {\r\n      const parsed = parseProfileForEdit()\r\n      if (parsed) {\r\n        setClientInfo(parsed)\r\n      }\r\n    }\r\n  }, [editInfoOpen])\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleDateString(\"es-ES\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    })\r\n  }\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusMap: Record<string, { bg: string; text: string; label: string; icon: any }> = {\r\n      paid: {\r\n        bg: \"bg-green-100 dark:bg-green-900/30\",\r\n        text: \"text-green-800 dark:text-green-400\",\r\n        label: \"Pagado\",\r\n        icon: CheckCircle2\r\n      },\r\n      pending: {\r\n        bg: \"bg-yellow-100 dark:bg-yellow-900/30\",\r\n        text: \"text-yellow-800 dark:text-yellow-400\",\r\n        label: \"Pendiente\",\r\n        icon: Clock\r\n      },\r\n      failed: {\r\n        bg: \"bg-red-100 dark:bg-red-900/30\",\r\n        text: \"text-red-800 dark:text-red-400\",\r\n        label: \"Fallido\",\r\n        icon: XCircle\r\n      },\r\n    }\r\n    return statusMap[status] || statusMap.pending\r\n  }\r\n\r\n  const handleConnectMercadoPago = () => {\r\n    toast({\r\n      title: \"MercadoPago\",\r\n      description: \"Funcionalidad de integraci√≥n pr√≥ximamente disponible\",\r\n    })\r\n    setEditPaymentOpen(false)\r\n  }\r\n\r\n  const validateEmail = (email: string): boolean => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n    return emailRegex.test(email)\r\n  }\r\n\r\n  const getMaxDigits = () => {\r\n    const country = countryCodes.find(c => c.code === clientInfo.countryCode)\r\n    return country?.maxDigits || 15\r\n  }\r\n\r\n  const getPhoneValidationMessage = () => {\r\n    const country = countryCodes.find(c => c.code === clientInfo.countryCode)\r\n    if (!country) return \"\"\r\n\r\n    if (clientInfo.phoneNumber && clientInfo.phoneNumber.length !== country.maxDigits) {\r\n      return `Para ${country.country} se requieren exactamente ${country.maxDigits} d√≠gitos`\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  const handleSaveClientInfo = async () => {\r\n    if (!clientInfo.email || !validateEmail(clientInfo.email)) {\r\n      setEmailError(\"Por favor ingresa un correo electr√≥nico v√°lido\")\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Error de validaci√≥n\",\r\n        description: \"El correo electr√≥nico no tiene un formato v√°lido\",\r\n        duration: 3000\r\n      })\r\n      return\r\n    }\r\n\r\n    setEmailError(\"\")\r\n\r\n    const validationMessage = getPhoneValidationMessage()\r\n    if (clientInfo.phoneNumber && validationMessage) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Error de validaci√≥n\",\r\n        description: validationMessage,\r\n        duration: 3000\r\n      })\r\n      return\r\n    }\r\n\r\n    const fullWhatsApp = clientInfo.phoneNumber\r\n      ? `${clientInfo.countryCode}${clientInfo.phoneNumber.replace(/\\s/g, '')}`\r\n      : \"\"\r\n\r\n    const { error } = await updateProfile({\r\n      first_name: clientInfo.firstName,\r\n      last_name: clientInfo.lastName,\r\n      email: clientInfo.email,\r\n      whatsapp: fullWhatsApp\r\n    })\r\n\r\n    if (error) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Error\",\r\n        description: \"No se pudo actualizar la informaci√≥n: \" + error,\r\n        duration: 3000\r\n      })\r\n    } else {\r\n      toast({\r\n        variant: \"success\",\r\n        title: \"‚úì Informaci√≥n actualizada\",\r\n        description: \"Tu informaci√≥n de contacto se ha guardado correctamente\",\r\n        duration: 3000\r\n      })\r\n      setEditInfoOpen(false)\r\n    }\r\n  }\r\n\r\n  const showLoadingSpinner = loadingInvoices && invoices.length === 0\r\n\r\n  if (showLoadingSpinner) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"text-center space-y-3\">\r\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto\" />\r\n          <p className=\"text-muted-foreground\">Cargando informaci√≥n de facturaci√≥n...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\">Facturaci√≥n</h2>\r\n        <p className=\"text-muted-foreground\">Gestiona tu cuenta de facturaci√≥n y pagos</p>\r\n      </div>\r\n\r\n      {/* Informaci√≥n de Pr√≥ximo Pago */}\r\n      {subscription && (\r\n        <Card className=\"p-6 border border-border bg-gradient-to-br from-primary/5 to-primary/10\">\r\n          <div className=\"flex items-center gap-2 mb-4\">\r\n            <Calendar className=\"w-5 h-5 text-primary\" />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Pr√≥ximo Pago</h3>\r\n          </div>\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"flex items-center gap-4 p-4 bg-background/80 rounded-lg border border-border\">\r\n              <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center\">\r\n                <DollarSign className=\"w-6 h-6 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Monto a Pagar</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">${subscription.price.toFixed(2)}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-4 p-4 bg-background/80 rounded-lg border border-border\">\r\n              <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center\">\r\n                <Calendar className=\"w-6 h-6 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Fecha de Renovaci√≥n</p>\r\n                <p className=\"text-lg font-semibold text-foreground\">{formatDate(subscription.next_billing_date)}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-4 p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n            <p className=\"text-sm text-blue-800 dark:text-blue-400 flex items-start gap-2\">\r\n              <CheckCircle2 className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\r\n              <span>Tu suscripci√≥n se renovar√° autom√°ticamente. El cargo se realizar√° el d√≠a de la renovaci√≥n.</span>\r\n            </p>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      <Card className=\"p-6 border border-border bg-card\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <CreditCard className=\"w-5 h-5 text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">M√©todo de Pago</h3>\r\n        </div>\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 bg-white dark:bg-gray-800 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0\">\r\n                <svg viewBox=\"0 0 24 24\" className=\"w-8 h-8\" fill=\"none\">\r\n                  <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" fill=\"#009EE3\" />\r\n                  <path d=\"M2 17L12 22L22 17M2 12L12 17L22 12\" stroke=\"#009EE3\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n              </div>\r\n              <div>\r\n                <p className=\"font-semibold text-foreground\">MercadoPago</p>\r\n                <p className=\"text-sm text-muted-foreground\">Gesti√≥n de pagos conectada</p>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full sm:w-auto border-primary text-primary hover:bg-primary hover:text-primary-foreground\"\r\n              onClick={() => setEditPaymentOpen(true)}\r\n            >\r\n              Configurar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      <Card className=\"p-6 border border-border bg-card\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <FileText className=\"w-5 h-5 text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Historial de Facturas</h3>\r\n        </div>\r\n        {invoices.length === 0 ? (\r\n          <div className=\"text-center py-12 space-y-3\">\r\n            <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto\">\r\n              <FileText className=\"w-8 h-8 text-muted-foreground\" />\r\n            </div>\r\n            <p className=\"text-muted-foreground font-medium\">No hay facturas disponibles</p>\r\n            <p className=\"text-sm text-muted-foreground\">Tus facturas aparecer√°n aqu√≠ cuando realices pagos</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"border-b border-border\">\r\n                  <th className=\"text-left py-3 text-muted-foreground font-medium\">Factura</th>\r\n                  <th className=\"text-left py-3 text-muted-foreground font-medium\">Fecha</th>\r\n                  <th className=\"text-left py-3 text-muted-foreground font-medium\">Monto</th>\r\n                  <th className=\"text-left py-3 text-muted-foreground font-medium\">Estado</th>\r\n                  <th className=\"text-left py-3 text-muted-foreground font-medium\"></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {invoices.map((invoice) => {\r\n                  const statusBadge = getStatusBadge(invoice.status)\r\n                  const StatusIcon = statusBadge.icon\r\n                  return (\r\n                    <tr key={invoice.id} className=\"border-b border-border hover:bg-muted/50 transition-colors\">\r\n                      <td className=\"py-4 font-medium text-foreground\">{invoice.id}</td>\r\n                      <td className=\"py-4 text-muted-foreground\">{formatDate(invoice.invoice_date)}</td>\r\n                      <td className=\"py-4 font-medium text-foreground\">${invoice.amount.toFixed(2)}</td>\r\n                      <td className=\"py-4\">\r\n                        <span\r\n                          className={`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium ${statusBadge.bg} ${statusBadge.text}`}\r\n                        >\r\n                          <StatusIcon className=\"w-3.5 h-3.5\" />\r\n                          {statusBadge.label}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"py-4\">\r\n                        <button className=\"text-primary hover:text-primary/80 transition-colors\">\r\n                          <Download className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      <Dialog open={editPaymentOpen} onOpenChange={setEditPaymentOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Configurar M√©todo de Pago</DialogTitle>\r\n            <DialogDescription>\r\n              Conecta tu cuenta de MercadoPago para gestionar tus pagos de forma segura\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-6 py-4\">\r\n            <div className=\"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n              <div className=\"w-16 h-16 bg-white dark:bg-gray-800 rounded-lg flex items-center justify-center shadow-sm\">\r\n                <svg viewBox=\"0 0 24 24\" className=\"w-12 h-12\" fill=\"none\">\r\n                  <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" fill=\"#009EE3\" />\r\n                  <path d=\"M2 17L12 22L22 17M2 12L12 17L22 12\" stroke=\"#009EE3\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h4 className=\"font-semibold text-foreground mb-1\">MercadoPago</h4>\r\n                <p className=\"text-sm text-muted-foreground\">Procesamiento seguro de pagos con MercadoPago</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-3 text-sm text-muted-foreground\">\r\n              <p className=\"flex items-start gap-2\">\r\n                <CheckCircle2 className=\"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                <span>Pagos seguros y encriptados</span>\r\n              </p>\r\n              <p className=\"flex items-start gap-2\">\r\n                <CheckCircle2 className=\"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                <span>M√∫ltiples m√©todos de pago disponibles</span>\r\n              </p>\r\n              <p className=\"flex items-start gap-2\">\r\n                <CheckCircle2 className=\"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                <span>Gesti√≥n autom√°tica de suscripciones</span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setEditPaymentOpen(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button onClick={handleConnectMercadoPago} className=\"bg-[#009EE3] hover:bg-[#0082BD]\">\r\n              Conectar con MercadoPago\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Dialog open={editInfoOpen} onOpenChange={setEditInfoOpen}>\r\n        <DialogContent className=\"max-w-lg\">\r\n          <DialogHeader>\r\n            <DialogTitle>Editar Informaci√≥n del Cliente</DialogTitle>\r\n            <DialogDescription>\r\n              Actualiza tu informaci√≥n de contacto\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"firstName\" className=\"flex items-center gap-2\">\r\n                Nombre\r\n              </Label>\r\n              <Input\r\n                id=\"firstName\"\r\n                value={clientInfo.firstName}\r\n                onChange={(e) => setClientInfo({ ...clientInfo, firstName: e.target.value })}\r\n                placeholder=\"Juan\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"lastName\" className=\"flex items-center gap-2\">\r\n                Apellido\r\n              </Label>\r\n              <Input\r\n                id=\"lastName\"\r\n                value={clientInfo.lastName}\r\n                onChange={(e) => setClientInfo({ ...clientInfo, lastName: e.target.value })}\r\n                placeholder=\"P√©rez\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\" className=\"flex items-center gap-2\">\r\n                Correo electr√≥nico\r\n              </Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={clientInfo.email}\r\n                onChange={(e) => {\r\n                  const newEmail = e.target.value\r\n                  setClientInfo({ ...clientInfo, email: newEmail })\r\n                  if (newEmail && !validateEmail(newEmail)) {\r\n                    setEmailError(\"Formato de correo inv√°lido\")\r\n                  } else {\r\n                    setEmailError(\"\")\r\n                  }\r\n                }}\r\n                placeholder=\"cliente@ejemplo.com\"\r\n                className={emailError ? \"border-red-500\" : \"\"}\r\n              />\r\n              {emailError && (\r\n                <p className=\"text-xs text-red-500 mt-1\">\r\n                  {emailError}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"whatsapp\" className=\"flex items-center gap-2\">\r\n                WhatsApp\r\n              </Label>\r\n              <div className=\"flex gap-2\">\r\n                <Select\r\n                  value={clientInfo.countryCode}\r\n                  onValueChange={(value) => {\r\n                    setClientInfo({ ...clientInfo, countryCode: value, phoneNumber: \"\" })\r\n                  }}\r\n                >\r\n                  <SelectTrigger className=\"w-[140px]\">\r\n                    <SelectValue>\r\n                      {(() => {\r\n                        const country = countryCodes.find(c => c.code === clientInfo.countryCode)\r\n                        return country ? (\r\n                          <span className=\"flex items-center gap-1.5\">\r\n                            <span className=\"text-base\">{country.flag}</span>\r\n                            <span className=\"text-sm\">{country.code}</span>\r\n                          </span>\r\n                        ) : \"Seleccionar\"\r\n                      })()}\r\n                    </SelectValue>\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"max-h-[300px]\">\r\n                    {countryCodes.map((country) => (\r\n                      <SelectItem key={country.code} value={country.code}>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-base\">{country.flag}</span>\r\n                          <span className=\"text-sm\">{country.code}</span>\r\n                          <span className=\"text-xs text-muted-foreground\">({country.country})</span>\r\n                        </div>\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n                <div className=\"flex-1\">\r\n                  <Input\r\n                    id=\"whatsapp\"\r\n                    type=\"tel\"\r\n                    value={clientInfo.phoneNumber}\r\n                    onChange={(e) => {\r\n                      const value = e.target.value.replace(/[^\\d]/g, '')\r\n                      const maxDigits = getMaxDigits()\r\n                      if (value.length <= maxDigits) {\r\n                        setClientInfo({ ...clientInfo, phoneNumber: value })\r\n                      }\r\n                    }}\r\n                    placeholder={`${\"9\".repeat(getMaxDigits())}`}\r\n                    maxLength={getMaxDigits()}\r\n                    className={getPhoneValidationMessage() ? \"border-red-500\" : \"\"}\r\n                  />\r\n                  {getPhoneValidationMessage() && (\r\n                    <p className=\"text-xs text-red-500 mt-1\">\r\n                      {getPhoneValidationMessage()}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Formato: {clientInfo.countryCode}{clientInfo.phoneNumber || `${\"9\".repeat(getMaxDigits())}`}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setEditInfoOpen(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button onClick={handleSaveClientInfo}>\r\n              Guardar cambios\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5035, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-credentials.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { useAuth } from \"./use-auth\"\r\n\r\nexport interface Credentials {\r\n  id: string\r\n  user_id: string\r\n  username: string\r\n  password: string\r\n  mac_address: string\r\n  reseller_code: string\r\n}\r\n\r\nexport function useCredentials() {\r\n  const [credentials, setCredentials] = useState<Credentials | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const { user } = useAuth()\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setCredentials(null)\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    const fetchCredentials = async () => {\r\n      try {\r\n        const supabase = createClient()\r\n        const { data, error } = await supabase.from(\"credentials\").select(\"*\").eq(\"user_id\", user.id).single()\r\n\r\n        if (error && error.code !== \"PGRST116\") throw error\r\n        setCredentials(data || null)\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : \"Error fetching credentials\")\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchCredentials()\r\n  }, [user]) // Only depend on user, not supabase instance\r\n\r\n  return { credentials, loading, error }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAeO,SAAS;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAqB;IACnE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAClD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IAExB,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,eAAe;YACf,WAAW;YACX;QACF;QAEA,MAAM,mBAAmB;YACvB,IAAI;gBACF,MAAM,WAAW,IAAA,yIAAY;gBAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW,KAAK,EAAE,EAAE,MAAM;gBAEpG,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY,MAAM;gBAC9C,eAAe,QAAQ;YACzB,EAAE,OAAO,KAAK;gBACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAK,GAAE,6CAA6C;IAExD,OAAO;QAAE;QAAa;QAAS;IAAM;AACvC","debugId":null}},
    {"offset": {"line": 5083, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/credentials-section.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Copy, Eye, EyeOff, RefreshCw } from \"lucide-react\"\r\nimport { useCredentials } from \"@/hooks/use-credentials\"\r\n\r\nexport function CredentialsSection() {\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [copied, setCopied] = useState<string | null>(null)\r\n  const { credentials, loading } = useCredentials()\r\n\r\n  const handleCopy = (text: string, key: string) => {\r\n    navigator.clipboard.writeText(text)\r\n    setCopied(key)\r\n    setTimeout(() => setCopied(null), 2000)\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center py-8\">Cargando credenciales...</div>\r\n  }\r\n\r\n  if (!credentials) {\r\n    return <div className=\"text-center py-8\">No hay credenciales disponibles</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\">Credenciales de Acceso</h2>\r\n        <p className=\"text-muted-foreground\">Usa estas credenciales para acceder a MaxPlayer IPTV</p>\r\n      </div>\r\n\r\n      <Card className=\"p-4 border-orange-300 bg-orange-50 dark:bg-orange-900/20\">\r\n        <p className=\"text-sm text-orange-900 dark:text-orange-300\">\r\n          Mant√©n tus credenciales confidenciales. No las compartas con terceros.\r\n        </p>\r\n      </Card>\r\n\r\n      <div className=\"space-y-4\">\r\n        <Card className=\"p-6 border border-border bg-card\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Usuario</p>\r\n            <button\r\n              onClick={() => handleCopy(credentials.username, \"username\")}\r\n              className=\"text-accent hover:text-accent/80 transition-colors\"\r\n            >\r\n              <Copy className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n          <p className=\"font-mono text-lg font-semibold text-foreground break-all\">{credentials.username}</p>\r\n          {copied === \"username\" && <p className=\"text-xs text-green-600 mt-2\">Copiado</p>}\r\n        </Card>\r\n\r\n        <Card className=\"p-6 border border-border bg-card\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Contrase√±a</p>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"text-muted-foreground hover:text-foreground transition-colors\"\r\n              >\r\n                {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n              </button>\r\n              <button\r\n                onClick={() => handleCopy(credentials.password, \"password\")}\r\n                className=\"text-accent hover:text-accent/80 transition-colors\"\r\n              >\r\n                <Copy className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <p className=\"font-mono text-lg font-semibold text-foreground break-all\">\r\n            {showPassword ? credentials.password : \"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"}\r\n          </p>\r\n          {copied === \"password\" && <p className=\"text-xs text-green-600 mt-2\">Copiado</p>}\r\n        </Card>\r\n\r\n        <Card className=\"p-6 border border-border bg-card\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Direcci√≥n MAC</p>\r\n            <button\r\n              onClick={() => handleCopy(credentials.mac_address, \"mac\")}\r\n              className=\"text-accent hover:text-accent/80 transition-colors\"\r\n            >\r\n              <Copy className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n          <p className=\"font-mono text-lg font-semibold text-foreground break-all\">{credentials.mac_address}</p>\r\n          {copied === \"mac\" && <p className=\"text-xs text-green-600 mt-2\">Copiado</p>}\r\n        </Card>\r\n\r\n        <Card className=\"p-6 border border-border bg-card\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <p className=\"text-sm text-muted-foreground\">C√≥digo Revendedor</p>\r\n            <button\r\n              onClick={() => handleCopy(credentials.reseller_code, \"reseller\")}\r\n              className=\"text-accent hover:text-accent/80 transition-colors\"\r\n            >\r\n              <Copy className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n          <p className=\"font-mono text-lg font-semibold text-foreground break-all\">{credentials.reseller_code}</p>\r\n          {copied === \"reseller\" && <p className=\"text-xs text-green-600 mt-2\">Copiado</p>}\r\n        </Card>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Opciones de Seguridad</h3>\r\n        <Button variant=\"outline\" className=\"w-full flex items-center gap-2 bg-transparent\">\r\n          <RefreshCw className=\"w-4 h-4\" />\r\n          Cambiar contrase√±a\r\n        </Button>\r\n        <Button variant=\"outline\" className=\"w-full bg-transparent\">\r\n          Historial de conexiones\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5496, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/hooks/use-settings.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useAuth } from './use-auth'\r\n\r\nexport interface UserSettings {\r\n  email_notifications: boolean\r\n  whatsapp_notifications: boolean\r\n  renewal_reminder: boolean\r\n  plan_changes_notifications: boolean\r\n}\r\n\r\nconst defaultSettings: UserSettings = {\r\n  email_notifications: true,\r\n  whatsapp_notifications: true,\r\n  renewal_reminder: true,\r\n  plan_changes_notifications: true\r\n}\r\n\r\nexport function useSettings() {\r\n  const supabase = createClient()\r\n  const { user } = useAuth()\r\n  const [settings, setSettings] = useState<UserSettings>(defaultSettings)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchSettings()\r\n    }\r\n  }, [user])\r\n\r\n  const fetchSettings = async () => {\r\n    try {\r\n      setLoading(true)\r\n      console.log(\"[v0] Cargando settings para usuario:\", user?.id)\r\n      \r\n      const { data, error } = await supabase\r\n        .from('user_settings')\r\n        .select('*')\r\n        .eq('user_id', user?.id)\r\n        .single()\r\n\r\n      if (error) {\r\n        console.log('[v0] Settings table not found, using defaults:', error.message)\r\n        setSettings(defaultSettings)\r\n        setError(null)\r\n        return\r\n      }\r\n      \r\n      console.log(\"[v0] Settings cargados:\", data)\r\n      setSettings(data)\r\n    } catch (err: any) {\r\n      console.log('[v0] Error fetching settings, using defaults:', err)\r\n      setSettings(defaultSettings)\r\n      setError(null)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const updateSettings = async (updates: Partial<UserSettings>) => {\r\n    try {\r\n      const { data: existingSettings } = await supabase\r\n        .from('user_settings')\r\n        .select('id')\r\n        .eq('user_id', user?.id)\r\n        .single()\r\n\r\n      if (!existingSettings) {\r\n        const { error: insertError } = await supabase\r\n          .from('user_settings')\r\n          .insert({\r\n            user_id: user?.id,\r\n            ...defaultSettings,\r\n            ...updates\r\n          })\r\n\r\n        if (insertError) {\r\n          console.log('[v0] Cannot create settings in DB, updating locally only:', insertError)\r\n          setSettings(prev => ({ ...prev, ...updates }))\r\n          return { success: true, local: true }\r\n        }\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('user_settings')\r\n          .update({ ...updates, updated_at: new Date().toISOString() })\r\n          .eq('user_id', user?.id)\r\n\r\n        if (error) {\r\n          console.log('[v0] Cannot save to DB, updating locally only:', error)\r\n          setSettings(prev => ({ ...prev, ...updates }))\r\n          return { success: true, local: true }\r\n        }\r\n      }\r\n      \r\n      setSettings(prev => ({ ...prev, ...updates }))\r\n      \r\n      return { success: true }\r\n    } catch (err: any) {\r\n      console.error('[v0] Error updating settings:', err)\r\n      setSettings(prev => ({ ...prev, ...updates }))\r\n      return { success: true, local: true }\r\n    }\r\n  }\r\n\r\n  return {\r\n    settings,\r\n    loading,\r\n    error,\r\n    updateSettings,\r\n    refetch: fetchSettings\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AASA,MAAM,kBAAgC;IACpC,qBAAqB;IACrB,wBAAwB;IACxB,kBAAkB;IAClB,4BAA4B;AAC9B;AAEO,SAAS;IACd,MAAM,WAAW,IAAA,yIAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IACxB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAe;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,IAAA,iVAAS,EAAC;QACR,IAAI,MAAM;YACR;QACF;IACF,GAAG;QAAC;KAAK;IAET,MAAM,gBAAgB;QACpB,IAAI;YACF,WAAW;YACX,QAAQ,GAAG,CAAC,wCAAwC,MAAM;YAE1D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,MAAM,IACpB,MAAM;YAET,IAAI,OAAO;gBACT,QAAQ,GAAG,CAAC,kDAAkD,MAAM,OAAO;gBAC3E,YAAY;gBACZ,SAAS;gBACT;YACF;YAEA,QAAQ,GAAG,CAAC,2BAA2B;YACvC,YAAY;QACd,EAAE,OAAO,KAAU;YACjB,QAAQ,GAAG,CAAC,iDAAiD;YAC7D,YAAY;YACZ,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB,OAAO;QAC5B,IAAI;YACF,MAAM,EAAE,MAAM,gBAAgB,EAAE,GAAG,MAAM,SACtC,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,MAAM,IACpB,MAAM;YAET,IAAI,CAAC,kBAAkB;gBACrB,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,iBACL,MAAM,CAAC;oBACN,SAAS,MAAM;oBACf,GAAG,eAAe;oBAClB,GAAG,OAAO;gBACZ;gBAEF,IAAI,aAAa;oBACf,QAAQ,GAAG,CAAC,6DAA6D;oBACzE,YAAY,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,GAAG,OAAO;wBAAC,CAAC;oBAC5C,OAAO;wBAAE,SAAS;wBAAM,OAAO;oBAAK;gBACtC;YACF,OAAO;gBACL,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,iBACL,MAAM,CAAC;oBAAE,GAAG,OAAO;oBAAE,YAAY,IAAI,OAAO,WAAW;gBAAG,GAC1D,EAAE,CAAC,WAAW,MAAM;gBAEvB,IAAI,OAAO;oBACT,QAAQ,GAAG,CAAC,kDAAkD;oBAC9D,YAAY,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,GAAG,OAAO;wBAAC,CAAC;oBAC5C,OAAO;wBAAE,SAAS;wBAAM,OAAO;oBAAK;gBACtC;YACF;YAEA,YAAY,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,GAAG,OAAO;gBAAC,CAAC;YAE5C,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,YAAY,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,GAAG,OAAO;gBAAC,CAAC;YAC5C,OAAO;gBAAE,SAAS;gBAAM,OAAO;YAAK;QACtC;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA,SAAS;IACX;AACF","debugId":null}},
    {"offset": {"line": 5614, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/settings/profile-settings.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { User, Mail, Phone } from 'lucide-react'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { countryCodes } from \"@/lib/constants\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\n\r\ninterface ProfileSettingsProps {\r\n    profile: any\r\n    updateProfile: (data: any) => Promise<{ error: any }>\r\n}\r\n\r\nexport function ProfileSettings({ profile, updateProfile }: ProfileSettingsProps) {\r\n    const { toast } = useToast()\r\n    const [editInfoOpen, setEditInfoOpen] = useState(false)\r\n    const [clientInfo, setClientInfo] = useState({\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        countryCode: \"+51\",\r\n        phoneNumber: \"\"\r\n    })\r\n    const [emailError, setEmailError] = useState(\"\")\r\n\r\n    const parseProfileForEdit = () => {\r\n        if (!profile) return null\r\n\r\n        let countryCode = \"+51\"\r\n        let phoneNumber = \"\"\r\n\r\n        if (profile.whatsapp) {\r\n            const whatsappClean = profile.whatsapp.trim()\r\n            const matchingCountry = countryCodes.find(c => whatsappClean.startsWith(c.code))\r\n\r\n            if (matchingCountry) {\r\n                countryCode = matchingCountry.code\r\n                phoneNumber = whatsappClean.substring(matchingCountry.code.length).replace(/\\D/g, '')\r\n            } else {\r\n                phoneNumber = whatsappClean.replace(/\\D/g, '')\r\n            }\r\n        }\r\n\r\n        return {\r\n            firstName: profile.first_name || \"\",\r\n            lastName: profile.last_name || \"\",\r\n            email: profile.email || \"\",\r\n            countryCode,\r\n            phoneNumber\r\n        }\r\n    }\r\n\r\n    const validateEmail = (email: string): boolean => {\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n        return emailRegex.test(email)\r\n    }\r\n\r\n    const getMaxDigits = () => {\r\n        const country = countryCodes.find(c => c.code === clientInfo.countryCode)\r\n        return country?.maxDigits || 15\r\n    }\r\n\r\n    const getPhoneValidationMessage = () => {\r\n        const country = countryCodes.find(c => c.code === clientInfo.countryCode)\r\n        if (!country) return \"\"\r\n\r\n        if (clientInfo.phoneNumber && clientInfo.phoneNumber.length !== country.maxDigits) {\r\n            return `Para ${country.country} se requieren exactamente ${country.maxDigits} d√≠gitos`\r\n        }\r\n        return \"\"\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (editInfoOpen) {\r\n            const parsed = parseProfileForEdit()\r\n            if (parsed) {\r\n                setClientInfo(parsed)\r\n            }\r\n        }\r\n    }, [editInfoOpen, profile])\r\n\r\n    const handleSaveClientInfo = async () => {\r\n        if (!clientInfo.email || !validateEmail(clientInfo.email)) {\r\n            setEmailError(\"Por favor ingresa un correo electr√≥nico v√°lido\")\r\n            toast({\r\n                variant: \"destructive\",\r\n                title: \"Error de validaci√≥n\",\r\n                description: \"El correo electr√≥nico no tiene un formato v√°lido\",\r\n                duration: 3000\r\n            })\r\n            return\r\n        }\r\n\r\n        setEmailError(\"\")\r\n\r\n        const validationMessage = getPhoneValidationMessage()\r\n        if (clientInfo.phoneNumber && validationMessage) {\r\n            toast({\r\n                variant: \"destructive\",\r\n                title: \"Error de validaci√≥n\",\r\n                description: validationMessage,\r\n                duration: 3000\r\n            })\r\n            return\r\n        }\r\n\r\n        const fullWhatsApp = clientInfo.phoneNumber\r\n            ? `${clientInfo.countryCode}${clientInfo.phoneNumber.replace(/\\s/g, '')}`\r\n            : \"\"\r\n\r\n        const { error } = await updateProfile({\r\n            first_name: clientInfo.firstName,\r\n            last_name: clientInfo.lastName,\r\n            email: clientInfo.email,\r\n            whatsapp: fullWhatsApp\r\n        })\r\n\r\n        if (error) {\r\n            toast({\r\n                variant: \"destructive\",\r\n                title: \"Error\",\r\n                description: \"No se pudo actualizar la informaci√≥n: \" + error,\r\n                duration: 3000\r\n            })\r\n        } else {\r\n            toast({\r\n                variant: \"success\",\r\n                title: \"‚úì Informaci√≥n actualizada\",\r\n                description: \"Tu informaci√≥n de contacto se ha guardado correctamente\",\r\n                duration: 3000\r\n            })\r\n            setEditInfoOpen(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Card>\r\n                <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <User className=\"w-5 h-5 text-primary\" />\r\n                            <CardTitle>Cuenta y Seguridad</CardTitle>\r\n                        </div>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            className=\"border-primary text-primary hover:bg-primary hover:text-primary-foreground\"\r\n                            onClick={() => setEditInfoOpen(true)}\r\n                        >\r\n                            Editar informaci√≥n\r\n                        </Button>\r\n                    </div>\r\n                    <CardDescription>Tu informaci√≥n personal y opciones de seguridad</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"text-sm font-semibold text-foreground flex items-center gap-2\">\r\n                            <User className=\"w-4 h-4 text-primary\" />\r\n                            Informaci√≥n Personal\r\n                        </h3>\r\n                        <div className=\"grid gap-4\">\r\n                            <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-primary/5 to-transparent rounded-lg border border-primary/10\">\r\n                                <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                    <User className=\"w-5 h-5 text-primary\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <p className=\"text-xs text-muted-foreground mb-1\">Nombre completo</p>\r\n                                    <p className=\"text-base font-medium text-foreground\">\r\n                                        {profile?.first_name || profile?.last_name\r\n                                            ? `${profile.first_name || ''} ${profile.last_name || ''}`.trim()\r\n                                            : \"No especificado\"}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-primary/5 to-transparent rounded-lg border border-primary/10\">\r\n                                <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                    <Mail className=\"w-5 h-5 text-primary\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <p className=\"text-xs text-muted-foreground mb-1\">Correo electr√≥nico</p>\r\n                                    <p className=\"text-base font-medium text-foreground truncate\">\r\n                                        {profile?.email || \"No especificado\"}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-primary/5 to-transparent rounded-lg border border-primary/10\">\r\n                                <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                    <Phone className=\"w-5 h-5 text-primary\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <p className=\"text-xs text-muted-foreground mb-1\">WhatsApp</p>\r\n                                    <p className=\"text-base font-medium text-foreground\">\r\n                                        {profile?.whatsapp || \"No especificado\"}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Dialog open={editInfoOpen} onOpenChange={setEditInfoOpen}>\r\n                <DialogContent className=\"sm:max-w-[500px]\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Editar Informaci√≥n Personal</DialogTitle>\r\n                        <DialogDescription>\r\n                            Actualiza tus datos de contacto aqu√≠.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"grid gap-4 py-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"firstName\">Nombre</Label>\r\n                                <Input\r\n                                    id=\"firstName\"\r\n                                    value={clientInfo.firstName}\r\n                                    onChange={(e) => setClientInfo({ ...clientInfo, firstName: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"lastName\">Apellido</Label>\r\n                                <Input\r\n                                    id=\"lastName\"\r\n                                    value={clientInfo.lastName}\r\n                                    onChange={(e) => setClientInfo({ ...clientInfo, lastName: e.target.value })}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"email\">Correo Electr√≥nico</Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                value={clientInfo.email}\r\n                                onChange={(e) => {\r\n                                    setClientInfo({ ...clientInfo, email: e.target.value })\r\n                                    setEmailError(\"\")\r\n                                }}\r\n                                className={emailError ? \"border-red-500\" : \"\"}\r\n                            />\r\n                            {emailError && <p className=\"text-xs text-red-500\">{emailError}</p>}\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"whatsapp\">WhatsApp</Label>\r\n                            <div className=\"flex gap-2\">\r\n                                <Select\r\n                                    value={clientInfo.countryCode}\r\n                                    onValueChange={(value) => setClientInfo({ ...clientInfo, countryCode: value })}\r\n                                >\r\n                                    <SelectTrigger className=\"w-[140px]\">\r\n                                        <SelectValue placeholder=\"Pa√≠s\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent className=\"max-h-[300px]\">\r\n                                        {countryCodes.map((country) => (\r\n                                            <SelectItem key={country.code} value={country.code}>\r\n                                                <span className=\"mr-2\">{country.flag}</span>\r\n                                                {country.code}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                <Input\r\n                                    id=\"whatsapp\"\r\n                                    type=\"tel\"\r\n                                    placeholder=\"N√∫mero\"\r\n                                    value={clientInfo.phoneNumber}\r\n                                    onChange={(e) => {\r\n                                        const val = e.target.value.replace(/\\D/g, '')\r\n                                        const max = getMaxDigits()\r\n                                        if (val.length <= max) {\r\n                                            setClientInfo({ ...clientInfo, phoneNumber: val })\r\n                                        }\r\n                                    }}\r\n                                    className=\"flex-1\"\r\n                                />\r\n                            </div>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                                {clientInfo.countryCode && countryCodes.find(c => c.code === clientInfo.countryCode)?.country}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setEditInfoOpen(false)}>Cancelar</Button>\r\n                        <Button onClick={handleSaveClientInfo}>Guardar Cambios</Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAQA;AAOA;AACA;AAxBA;;;;;;;;;;;;AA+BO,SAAS,gBAAgB,EAAE,OAAO,EAAE,aAAa,EAAwB;IAC5E,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,iIAAQ;IAC1B,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gVAAQ,EAAC;QACzC,WAAW;QACX,UAAU;QACV,OAAO;QACP,aAAa;QACb,aAAa;IACjB;IACA,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gVAAQ,EAAC;IAE7C,MAAM,sBAAsB;QACxB,IAAI,CAAC,SAAS,OAAO;QAErB,IAAI,cAAc;QAClB,IAAI,cAAc;QAElB,IAAI,QAAQ,QAAQ,EAAE;YAClB,MAAM,gBAAgB,QAAQ,QAAQ,CAAC,IAAI;YAC3C,MAAM,kBAAkB,gIAAY,CAAC,IAAI,CAAC,CAAA,IAAK,cAAc,UAAU,CAAC,EAAE,IAAI;YAE9E,IAAI,iBAAiB;gBACjB,cAAc,gBAAgB,IAAI;gBAClC,cAAc,cAAc,SAAS,CAAC,gBAAgB,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,OAAO;YACtF,OAAO;gBACH,cAAc,cAAc,OAAO,CAAC,OAAO;YAC/C;QACJ;QAEA,OAAO;YACH,WAAW,QAAQ,UAAU,IAAI;YACjC,UAAU,QAAQ,SAAS,IAAI;YAC/B,OAAO,QAAQ,KAAK,IAAI;YACxB;YACA;QACJ;IACJ;IAEA,MAAM,gBAAgB,CAAC;QACnB,MAAM,aAAa;QACnB,OAAO,WAAW,IAAI,CAAC;IAC3B;IAEA,MAAM,eAAe;QACjB,MAAM,UAAU,gIAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,WAAW;QACxE,OAAO,SAAS,aAAa;IACjC;IAEA,MAAM,4BAA4B;QAC9B,MAAM,UAAU,gIAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,WAAW;QACxE,IAAI,CAAC,SAAS,OAAO;QAErB,IAAI,WAAW,WAAW,IAAI,WAAW,WAAW,CAAC,MAAM,KAAK,QAAQ,SAAS,EAAE;YAC/E,OAAO,CAAC,KAAK,EAAE,QAAQ,OAAO,CAAC,0BAA0B,EAAE,QAAQ,SAAS,CAAC,QAAQ,CAAC;QAC1F;QACA,OAAO;IACX;IAEA,IAAA,iVAAS,EAAC;QACN,IAAI,cAAc;YACd,MAAM,SAAS;YACf,IAAI,QAAQ;gBACR,cAAc;YAClB;QACJ;IACJ,GAAG;QAAC;QAAc;KAAQ;IAE1B,MAAM,uBAAuB;QACzB,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,cAAc,WAAW,KAAK,GAAG;YACvD,cAAc;YACd,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;gBACb,UAAU;YACd;YACA;QACJ;QAEA,cAAc;QAEd,MAAM,oBAAoB;QAC1B,IAAI,WAAW,WAAW,IAAI,mBAAmB;YAC7C,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;gBACb,UAAU;YACd;YACA;QACJ;QAEA,MAAM,eAAe,WAAW,WAAW,GACrC,GAAG,WAAW,WAAW,GAAG,WAAW,WAAW,CAAC,OAAO,CAAC,OAAO,KAAK,GACvE;QAEN,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc;YAClC,YAAY,WAAW,SAAS;YAChC,WAAW,WAAW,QAAQ;YAC9B,OAAO,WAAW,KAAK;YACvB,UAAU;QACd;QAEA,IAAI,OAAO;YACP,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa,2CAA2C;gBACxD,UAAU;YACd;QACJ,OAAO;YACH,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;gBACb,UAAU;YACd;YACA,gBAAgB;QACpB;IACJ;IAEA,qBACI;;0BACI,6WAAC,iIAAI;;kCACD,6WAAC,uIAAU;;0CACP,6WAAC;gCAAI,WAAU;;kDACX,6WAAC;wCAAI,WAAU;;0DACX,6WAAC,8RAAI;gDAAC,WAAU;;;;;;0DAChB,6WAAC,sIAAS;0DAAC;;;;;;;;;;;;kDAEf,6WAAC,qIAAM;wCACH,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS,IAAM,gBAAgB;kDAClC;;;;;;;;;;;;0CAIL,6WAAC,4IAAe;0CAAC;;;;;;;;;;;;kCAErB,6WAAC,wIAAW;wBAAC,WAAU;kCACnB,cAAA,6WAAC;4BAAI,WAAU;;8CACX,6WAAC;oCAAG,WAAU;;sDACV,6WAAC,8RAAI;4CAAC,WAAU;;;;;;wCAAyB;;;;;;;8CAG7C,6WAAC;oCAAI,WAAU;;sDACX,6WAAC;4CAAI,WAAU;;8DACX,6WAAC;oDAAI,WAAU;8DACX,cAAA,6WAAC,8RAAI;wDAAC,WAAU;;;;;;;;;;;8DAEpB,6WAAC;oDAAI,WAAU;;sEACX,6WAAC;4DAAE,WAAU;sEAAqC;;;;;;sEAClD,6WAAC;4DAAE,WAAU;sEACR,SAAS,cAAc,SAAS,YAC3B,GAAG,QAAQ,UAAU,IAAI,GAAG,CAAC,EAAE,QAAQ,SAAS,IAAI,IAAI,CAAC,IAAI,KAC7D;;;;;;;;;;;;;;;;;;sDAKlB,6WAAC;4CAAI,WAAU;;8DACX,6WAAC;oDAAI,WAAU;8DACX,cAAA,6WAAC,8RAAI;wDAAC,WAAU;;;;;;;;;;;8DAEpB,6WAAC;oDAAI,WAAU;;sEACX,6WAAC;4DAAE,WAAU;sEAAqC;;;;;;sEAClD,6WAAC;4DAAE,WAAU;sEACR,SAAS,SAAS;;;;;;;;;;;;;;;;;;sDAK/B,6WAAC;4CAAI,WAAU;;8DACX,6WAAC;oDAAI,WAAU;8DACX,cAAA,6WAAC,iSAAK;wDAAC,WAAU;;;;;;;;;;;8DAErB,6WAAC;oDAAI,WAAU;;sEACX,6WAAC;4DAAE,WAAU;sEAAqC;;;;;;sEAClD,6WAAC;4DAAE,WAAU;sEACR,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASlD,6WAAC,qIAAM;gBAAC,MAAM;gBAAc,cAAc;0BACtC,cAAA,6WAAC,4IAAa;oBAAC,WAAU;;sCACrB,6WAAC,2IAAY;;8CACT,6WAAC,0IAAW;8CAAC;;;;;;8CACb,6WAAC,gJAAiB;8CAAC;;;;;;;;;;;;sCAIvB,6WAAC;4BAAI,WAAU;;8CACX,6WAAC;oCAAI,WAAU;;sDACX,6WAAC;4CAAI,WAAU;;8DACX,6WAAC,mIAAK;oDAAC,SAAQ;8DAAY;;;;;;8DAC3B,6WAAC,mIAAK;oDACF,IAAG;oDACH,OAAO,WAAW,SAAS;oDAC3B,UAAU,CAAC,IAAM,cAAc;4DAAE,GAAG,UAAU;4DAAE,WAAW,EAAE,MAAM,CAAC,KAAK;wDAAC;;;;;;;;;;;;sDAGlF,6WAAC;4CAAI,WAAU;;8DACX,6WAAC,mIAAK;oDAAC,SAAQ;8DAAW;;;;;;8DAC1B,6WAAC,mIAAK;oDACF,IAAG;oDACH,OAAO,WAAW,QAAQ;oDAC1B,UAAU,CAAC,IAAM,cAAc;4DAAE,GAAG,UAAU;4DAAE,UAAU,EAAE,MAAM,CAAC,KAAK;wDAAC;;;;;;;;;;;;;;;;;;8CAIrF,6WAAC;oCAAI,WAAU;;sDACX,6WAAC,mIAAK;4CAAC,SAAQ;sDAAQ;;;;;;sDACvB,6WAAC,mIAAK;4CACF,IAAG;4CACH,MAAK;4CACL,OAAO,WAAW,KAAK;4CACvB,UAAU,CAAC;gDACP,cAAc;oDAAE,GAAG,UAAU;oDAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gDAAC;gDACrD,cAAc;4CAClB;4CACA,WAAW,aAAa,mBAAmB;;;;;;wCAE9C,4BAAc,6WAAC;4CAAE,WAAU;sDAAwB;;;;;;;;;;;;8CAExD,6WAAC;oCAAI,WAAU;;sDACX,6WAAC,mIAAK;4CAAC,SAAQ;sDAAW;;;;;;sDAC1B,6WAAC;4CAAI,WAAU;;8DACX,6WAAC,qIAAM;oDACH,OAAO,WAAW,WAAW;oDAC7B,eAAe,CAAC,QAAU,cAAc;4DAAE,GAAG,UAAU;4DAAE,aAAa;wDAAM;;sEAE5E,6WAAC,4IAAa;4DAAC,WAAU;sEACrB,cAAA,6WAAC,0IAAW;gEAAC,aAAY;;;;;;;;;;;sEAE7B,6WAAC,4IAAa;4DAAC,WAAU;sEACpB,gIAAY,CAAC,GAAG,CAAC,CAAC,wBACf,6WAAC,yIAAU;oEAAoB,OAAO,QAAQ,IAAI;;sFAC9C,6WAAC;4EAAK,WAAU;sFAAQ,QAAQ,IAAI;;;;;;wEACnC,QAAQ,IAAI;;mEAFA,QAAQ,IAAI;;;;;;;;;;;;;;;;8DAOzC,6WAAC,mIAAK;oDACF,IAAG;oDACH,MAAK;oDACL,aAAY;oDACZ,OAAO,WAAW,WAAW;oDAC7B,UAAU,CAAC;wDACP,MAAM,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO;wDAC1C,MAAM,MAAM;wDACZ,IAAI,IAAI,MAAM,IAAI,KAAK;4DACnB,cAAc;gEAAE,GAAG,UAAU;gEAAE,aAAa;4DAAI;wDACpD;oDACJ;oDACA,WAAU;;;;;;;;;;;;sDAGlB,6WAAC;4CAAE,WAAU;sDACR,WAAW,WAAW,IAAI,gIAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,WAAW,GAAG;;;;;;;;;;;;;;;;;;sCAIlG,6WAAC,2IAAY;;8CACT,6WAAC,qIAAM;oCAAC,SAAQ;oCAAU,SAAS,IAAM,gBAAgB;8CAAQ;;;;;;8CACjE,6WAAC,qIAAM;oCAAC,SAAS;8CAAsB;;;;;;;;;;;;;;;;;;;;;;;;;AAM/D","debugId":null}},
    {"offset": {"line": 6299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/ui/switch.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as SwitchPrimitive from '@radix-ui/react-switch'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Switch({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\r\n  return (\r\n    <SwitchPrimitive.Root\r\n      data-slot=\"switch\"\r\n      className={cn(\r\n        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <SwitchPrimitive.Thumb\r\n        data-slot=\"switch-thumb\"\r\n        className={\r\n          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'\r\n        }\r\n      />\r\n    </SwitchPrimitive.Root>\r\n  )\r\n}\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,6WAAC,uRAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,6WAAC,wRAAqB;YACpB,aAAU;YACV,WACE;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 6334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/settings/notification-settings.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Switch } from \"@/components/ui/switch\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Bell } from 'lucide-react'\r\nimport { useToast } from \"@/hooks/use-toast\"\r\n\r\ninterface NotificationSettingsProps {\r\n    settings: any\r\n    updateSettings: (data: any) => Promise<{ success: boolean; error?: any }>\r\n}\r\n\r\nexport function NotificationSettings({ settings, updateSettings }: NotificationSettingsProps) {\r\n    const { toast } = useToast()\r\n    const [notifications, setNotifications] = useState({\r\n        email: true,\r\n        whatsapp: true,\r\n        renewalReminder: true,\r\n        planChanges: true,\r\n    })\r\n    const [savingNotifications, setSavingNotifications] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (settings) {\r\n            setNotifications({\r\n                email: settings.email_notifications ?? true,\r\n                whatsapp: settings.whatsapp_notifications ?? true,\r\n                renewalReminder: settings.renewal_reminder ?? true,\r\n                planChanges: settings.plan_changes_notifications ?? true,\r\n            })\r\n        }\r\n    }, [settings])\r\n\r\n    const handleSaveNotifications = async () => {\r\n        setSavingNotifications(true)\r\n        try {\r\n            const result = await updateSettings({\r\n                email_notifications: notifications.email,\r\n                whatsapp_notifications: notifications.whatsapp,\r\n                renewal_reminder: notifications.renewalReminder,\r\n                plan_changes_notifications: notifications.planChanges,\r\n            })\r\n\r\n            if (result.success) {\r\n                toast({\r\n                    variant: \"success\",\r\n                    title: \"Configuraci√≥n guardada\",\r\n                    description: \"Tus preferencias han sido actualizadas correctamente.\",\r\n                    duration: 3000,\r\n                })\r\n            } else {\r\n                toast({\r\n                    title: \"Error al guardar\",\r\n                    description: \"No se pudo guardar la configuraci√≥n.\",\r\n                    variant: \"destructive\",\r\n                    duration: 3000,\r\n                })\r\n            }\r\n        } catch (error) {\r\n            toast({\r\n                title: \"Error al guardar\",\r\n                description: \"Ocurri√≥ un error al guardar.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n        } finally {\r\n            setSavingNotifications(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Bell className=\"w-5 h-5 text-primary\" />\r\n                    <CardTitle>Notificaciones</CardTitle>\r\n                </div>\r\n                <CardDescription>Configura c√≥mo y cu√°ndo quieres recibir notificaciones</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <Label htmlFor=\"email-notifications\">Notificaciones por Email</Label>\r\n                        <p className=\"text-sm text-muted-foreground\">Recibe actualizaciones por correo electr√≥nico</p>\r\n                    </div>\r\n                    <Switch\r\n                        id=\"email-notifications\"\r\n                        checked={notifications.email}\r\n                        onCheckedChange={(checked) => setNotifications({ ...notifications, email: checked })}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <Label htmlFor=\"whatsapp-notifications\">Notificaciones por WhatsApp</Label>\r\n                        <p className=\"text-sm text-muted-foreground\">Recibe alertas por WhatsApp</p>\r\n                    </div>\r\n                    <Switch\r\n                        id=\"whatsapp-notifications\"\r\n                        checked={notifications.whatsapp}\r\n                        onCheckedChange={(checked) => setNotifications({ ...notifications, whatsapp: checked })}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <Label htmlFor=\"renewal-reminder\">Recordatorio de Renovaci√≥n</Label>\r\n                        <p className=\"text-sm text-muted-foreground\">Te avisamos antes de que venza tu suscripci√≥n</p>\r\n                    </div>\r\n                    <Switch\r\n                        id=\"renewal-reminder\"\r\n                        checked={notifications.renewalReminder}\r\n                        onCheckedChange={(checked) => setNotifications({ ...notifications, renewalReminder: checked })}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <Label htmlFor=\"plan-changes\">Cambios de Plan</Label>\r\n                        <p className=\"text-sm text-muted-foreground\">Notificaciones sobre actualizaciones de tu plan</p>\r\n                    </div>\r\n                    <Switch\r\n                        id=\"plan-changes\"\r\n                        checked={notifications.planChanges}\r\n                        onCheckedChange={(checked) => setNotifications({ ...notifications, planChanges: checked })}\r\n                    />\r\n                </div>\r\n\r\n                <Button\r\n                    onClick={handleSaveNotifications}\r\n                    className=\"w-full mt-4\"\r\n                    disabled={savingNotifications}\r\n                >\r\n                    {savingNotifications ? \"Guardando...\" : \"Guardar Preferencias\"}\r\n                </Button>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6665, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/app/actions/auth-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\nexport async function registerUser(data: any) {\r\n    try {\r\n        const supabase = createClient(\r\n            process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n            process.env.SUPABASE_SERVICE_ROLE_KEY!,\r\n            {\r\n                auth: {\r\n                    autoRefreshToken: false,\r\n                    persistSession: false\r\n                }\r\n            }\r\n        )\r\n\r\n        // 1. Crear usuario en Auth con auto-confirmaci√≥n\r\n        const { data: authUser, error: authError } = await supabase.auth.admin.createUser({\r\n            email: data.email,\r\n            password: data.password,\r\n            email_confirm: true,\r\n            user_metadata: {\r\n                first_name: data.first_name,\r\n                last_name: data.last_name,\r\n                full_name: `${data.first_name} ${data.last_name}`.trim()\r\n            }\r\n        })\r\n\r\n        if (authError) return { success: false, error: authError.message }\r\n        if (!authUser.user) return { success: false, error: 'No se pudo crear el usuario' }\r\n\r\n        // Force confirm email explicitly\r\n        await supabase.auth.admin.updateUserById(authUser.user.id, { email_confirm: true })\r\n\r\n        // 2. Crear perfil\r\n        const { error: profileError } = await supabase\r\n            .from('profiles')\r\n            .upsert({\r\n                id: authUser.user.id,\r\n                email: data.email,\r\n                first_name: data.first_name,\r\n                last_name: data.last_name,\r\n                whatsapp: data.whatsapp,\r\n                role: 'user'\r\n            })\r\n\r\n        if (profileError) {\r\n            console.error('Error creando perfil:', profileError)\r\n        }\r\n\r\n        return { success: true }\r\n    } catch (error) {\r\n        console.error('Error en registerUser:', error)\r\n        return { success: false, error: 'Error interno del servidor' }\r\n    }\r\n}\r\n\r\n/**\r\n * Deletes a user account and all associated data\r\n * This MUST run on the server with service_role_key for security\r\n */\r\nexport async function deleteUserAccount(userId: string) {\r\n    try {\r\n        const supabase = createClient(\r\n            process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n            process.env.SUPABASE_SERVICE_ROLE_KEY!,\r\n            {\r\n                auth: {\r\n                    autoRefreshToken: false,\r\n                    persistSession: false\r\n                }\r\n            }\r\n        )\r\n\r\n        // Delete user from auth (this will cascade delete related data via DB triggers/policies)\r\n        const { error } = await supabase.auth.admin.deleteUser(userId)\r\n\r\n        if (error) {\r\n            console.error('Error deleting user:', error)\r\n            return { success: false, error: error.message }\r\n        }\r\n\r\n        return { success: true }\r\n    } catch (error) {\r\n        console.error('Error en deleteUserAccount:', error)\r\n        return { success: false, error: 'Error interno del servidor' }\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IA8DsB,oBAAA,WAAA,GAAA,IAAA,8WAAA,EAAA,8CAAA,mWAAA,EAAA,KAAA,GAAA,yWAAA,EAAA","debugId":null}},
    {"offset": {"line": 6677, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/settings/security-settings.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Shield, Lock, Trash2 } from 'lucide-react'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { deleteUserAccount } from \"@/app/actions/auth-actions\"\r\n\r\ninterface SecuritySettingsProps {\r\n    user: any\r\n}\r\n\r\nexport function SecuritySettings({ user }: SecuritySettingsProps) {\r\n    const { toast } = useToast()\r\n    const supabase = createClient()\r\n\r\n    const [showDeleteDialog, setShowDeleteDialog] = useState(false)\r\n    const [showPasswordDialog, setShowPasswordDialog] = useState(false)\r\n    const [deleteConfirmText, setDeleteConfirmText] = useState(\"\")\r\n    const [passwordData, setPasswordData] = useState({\r\n        current: \"\",\r\n        new: \"\",\r\n        confirm: \"\"\r\n    })\r\n    const [passwordErrors, setPasswordErrors] = useState({\r\n        new: \"\",\r\n        confirm: \"\",\r\n        general: \"\"\r\n    })\r\n    const [changingPassword, setChangingPassword] = useState(false)\r\n\r\n    const handleChangePassword = async () => {\r\n        setPasswordErrors({ new: \"\", confirm: \"\", general: \"\" })\r\n\r\n        if (!passwordData.new || !passwordData.confirm) {\r\n            setPasswordErrors({\r\n                new: !passwordData.new ? \"Este campo es requerido\" : \"\",\r\n                confirm: !passwordData.confirm ? \"Este campo es requerido\" : \"\",\r\n                general: \"\"\r\n            })\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Por favor completa todos los campos.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n            return\r\n        }\r\n\r\n        if (passwordData.new.length < 8) {\r\n            setPasswordErrors({\r\n                new: \"La contrase√±a debe tener al menos 8 caracteres\",\r\n                confirm: \"\",\r\n                general: \"\"\r\n            })\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"La contrase√±a debe tener al menos 8 caracteres.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n            return\r\n        }\r\n\r\n        if (passwordData.new !== passwordData.confirm) {\r\n            setPasswordErrors({\r\n                new: \"\",\r\n                confirm: \"Las contrase√±as no coinciden\",\r\n                general: \"\"\r\n            })\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Las contrase√±as nuevas no coinciden.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n            return\r\n        }\r\n\r\n        setChangingPassword(true)\r\n        try {\r\n            const { error } = await supabase.auth.updateUser({\r\n                password: passwordData.new\r\n            })\r\n\r\n            if (error) {\r\n                toast({\r\n                    title: \"Error al cambiar contrase√±a\",\r\n                    description: error.message,\r\n                    variant: \"destructive\",\r\n                    duration: 3000,\r\n                })\r\n            } else {\r\n                toast({\r\n                    variant: \"success\",\r\n                    title: \"Contrase√±a actualizada\",\r\n                    description: \"Tu contrase√±a ha sido cambiada exitosamente.\",\r\n                    duration: 3000,\r\n                })\r\n                setShowPasswordDialog(false)\r\n                setPasswordData({ current: \"\", new: \"\", confirm: \"\" })\r\n                setPasswordErrors({ new: \"\", confirm: \"\", general: \"\" })\r\n            }\r\n        } catch (error) {\r\n            toast({\r\n                title: \"Error al cambiar contrase√±a\",\r\n                description: \"Ocurri√≥ un error al cambiar la contrase√±a.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n        } finally {\r\n            setChangingPassword(false)\r\n        }\r\n    }\r\n\r\n    const handleDeleteAccount = async () => {\r\n        if (deleteConfirmText !== \"ELIMINAR\") {\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Por favor escribe ELIMINAR para confirmar.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n            return\r\n        }\r\n\r\n        if (!user?.id) {\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"No se pudo identificar el usuario.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n            return\r\n        }\r\n\r\n        try {\r\n            // Call secure server action\r\n            const result = await deleteUserAccount(user.id)\r\n\r\n            if (!result.success) {\r\n                toast({\r\n                    title: \"Error\",\r\n                    description: result.error || \"No se pudo eliminar la cuenta. Contacta con soporte.\",\r\n                    variant: \"destructive\",\r\n                    duration: 3000,\r\n                })\r\n                return\r\n            }\r\n\r\n            // Sign out and redirect\r\n            await supabase.auth.signOut()\r\n            window.location.href = '/auth/login'\r\n        } catch (error) {\r\n            console.error('Error deleting account:', error)\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Ocurri√≥ un error inesperado. Contacta con soporte.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Card>\r\n                <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Shield className=\"w-5 h-5 text-primary\" />\r\n                            <CardTitle>Seguridad</CardTitle>\r\n                        </div>\r\n                    </div>\r\n                    <CardDescription>Opciones de seguridad de tu cuenta</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"text-sm font-semibold text-foreground flex items-center gap-2\">\r\n                            <Shield className=\"w-4 h-4 text-primary\" />\r\n                            Contrase√±a\r\n                        </h3>\r\n                        <button\r\n                            onClick={() => setShowPasswordDialog(true)}\r\n                            className=\"w-full flex items-center justify-between p-4 bg-gradient-to-r from-primary/5 to-transparent rounded-lg border border-primary/10 hover:border-primary/30 transition-all group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors\">\r\n                                    <Lock className=\"w-5 h-5 text-primary\" />\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <p className=\"text-sm font-medium text-foreground\">Cambiar Contrase√±a</p>\r\n                                    <p className=\"text-xs text-muted-foreground\">Actualiza tu contrase√±a de acceso</p>\r\n                                </div>\r\n                            </div>\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-muted-foreground group-hover:text-primary transition-colors\">\r\n                                <path d=\"m9 18 6-6-6-6\" />\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"border-destructive/50 mt-6\">\r\n                <CardHeader>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Trash2 className=\"w-5 h-5 text-destructive\" />\r\n                        <CardTitle className=\"text-destructive\">Zona Peligrosa</CardTitle>\r\n                    </div>\r\n                    <CardDescription>Acciones irreversibles en tu cuenta</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <Button\r\n                        onClick={() => setShowDeleteDialog(true)}\r\n                        variant=\"destructive\"\r\n                        className=\"w-full\"\r\n                    >\r\n                        <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                        Eliminar Cuenta\r\n                    </Button>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Dialog open={showPasswordDialog} onOpenChange={setShowPasswordDialog}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Cambiar Contrase√±a</DialogTitle>\r\n                        <DialogDescription>\r\n                            Ingresa tu nueva contrase√±a (m√≠nimo 8 caracteres)\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"new-password\">Nueva Contrase√±a</Label>\r\n                            <Input\r\n                                id=\"new-password\"\r\n                                type=\"password\"\r\n                                value={passwordData.new}\r\n                                onChange={(e) => setPasswordData({ ...passwordData, new: e.target.value })}\r\n                                className={passwordErrors.new ? \"border-destructive\" : \"\"}\r\n                            />\r\n                            {passwordErrors.new && (\r\n                                <p className=\"text-sm text-destructive\">{passwordErrors.new}</p>\r\n                            )}\r\n                            <p className=\"text-xs text-muted-foreground\">M√≠nimo 8 caracteres</p>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"confirm-password\">Confirmar Nueva Contrase√±a</Label>\r\n                            <Input\r\n                                id=\"confirm-password\"\r\n                                type=\"password\"\r\n                                value={passwordData.confirm}\r\n                                onChange={(e) => setPasswordData({ ...passwordData, confirm: e.target.value })}\r\n                                className={passwordErrors.confirm ? \"border-destructive\" : \"\"}\r\n                            />\r\n                            {passwordErrors.confirm && (\r\n                                <p className=\"text-sm text-destructive\">{passwordErrors.confirm}</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setShowPasswordDialog(false)}>\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleChangePassword}\r\n                            disabled={changingPassword}\r\n                        >\r\n                            {changingPassword ? \"Actualizando...\" : \"Actualizar Contrase√±a\"}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <Dialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"text-destructive\">Eliminar Cuenta</DialogTitle>\r\n                        <DialogDescription>\r\n                            Esta acci√≥n es irreversible. Todos tus datos ser√°n eliminados permanentemente.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"py-4\">\r\n                        <p className=\"text-sm text-muted-foreground mb-4\">\r\n                            Para confirmar, escribe <strong>ELIMINAR</strong> en el campo de abajo:\r\n                        </p>\r\n                        <Input\r\n                            placeholder=\"ELIMINAR\"\r\n                            value={deleteConfirmText}\r\n                            onChange={(e) => setDeleteConfirmText(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setShowDeleteDialog(false)}>\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"destructive\"\r\n                            onClick={handleDeleteAccount}\r\n                            disabled={deleteConfirmText !== \"ELIMINAR\"}\r\n                        >\r\n                            Eliminar Cuenta\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/settings/device-settings.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Monitor } from 'lucide-react'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\n\r\ninterface DeviceSettingsProps {\r\n    subscription: any\r\n}\r\n\r\nexport function DeviceSettings({ subscription }: DeviceSettingsProps) {\r\n    const { toast } = useToast()\r\n    const [showDevicesDialog, setShowDevicesDialog] = useState(false)\r\n    const [resettingDevices, setResettingDevices] = useState(false)\r\n\r\n    const handleResetDevices = async () => {\r\n        setResettingDevices(true)\r\n        try {\r\n            await new Promise(resolve => setTimeout(resolve, 1500))\r\n\r\n            toast({\r\n                variant: \"success\",\r\n                title: \"Dispositivos reseteados\",\r\n                description: \"Todos los dispositivos han sido desconectados exitosamente.\",\r\n                duration: 3000,\r\n            })\r\n            setShowDevicesDialog(false)\r\n        } catch (error) {\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"No se pudieron resetear los dispositivos.\",\r\n                variant: \"destructive\",\r\n                duration: 3000,\r\n            })\r\n        } finally {\r\n            setResettingDevices(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Card id=\"devices-section\">\r\n                <CardHeader>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Monitor className=\"w-5 h-5 text-primary\" />\r\n                        <CardTitle>Gesti√≥n de Dispositivos</CardTitle>\r\n                    </div>\r\n                    <CardDescription>Administra los dispositivos conectados a tu cuenta</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between p-4 bg-gradient-to-r from-primary/5 to-transparent rounded-lg border border-primary/10\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                <Monitor className=\"w-6 h-6 text-primary\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-base font-medium text-foreground\">Dispositivos conectados</p>\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    2 de {subscription?.plan?.max_screens || 1} dispositivos activos\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            className=\"border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground\"\r\n                            onClick={() => setShowDevicesDialog(true)}\r\n                        >\r\n                            Resetear Dispositivos\r\n                        </Button>\r\n                    </div>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                        Al resetear los dispositivos, se desconectar√°n todos los dispositivos actualmente conectados.\r\n                        Deber√°s volver a iniciar sesi√≥n en cada uno de ellos.\r\n                    </p>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Dialog open={showDevicesDialog} onOpenChange={setShowDevicesDialog}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Resetear Dispositivos</DialogTitle>\r\n                        <DialogDescription>\r\n                            ¬øEst√°s seguro de que deseas desconectar todos los dispositivos?\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setShowDevicesDialog(false)}>\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"destructive\"\r\n                            onClick={handleResetDevices}\r\n                            disabled={resettingDevices}\r\n                        >\r\n                            {resettingDevices ? \"Reseteando...\" : \"S√≠, Resetear Todo\"}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAQA;AAdA;;;;;;;;AAoBO,SAAS,eAAe,EAAE,YAAY,EAAuB;IAChE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,iIAAQ;IAC1B,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,gVAAQ,EAAC;IAC3D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,gVAAQ,EAAC;IAEzD,MAAM,qBAAqB;QACvB,oBAAoB;QACpB,IAAI;YACA,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;YAEjD,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;gBACb,UAAU;YACd;YACA,qBAAqB;QACzB,EAAE,OAAO,OAAO;YACZ,MAAM;gBACF,OAAO;gBACP,aAAa;gBACb,SAAS;gBACT,UAAU;YACd;QACJ,SAAU;YACN,oBAAoB;QACxB;IACJ;IAEA,qBACI;;0BACI,6WAAC,iIAAI;gBAAC,IAAG;;kCACL,6WAAC,uIAAU;;0CACP,6WAAC;gCAAI,WAAU;;kDACX,6WAAC,uSAAO;wCAAC,WAAU;;;;;;kDACnB,6WAAC,sIAAS;kDAAC;;;;;;;;;;;;0CAEf,6WAAC,4IAAe;0CAAC;;;;;;;;;;;;kCAErB,6WAAC,wIAAW;wBAAC,WAAU;;0CACnB,6WAAC;gCAAI,WAAU;;kDACX,6WAAC;wCAAI,WAAU;;0DACX,6WAAC;gDAAI,WAAU;0DACX,cAAA,6WAAC,uSAAO;oDAAC,WAAU;;;;;;;;;;;0DAEvB,6WAAC;;kEACG,6WAAC;wDAAE,WAAU;kEAAwC;;;;;;kEACrD,6WAAC;wDAAE,WAAU;;4DAAgC;4DACnC,cAAc,MAAM,eAAe;4DAAE;;;;;;;;;;;;;;;;;;;kDAIvD,6WAAC,qIAAM;wCACH,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS,IAAM,qBAAqB;kDACvC;;;;;;;;;;;;0CAIL,6WAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;;;;;;;0BAOrD,6WAAC,qIAAM;gBAAC,MAAM;gBAAmB,cAAc;0BAC3C,cAAA,6WAAC,4IAAa;;sCACV,6WAAC,2IAAY;;8CACT,6WAAC,0IAAW;8CAAC;;;;;;8CACb,6WAAC,gJAAiB;8CAAC;;;;;;;;;;;;sCAIvB,6WAAC,2IAAY;;8CACT,6WAAC,qIAAM;oCAAC,SAAQ;oCAAU,SAAS,IAAM,qBAAqB;8CAAQ;;;;;;8CAGtE,6WAAC,qIAAM;oCACH,SAAQ;oCACR,SAAS;oCACT,UAAU;8CAET,mBAAmB,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;AAOlE","debugId":null}},
    {"offset": {"line": 7622, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/settings-section.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useSettings } from \"@/hooks/use-settings\"\r\nimport { useProfile } from \"@/hooks/use-profile\"\r\nimport { useSubscription } from \"@/hooks/use-subscription\"\r\nimport { useAuth } from \"@/hooks/use-auth\"\r\nimport { ProfileSettings } from \"./settings/profile-settings\"\r\nimport { NotificationSettings } from \"./settings/notification-settings\"\r\nimport { SecuritySettings } from \"./settings/security-settings\"\r\nimport { DeviceSettings } from \"./settings/device-settings\"\r\n\r\nexport function SettingsSection() {\r\n  const { settings, loading, updateSettings } = useSettings()\r\n  const { profile, loading: loadingProfile, updateProfile } = useProfile()\r\n  const { subscription } = useSubscription()\r\n  const { user } = useAuth()\r\n\r\n  if (loading || loadingProfile) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Cargando configuraci√≥n...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-foreground\">Configuraci√≥n</h2>\r\n        <p className=\"text-muted-foreground mt-1\">Administra las preferencias de tu cuenta</p>\r\n      </div>\r\n\r\n      <ProfileSettings profile={profile} updateProfile={updateProfile} />\r\n      <NotificationSettings settings={settings} updateSettings={updateSettings} />\r\n      <DeviceSettings subscription={subscription} />\r\n      <SecuritySettings user={user} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAA,uIAAW;IACzD,MAAM,EAAE,OAAO,EAAE,SAAS,cAAc,EAAE,aAAa,EAAE,GAAG,IAAA,qIAAU;IACtE,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,+IAAe;IACxC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IAExB,IAAI,WAAW,gBAAgB;QAC7B,qBACE,6WAAC;YAAI,WAAU;sBACb,cAAA,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAI,WAAU;;;;;;kCACf,6WAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC;;kCACC,6WAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,6WAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAG5C,6WAAC,iKAAe;gBAAC,SAAS;gBAAS,eAAe;;;;;;0BAClD,6WAAC,2KAAoB;gBAAC,UAAU;gBAAU,gBAAgB;;;;;;0BAC1D,6WAAC,+JAAc;gBAAC,cAAc;;;;;;0BAC9B,6WAAC,mKAAgB;gBAAC,MAAM;;;;;;;;;;;;AAG9B","debugId":null}},
    {"offset": {"line": 7751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Home/Documents/GitHub/tv-store/components/dashboard-client.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { DashboardLayout } from \"@/components/dashboard-layout\"\r\nimport { DashboardHome } from \"@/components/dashboard-home\"\r\nimport { PlansSection } from \"@/components/plans-section\"\r\nimport { BillingSection } from \"@/components/billing-section\"\r\nimport { CredentialsSection } from \"@/components/credentials-section\"\r\nimport { SettingsSection } from \"@/components/settings-section\"\r\nimport { createBrowserClient } from \"@/lib/supabase/client\"\r\nimport { useRouter } from 'next/navigation'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Shield } from 'lucide-react'\r\n\r\nexport default function DashboardClient() {\r\n  const [currentView, setCurrentView] = useState(\"home\")\r\n  const [isAdmin, setIsAdmin] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    checkAdminRole()\r\n  }, [])\r\n\r\n  const checkAdminRole = async () => {\r\n    const supabase = createBrowserClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    \r\n    if (user) {\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single()\r\n      \r\n      setIsAdmin(profile?.role === 'admin')\r\n    }\r\n    setLoading(false)\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout currentView={currentView} setCurrentView={setCurrentView}>\r\n      {!loading && isAdmin && (\r\n        <div className=\"mb-4\">\r\n          <Button\r\n            onClick={() => router.push('/admin')}\r\n            className=\"w-full gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\"\r\n          >\r\n            <Shield className=\"h-4 w-4\" />\r\n            Acceder al Panel de Administraci√≥n\r\n          </Button>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"min-h-[600px]\">\r\n        <div style={{ display: currentView === \"home\" ? \"block\" : \"none\" }}>\r\n          <DashboardHome setCurrentView={setCurrentView} />\r\n        </div>\r\n        <div style={{ display: currentView === \"plans\" ? \"block\" : \"none\" }}>\r\n          <PlansSection setCurrentView={setCurrentView} />\r\n        </div>\r\n        <div style={{ display: currentView === \"billing\" ? \"block\" : \"none\" }}>\r\n          <BillingSection />\r\n        </div>\r\n        <div style={{ display: currentView === \"credentials\" ? \"block\" : \"none\" }}>\r\n          <CredentialsSection />\r\n        </div>\r\n        <div style={{ display: currentView === \"settings\" ? \"block\" : \"none\" }}>\r\n          <SettingsSection />\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;;;;;;;;;;;;;AAce,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,8QAAS;IAExB,IAAA,iVAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,MAAM,WAAW,IAAA,gJAAmB;QACpC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAEtD,IAAI,MAAM;YACR,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAET,WAAW,SAAS,SAAS;QAC/B;QACA,WAAW;IACb;IAEA,qBACE,6WAAC,qJAAe;QAAC,aAAa;QAAa,gBAAgB;;YACxD,CAAC,WAAW,yBACX,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC,qIAAM;oBACL,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAU;;sCAEV,6WAAC,oSAAM;4BAAC,WAAU;;;;;;wBAAY;;;;;;;;;;;;0BAMpC,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAI,OAAO;4BAAE,SAAS,gBAAgB,SAAS,UAAU;wBAAO;kCAC/D,cAAA,6WAAC,iJAAa;4BAAC,gBAAgB;;;;;;;;;;;kCAEjC,6WAAC;wBAAI,OAAO;4BAAE,SAAS,gBAAgB,UAAU,UAAU;wBAAO;kCAChE,cAAA,6WAAC,+IAAY;4BAAC,gBAAgB;;;;;;;;;;;kCAEhC,6WAAC;wBAAI,OAAO;4BAAE,SAAS,gBAAgB,YAAY,UAAU;wBAAO;kCAClE,cAAA,6WAAC,mJAAc;;;;;;;;;;kCAEjB,6WAAC;wBAAI,OAAO;4BAAE,SAAS,gBAAgB,gBAAgB,UAAU;wBAAO;kCACtE,cAAA,6WAAC,2JAAkB;;;;;;;;;;kCAErB,6WAAC;wBAAI,OAAO;4BAAE,SAAS,gBAAgB,aAAa,UAAU;wBAAO;kCACnE,cAAA,6WAAC,qJAAe;;;;;;;;;;;;;;;;;;;;;;AAK1B","debugId":null}}]
}