module.exports=[6122,a=>{"use strict";var b=a.i(27777),c=a.i(68009),d=a.i(77188),e=a.i(14458),f=a.i(35133),g=a.i(33334),h=a.i(64837),i=a.i(56723),j=a.i(22242),k=a.i(30084),l=a.i(51692),m="rovingFocusGroup.onEntryFocus",n={bubbles:!1,cancelable:!0},o="RovingFocusGroup",[p,q,r]=(0,f.createCollection)(o),[s,t]=(0,e.createContextScope)(o,[r]),[u,v]=s(o),w=c.forwardRef((a,c)=>(0,b.jsx)(p.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(p.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(x,{...a,ref:c})})}));w.displayName=o;var x=c.forwardRef((a,e)=>{let{__scopeRovingFocusGroup:f,orientation:h,loop:o=!1,dir:p,currentTabStopId:r,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:t,onEntryFocus:v,preventScrollOnEntryFocus:w=!1,...x}=a,y=c.useRef(null),z=(0,g.useComposedRefs)(e,y),A=(0,l.useDirection)(p),[C=null,D]=(0,k.useControllableState)({prop:r,defaultProp:s,onChange:t}),[E,F]=c.useState(!1),G=(0,j.useCallbackRef)(v),H=q(f),I=c.useRef(!1),[J,K]=c.useState(0);return c.useEffect(()=>{let a=y.current;if(a)return a.addEventListener(m,G),()=>a.removeEventListener(m,G)},[G]),(0,b.jsx)(u,{scope:f,orientation:h,dir:A,loop:o,currentTabStopId:C,onItemFocus:c.useCallback(a=>D(a),[D]),onItemShiftTab:c.useCallback(()=>F(!0),[]),onFocusableItemAdd:c.useCallback(()=>K(a=>a+1),[]),onFocusableItemRemove:c.useCallback(()=>K(a=>a-1),[]),children:(0,b.jsx)(i.Primitive.div,{tabIndex:E||0===J?-1:0,"data-orientation":h,...x,ref:z,style:{outline:"none",...a.style},onMouseDown:(0,d.composeEventHandlers)(a.onMouseDown,()=>{I.current=!0}),onFocus:(0,d.composeEventHandlers)(a.onFocus,a=>{let b=!I.current;if(a.target===a.currentTarget&&b&&!E){let b=new CustomEvent(m,n);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=H().filter(a=>a.focusable);B([a.find(a=>a.active),a.find(a=>a.id===C),...a].filter(Boolean).map(a=>a.ref.current),w)}}I.current=!1}),onBlur:(0,d.composeEventHandlers)(a.onBlur,()=>F(!1))})})}),y="RovingFocusGroupItem",z=c.forwardRef((a,e)=>{let{__scopeRovingFocusGroup:f,focusable:g=!0,active:j=!1,tabStopId:k,...l}=a,m=(0,h.useId)(),n=k||m,o=v(y,f),r=o.currentTabStopId===n,s=q(f),{onFocusableItemAdd:t,onFocusableItemRemove:u}=o;return c.useEffect(()=>{if(g)return t(),()=>u()},[g,t,u]),(0,b.jsx)(p.ItemSlot,{scope:f,id:n,focusable:g,active:j,children:(0,b.jsx)(i.Primitive.span,{tabIndex:r?0:-1,"data-orientation":o.orientation,...l,ref:e,onMouseDown:(0,d.composeEventHandlers)(a.onMouseDown,a=>{g?o.onItemFocus(n):a.preventDefault()}),onFocus:(0,d.composeEventHandlers)(a.onFocus,()=>o.onItemFocus(n)),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void o.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return A[e]}(a,o.orientation,o.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=s().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=o.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>B(e))}})})})});z.displayName=y;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function B(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var C=a.i(9930),D="Tabs",[E,F]=(0,e.createContextScope)(D,[t]),G=t(),[H,I]=E(D),J=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:j="horizontal",dir:m,activationMode:n="automatic",...o}=a,p=(0,l.useDirection)(m),[q,r]=(0,k.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(H,{scope:d,baseId:(0,h.useId)(),value:q,onValueChange:r,orientation:j,dir:p,activationMode:n,children:(0,b.jsx)(i.Primitive.div,{dir:p,"data-orientation":j,...o,ref:c})})});J.displayName=D;var K="TabsList",L=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=I(K,d),h=G(d);return(0,b.jsx)(w,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(i.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});L.displayName=K;var M="TabsTrigger",N=c.forwardRef((a,c)=>{let{__scopeTabs:e,value:f,disabled:g=!1,...h}=a,j=I(M,e),k=G(e),l=Q(j.baseId,f),m=R(j.baseId,f),n=f===j.value;return(0,b.jsx)(z,{asChild:!0,...k,focusable:!g,active:n,children:(0,b.jsx)(i.Primitive.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":m,"data-state":n?"active":"inactive","data-disabled":g?"":void 0,disabled:g,id:l,...h,ref:c,onMouseDown:(0,d.composeEventHandlers)(a.onMouseDown,a=>{g||0!==a.button||!1!==a.ctrlKey?a.preventDefault():j.onValueChange(f)}),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&j.onValueChange(f)}),onFocus:(0,d.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==j.activationMode;n||g||!a||j.onValueChange(f)})})})});N.displayName=M;var O="TabsContent",P=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...j}=a,k=I(O,e),l=Q(k.baseId,f),m=R(k.baseId,f),n=f===k.value,o=c.useRef(n);return c.useEffect(()=>{let a=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(C.Presence,{present:g||n,children:({present:c})=>(0,b.jsx)(i.Primitive.div,{"data-state":n?"active":"inactive","data-orientation":k.orientation,role:"tabpanel","aria-labelledby":l,hidden:!c,id:m,tabIndex:0,...j,ref:d,style:{...a.style,animationDuration:o.current?"0s":void 0},children:c&&h})})});function Q(a,b){return`${a}-trigger-${b}`}function R(a,b){return`${a}-content-${b}`}P.displayName=O;var S=a.i(21678);function T({className:a,...c}){return(0,b.jsx)(J,{"data-slot":"tabs",className:(0,S.cn)("flex flex-col gap-2",a),...c})}function U({className:a,...c}){return(0,b.jsx)(L,{"data-slot":"tabs-list",className:(0,S.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function V({className:a,...c}){return(0,b.jsx)(N,{"data-slot":"tabs-trigger",className:(0,S.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function W({className:a,...c}){return(0,b.jsx)(P,{"data-slot":"tabs-content",className:(0,S.cn)("flex-1 outline-none",a),...c})}var X=a.i(80344),Y=a.i(73233);let Z=(0,Y.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),$=(0,Y.default)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),_=(0,Y.default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),aa=(0,Y.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var ab=a.i(83793);let ac=(0,Y.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var ad=a.i(6376),ae=a.i(95773),af=a.i(44790);function ag({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,S.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var ah=a.i(52059),ai=a.i(64858);let aj=(0,Y.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ak=(0,Y.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var al=a.i(22863),am=a.i(36472);function an(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),{toast:k}=(0,am.useToast)(),[l,m]=(0,c.useState)({name:"",description:"",price:"",features:"",max_screens:"1",plan_type:"",plan_type_id:""});(0,c.useEffect)(()=>{n()},[]);let n=async()=>{let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("plans").select("*").order("price",{ascending:!0});c?k({variant:"destructive",title:"Error al cargar planes",description:c.message,duration:3e3}):d(b||[]),f(!1)},o=a=>{a?(h(a),m({name:a.name,description:a.description,price:a.price.toString(),features:a.features.join("\n"),max_screens:a.max_screens?.toString()||"1",plan_type:a.plan_type||"",plan_type_id:a.plan_type_id||""})):(h(null),m({name:"",description:"",price:"",features:"",max_screens:"1",plan_type:"",plan_type_id:""})),j(!0)},p=async()=>{let a,b=(0,ai.createBrowserClient)(),c={name:l.name,description:l.description,price:parseFloat(l.price),features:l.features.split("\n").filter(a=>a.trim()),max_screens:parseInt(l.max_screens),plan_type:l.plan_type||null,plan_type_id:l.plan_type_id||null};g||(c.id=l.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),c.id=`${c.id}-${Date.now()}`),(a=g?(await b.from("plans").update(c).eq("id",g.id)).error:(await b.from("plans").insert([c])).error)?k({variant:"destructive",title:"Error al guardar plan",description:a.message,duration:3e3}):(k({variant:"success",title:g?"Plan actualizado":"Plan creado",description:`El plan ha sido ${g?"actualizado":"creado"} exitosamente`,duration:3e3}),j(!1),n())},q=async a=>{if(!confirm("¿Estás seguro de eliminar este plan?"))return;let b=(0,ai.createBrowserClient)(),{error:c}=await b.from("plans").delete().eq("id",a);c?k({variant:"destructive",title:"Error al eliminar plan",description:c.message,duration:3e3}):(k({variant:"success",title:"Plan eliminado",description:"El plan ha sido eliminado exitosamente",duration:3e3}),n())};return e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Paquetes"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Administra los planes de suscripción disponibles"})]}),(0,b.jsxs)(ah.Dialog,{open:i,onOpenChange:j,children:[(0,b.jsx)(ah.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(X.Button,{onClick:()=>o(),className:"gap-2",children:[(0,b.jsx)(aj,{className:"h-4 w-4"}),"Nuevo Paquete"]})}),(0,b.jsxs)(ah.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:g?"Editar Paquete":"Nuevo Paquete"}),(0,b.jsx)(ah.DialogDescription,{children:g?"Modifica los detalles del paquete":"Crea un nuevo paquete de suscripción"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"name",children:"Nombre del Paquete"}),(0,b.jsx)(ae.Input,{id:"name",value:l.name,onChange:a=>m({...l,name:a.target.value}),placeholder:"Ej: Básico"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"description",children:"Descripción"}),(0,b.jsx)(ag,{id:"description",value:l.description,onChange:a=>m({...l,description:a.target.value}),placeholder:"Descripción del paquete",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"price",children:"Precio (S/)"}),(0,b.jsx)(ae.Input,{id:"price",type:"number",step:"0.01",value:l.price,onChange:a=>m({...l,price:a.target.value}),placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"max_screens",children:"Número de Pantallas Simultáneas"}),(0,b.jsx)(ae.Input,{id:"max_screens",type:"number",min:"1",max:"10",value:l.max_screens,onChange:a=>m({...l,max_screens:a.target.value}),placeholder:"1"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cantidad de dispositivos que pueden ver simultáneamente"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"plan_type_id",children:"ID del Tipo de Paquete"}),(0,b.jsx)(ae.Input,{id:"plan_type_id",type:"text",value:l.plan_type_id,onChange:a=>m({...l,plan_type_id:a.target.value}),placeholder:"Ej: 1, 4, 10 o 2,4,5"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"ID numérico para el backend (puede ser múltiple: 2,4,5)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"plan_type",children:"Nombre del Tipo de Paquete"}),(0,b.jsx)(ae.Input,{id:"plan_type",value:l.plan_type,onChange:a=>m({...l,plan_type:a.target.value}),placeholder:"Ej: Gold, Silver"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nombre del tipo de paquete"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"features",children:"Características (una por línea)"}),(0,b.jsx)(ag,{id:"features",value:l.features,onChange:a=>m({...l,features:a.target.value}),placeholder:"Canales HD Soporte 24/7 Sin publicidad",rows:6})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),(0,b.jsxs)(X.Button,{onClick:p,children:[g?"Actualizar":"Crear"," Paquete"]})]})]})]})]})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:a.map(a=>(0,b.jsxs)(ad.Card,{className:"hover:shadow-lg transition-shadow flex flex-col",children:[(0,b.jsx)(ad.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)(ad.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(Z,{className:"h-4 w-4 text-primary flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.name})]}),(0,b.jsx)(ad.CardDescription,{className:"mt-1 text-xs line-clamp-2",children:a.description})]}),(0,b.jsxs)("div",{className:"flex gap-1 flex-shrink-0",children:[(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>o(a),children:(0,b.jsx)(ak,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>q(a.id),children:(0,b.jsx)(al.Trash2,{className:"h-3.5 w-3.5 text-red-500"})})]})]})}),(0,b.jsxs)(ad.CardContent,{className:"space-y-3 flex-1 flex flex-col",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["S/ ",a.price.toFixed(2)]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[(0,b.jsxs)("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded font-medium",children:[a.max_screens," ",1===a.max_screens?"pantalla":"pantallas"]}),a.plan_type&&(0,b.jsx)("span",{className:"bg-accent/10 text-accent px-2 py-0.5 rounded font-medium",children:a.plan_type}),a.plan_type_id&&(0,b.jsxs)("span",{className:"bg-muted text-muted-foreground px-2 py-0.5 rounded font-medium",children:["ID: ",a.plan_type_id]})]}),(0,b.jsx)("div",{className:"space-y-2 flex-1",children:(0,b.jsxs)("ul",{className:"space-y-1",children:[a.features.slice(0,5).map((a,c)=>(0,b.jsxs)("li",{className:"text-xs flex items-start gap-1.5",children:[(0,b.jsx)("span",{className:"text-green-500 mt-0.5 flex-shrink-0",children:"✓"}),(0,b.jsx)("span",{className:"line-clamp-2",children:a})]},c)),a.features.length>5&&(0,b.jsxs)("li",{className:"text-xs text-muted-foreground italic",children:["+",a.features.length-5," más..."]})]})})]})]},a.id))})]})}var ao=a.i(43977),ap=a.i(15863);function aq(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),{toast:k}=(0,am.useToast)(),[l,m]=(0,c.useState)({name:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",active:!0,start_date:"",end_date:""});(0,c.useEffect)(()=>{n()},[]);let n=async()=>{let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("promotions").select("*").order("created_at",{ascending:!1});c?k({variant:"destructive",title:"Error al cargar promociones",description:c.message,duration:3e3}):d(b||[]),f(!1)},o=a=>{a?(h(a),m({name:a.name,description:a.description||"",discount_type:a.discount_percentage?"percentage":"amount",discount_percentage:a.discount_percentage?.toString()||"",discount_amount:a.discount_amount?.toString()||"",active:a.active,start_date:a.start_date?a.start_date.split("T")[0]:"",end_date:a.end_date?a.end_date.split("T")[0]:""})):(h(null),m({name:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",active:!0,start_date:"",end_date:""})),j(!0)},p=async()=>{let a,b=(0,ai.createBrowserClient)(),c={name:l.name,description:l.description,active:l.active,start_date:l.start_date||null,end_date:l.end_date||null};"percentage"===l.discount_type?(c.discount_percentage=parseInt(l.discount_percentage),c.discount_amount=null):(c.discount_amount=parseFloat(l.discount_amount),c.discount_percentage=null),(a=g?(await b.from("promotions").update(c).eq("id",g.id)).error:(await b.from("promotions").insert([c])).error)?k({variant:"destructive",title:"Error al guardar promoción",description:a.message,duration:3e3}):(k({variant:"success",title:g?"Promoción actualizada":"Promoción creada",description:`La promoci\xf3n ha sido ${g?"actualizada":"creada"} exitosamente`,duration:3e3}),j(!1),n())},q=async a=>{if(!confirm("¿Estás seguro de eliminar esta promoción?"))return;let b=(0,ai.createBrowserClient)(),{error:c}=await b.from("promotions").delete().eq("id",a);c?k({variant:"destructive",title:"Error al eliminar promoción",description:c.message,duration:3e3}):(k({variant:"success",title:"Promoción eliminada",description:"La promoción ha sido eliminada exitosamente",duration:3e3}),n())},r=async(a,b)=>{let c=(0,ai.createBrowserClient)(),{error:d}=await c.from("promotions").update({active:!b}).eq("id",a);d?k({variant:"destructive",title:"Error",description:d.message,duration:3e3}):n()};return e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Promociones"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Crea promociones temporales con descuentos"})]}),(0,b.jsxs)(ah.Dialog,{open:i,onOpenChange:j,children:[(0,b.jsx)(ah.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(X.Button,{onClick:()=>o(),className:"gap-2",children:[(0,b.jsx)(aj,{className:"h-4 w-4"}),"Nueva Promoción"]})}),(0,b.jsxs)(ah.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:g?"Editar Promoción":"Nueva Promoción"}),(0,b.jsx)(ah.DialogDescription,{children:g?"Modifica los detalles de la promoción":"Crea una nueva promoción temporal"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"promo-name",children:"Nombre de la Promoción"}),(0,b.jsx)(ae.Input,{id:"promo-name",value:l.name,onChange:a=>m({...l,name:a.target.value}),placeholder:"Ej: Descuento de Verano"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"promo-description",children:"Descripción"}),(0,b.jsx)(ag,{id:"promo-description",value:l.description,onChange:a=>m({...l,description:a.target.value}),placeholder:"Descripción de la promoción",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(af.Label,{children:"Tipo de Descuento"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"discount_type",value:"percentage",checked:"percentage"===l.discount_type,onChange:a=>m({...l,discount_type:a.target.value}),className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Porcentaje (%)"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"discount_type",value:"amount",checked:"amount"===l.discount_type,onChange:a=>m({...l,discount_type:a.target.value}),className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Monto Fijo (S/)"})]})]})]}),"percentage"===l.discount_type?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"discount-percentage",children:"Porcentaje de Descuento"}),(0,b.jsx)(ae.Input,{id:"discount-percentage",type:"number",min:"0",max:"100",value:l.discount_percentage,onChange:a=>m({...l,discount_percentage:a.target.value}),placeholder:"20"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"discount-amount",children:"Monto de Descuento (S/)"}),(0,b.jsx)(ae.Input,{id:"discount-amount",type:"number",step:"0.01",value:l.discount_amount,onChange:a=>m({...l,discount_amount:a.target.value}),placeholder:"10.00"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"start-date",children:"Fecha de Inicio"}),(0,b.jsx)(ae.Input,{id:"start-date",type:"date",value:l.start_date,onChange:a=>m({...l,start_date:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"end-date",children:"Fecha de Fin"}),(0,b.jsx)(ae.Input,{id:"end-date",type:"date",value:l.end_date,onChange:a=>m({...l,end_date:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(af.Label,{htmlFor:"active-switch",children:"Activar Promoción"}),(0,b.jsx)(ao.Switch,{id:"active-switch",checked:l.active,onCheckedChange:a=>m({...l,active:a})})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),(0,b.jsxs)(X.Button,{onClick:p,children:[g?"Actualizar":"Crear"," Promoción"]})]})]})]})]})]}),(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsxs)(ad.Card,{className:`hover:shadow-lg transition-shadow ${!a.active?"opacity-60":""}`,children:[(0,b.jsx)(ad.CardHeader,{children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(ad.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)($,{className:"h-5 w-5 text-orange-500"}),a.name]}),(0,b.jsx)(ad.CardDescription,{className:"mt-2",children:a.description})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",onClick:()=>o(a),children:(0,b.jsx)(ak,{className:"h-4 w-4"})}),(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",onClick:()=>q(a.id),children:(0,b.jsx)(al.Trash2,{className:"h-4 w-4 text-red-500"})})]})]})}),(0,b.jsxs)(ad.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-orange-600",children:a.discount_percentage?`${a.discount_percentage}%`:`S/ ${a.discount_amount?.toFixed(2)}`}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"de descuento"})]}),(a.start_date||a.end_date)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(ap.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a.start_date&&new Date(a.start_date).toLocaleDateString(),a.start_date&&a.end_date&&" - ",a.end_date&&new Date(a.end_date).toLocaleDateString()]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a.active?"Activa":"Inactiva"}),(0,b.jsx)(ao.Switch,{checked:a.active,onCheckedChange:()=>r(a.id,a.active)})]})]})]},a.id))})]})}var ar=a.i(97075);function as(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),{toast:k}=(0,am.useToast)(),[l,m]=(0,c.useState)({code:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",max_uses:"",active:!0,start_date:"",end_date:""});(0,c.useEffect)(()=>{n()},[]);let n=async()=>{let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("coupons").select("*").order("created_at",{ascending:!1});c?k({variant:"destructive",title:"Error al cargar cupones",description:c.message,duration:3e3}):d(b||[]),f(!1)},o=a=>{a?(h(a),m({code:a.code,description:a.description||"",discount_type:a.discount_percentage?"percentage":"amount",discount_percentage:a.discount_percentage?.toString()||"",discount_amount:a.discount_amount?.toString()||"",max_uses:a.max_uses?.toString()||"",active:a.active,start_date:a.start_date?a.start_date.split("T")[0]:"",end_date:a.end_date?a.end_date.split("T")[0]:""})):(h(null),m({code:"",description:"",discount_type:"percentage",discount_percentage:"",discount_amount:"",max_uses:"",active:!0,start_date:"",end_date:""})),j(!0)},p=async()=>{let a,b=(0,ai.createBrowserClient)(),c={code:l.code.toUpperCase(),description:l.description,max_uses:l.max_uses?parseInt(l.max_uses):null,active:l.active,start_date:l.start_date||null,end_date:l.end_date||null};"percentage"===l.discount_type?(c.discount_percentage=parseInt(l.discount_percentage),c.discount_amount=null):(c.discount_amount=parseFloat(l.discount_amount),c.discount_percentage=null),(a=g?(await b.from("coupons").update(c).eq("id",g.id)).error:(await b.from("coupons").insert([{...c,current_uses:0}])).error)?k({variant:"destructive",title:"Error al guardar cupón",description:a.message,duration:3e3}):(k({variant:"success",title:g?"Cupón actualizado":"Cupón creado",description:`El cup\xf3n ha sido ${g?"actualizado":"creado"} exitosamente`,duration:3e3}),j(!1),n())},q=async a=>{if(!confirm("¿Estás seguro de eliminar este cupón?"))return;let b=(0,ai.createBrowserClient)(),{error:c}=await b.from("coupons").delete().eq("id",a);c?k({variant:"destructive",title:"Error al eliminar cupón",description:c.message,duration:3e3}):(k({variant:"success",title:"Cupón eliminado",description:"El cupón ha sido eliminado exitosamente",duration:3e3}),n())},r=async(a,b)=>{let c=(0,ai.createBrowserClient)(),{error:d}=await c.from("coupons").update({active:!b}).eq("id",a);d?k({variant:"destructive",title:"Error",description:d.message,duration:3e3}):n()};return e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Cupones"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Crea códigos de descuento únicos para tus clientes"})]}),(0,b.jsxs)(ah.Dialog,{open:i,onOpenChange:j,children:[(0,b.jsx)(ah.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(X.Button,{onClick:()=>o(),className:"gap-2",children:[(0,b.jsx)(aj,{className:"h-4 w-4"}),"Nuevo Cupón"]})}),(0,b.jsxs)(ah.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:g?"Editar Cupón":"Nuevo Cupón"}),(0,b.jsx)(ah.DialogDescription,{children:g?"Modifica los detalles del cupón":"Crea un nuevo código de descuento"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-code",children:"Código del Cupón"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(ae.Input,{id:"coupon-code",value:l.code,onChange:a=>m({...l,code:a.target.value.toUpperCase()}),placeholder:"VERANO2024",className:"uppercase"}),(0,b.jsx)(X.Button,{type:"button",variant:"outline",onClick:()=>{let a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="";for(let c=0;c<8;c++)b+=a.charAt(Math.floor(Math.random()*a.length));m({...l,code:b})},children:"Generar"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-description",children:"Descripción"}),(0,b.jsx)(ag,{id:"coupon-description",value:l.description,onChange:a=>m({...l,description:a.target.value}),placeholder:"Descripción del cupón",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(af.Label,{children:"Tipo de Descuento"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"coupon_discount_type",value:"percentage",checked:"percentage"===l.discount_type,onChange:a=>m({...l,discount_type:a.target.value}),className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Porcentaje (%)"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"coupon_discount_type",value:"amount",checked:"amount"===l.discount_type,onChange:a=>m({...l,discount_type:a.target.value}),className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Monto Fijo (S/)"})]})]})]}),"percentage"===l.discount_type?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-discount-percentage",children:"Porcentaje de Descuento"}),(0,b.jsx)(ae.Input,{id:"coupon-discount-percentage",type:"number",min:"0",max:"100",value:l.discount_percentage,onChange:a=>m({...l,discount_percentage:a.target.value}),placeholder:"20"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-discount-amount",children:"Monto de Descuento (S/)"}),(0,b.jsx)(ae.Input,{id:"coupon-discount-amount",type:"number",step:"0.01",value:l.discount_amount,onChange:a=>m({...l,discount_amount:a.target.value}),placeholder:"10.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"max-uses",children:"Usos Máximos (opcional)"}),(0,b.jsx)(ae.Input,{id:"max-uses",type:"number",min:"1",value:l.max_uses,onChange:a=>m({...l,max_uses:a.target.value}),placeholder:"Ilimitado"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-start-date",children:"Fecha de Inicio"}),(0,b.jsx)(ae.Input,{id:"coupon-start-date",type:"date",value:l.start_date,onChange:a=>m({...l,start_date:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-end-date",children:"Fecha de Fin"}),(0,b.jsx)(ae.Input,{id:"coupon-end-date",type:"date",value:l.end_date,onChange:a=>m({...l,end_date:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(af.Label,{htmlFor:"coupon-active-switch",children:"Activar Cupón"}),(0,b.jsx)(ao.Switch,{id:"coupon-active-switch",checked:l.active,onCheckedChange:a=>m({...l,active:a})})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),(0,b.jsxs)(X.Button,{onClick:p,children:[g?"Actualizar":"Crear"," Cupón"]})]})]})]})]})]}),(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsxs)(ad.Card,{className:`hover:shadow-lg transition-shadow ${!a.active?"opacity-60":""}`,children:[(0,b.jsx)(ad.CardHeader,{children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(ad.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(_,{className:"h-5 w-5 text-green-500"}),(0,b.jsx)("code",{className:"text-lg font-mono bg-slate-100 px-2 py-1 rounded",children:a.code}),(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>{var b;return b=a.code,void(navigator.clipboard.writeText(b),k({variant:"success",title:"Código copiado",description:`El c\xf3digo ${b} ha sido copiado al portapapeles`,duration:3e3}))},children:(0,b.jsx)(ar.Copy,{className:"h-3 w-3"})})]}),(0,b.jsx)(ad.CardDescription,{className:"mt-2",children:a.description})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",onClick:()=>o(a),children:(0,b.jsx)(ak,{className:"h-4 w-4"})}),(0,b.jsx)(X.Button,{size:"icon",variant:"ghost",onClick:()=>q(a.id),children:(0,b.jsx)(al.Trash2,{className:"h-4 w-4 text-red-500"})})]})]})}),(0,b.jsxs)(ad.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-green-600",children:a.discount_percentage?`${a.discount_percentage}%`:`S/ ${a.discount_amount?.toFixed(2)}`}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"de descuento"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[a.max_uses&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Usos:"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.current_uses," / ",a.max_uses]})]}),(a.start_date||a.end_date)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(ap.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a.start_date&&new Date(a.start_date).toLocaleDateString(),a.start_date&&a.end_date&&" - ",a.end_date&&new Date(a.end_date).toLocaleDateString()]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a.active?"Activo":"Inactivo"}),(0,b.jsx)(ao.Switch,{checked:a.active,onCheckedChange:()=>r(a.id,a.active)})]})]})]},a.id))})]})}var at=a.i(7961);let au=(0,a.i(26249).cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function av({className:a,variant:c,asChild:d=!1,...e}){let f=d?at.Slot:"span";return(0,b.jsx)(f,{"data-slot":"badge",className:(0,S.cn)(au({variant:c}),a),...e})}function aw({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,S.cn)("w-full caption-bottom text-sm",a),...c})})}function ax({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,S.cn)("[&_tr]:border-b",a),...c})}function ay({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,S.cn)("[&_tr:last-child]:border-0",a),...c})}function az({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,S.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function aA({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,S.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function aB({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,S.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}var aC=a.i(96270),aD=a.i(15011),aE=a.i(17151),aF=a.i(26168),aG=a.i(60148),aH=a.i(63287),aI=a.i(99560),aJ=["Enter"," "],aK=["ArrowUp","PageDown","End"],aL=["ArrowDown","PageUp","Home",...aK],aM={ltr:[...aJ,"ArrowRight"],rtl:[...aJ,"ArrowLeft"]},aN={ltr:["ArrowLeft"],rtl:["ArrowRight"]},aO="Menu",[aP,aQ,aR]=(0,f.createCollection)(aO),[aS,aT]=(0,e.createContextScope)(aO,[aR,aF.createPopperScope,t]),aU=(0,aF.createPopperScope)(),aV=t(),[aW,aX]=aS(aO),[aY,aZ]=aS(aO),a$=a=>{let{__scopeMenu:d,open:e=!1,children:f,dir:g,onOpenChange:h,modal:i=!0}=a,k=aU(d),[m,n]=c.useState(null),o=c.useRef(!1),p=(0,j.useCallbackRef)(h),q=(0,l.useDirection)(g);return c.useEffect(()=>{let a=()=>{o.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>o.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,b.jsx)(aF.Root,{...k,children:(0,b.jsx)(aW,{scope:d,open:e,onOpenChange:p,content:m,onContentChange:n,children:(0,b.jsx)(aY,{scope:d,onClose:c.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:o,dir:q,modal:i,children:f})})})};a$.displayName=aO;var a_=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a,f=aU(d);return(0,b.jsx)(aF.Anchor,{...f,...e,ref:c})});a_.displayName="MenuAnchor";var a0="MenuPortal",[a1,a2]=aS(a0,{forceMount:void 0}),a3=a=>{let{__scopeMenu:c,forceMount:d,children:e,container:f}=a,g=aX(a0,c);return(0,b.jsx)(a1,{scope:c,forceMount:d,children:(0,b.jsx)(C.Presence,{present:d||g.open,children:(0,b.jsx)(aG.Portal,{asChild:!0,container:f,children:e})})})};a3.displayName=a0;var a4="MenuContent",[a5,a6]=aS(a4),a7=c.forwardRef((a,c)=>{let d=a2(a4,a.__scopeMenu),{forceMount:e=d.forceMount,...f}=a,g=aX(a4,a.__scopeMenu),h=aZ(a4,a.__scopeMenu);return(0,b.jsx)(aP.Provider,{scope:a.__scopeMenu,children:(0,b.jsx)(C.Presence,{present:e||g.open,children:(0,b.jsx)(aP.Slot,{scope:a.__scopeMenu,children:h.modal?(0,b.jsx)(a8,{...f,ref:c}):(0,b.jsx)(a9,{...f,ref:c})})})})}),a8=c.forwardRef((a,e)=>{let f=aX(a4,a.__scopeMenu),h=c.useRef(null),i=(0,g.useComposedRefs)(e,h);return c.useEffect(()=>{let a=h.current;if(a)return(0,aH.hideOthers)(a)},[]),(0,b.jsx)(ba,{...a,ref:i,trapFocus:f.open,disableOutsidePointerEvents:f.open,disableOutsideScroll:!0,onFocusOutside:(0,d.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>f.onOpenChange(!1)})}),a9=c.forwardRef((a,c)=>{let d=aX(a4,a.__scopeMenu);return(0,b.jsx)(ba,{...a,ref:c,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>d.onOpenChange(!1)})}),ba=c.forwardRef((a,e)=>{let{__scopeMenu:f,loop:h=!1,trapFocus:i,onOpenAutoFocus:j,onCloseAutoFocus:k,disableOutsidePointerEvents:l,onEntryFocus:m,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:p,onInteractOutside:q,onDismiss:r,disableOutsideScroll:s,...t}=a,u=aX(a4,f),v=aZ(a4,f),x=aU(f),y=aV(f),z=aQ(f),[A,B]=c.useState(null),C=c.useRef(null),D=(0,g.useComposedRefs)(e,C,u.onContentChange),E=c.useRef(0),F=c.useRef(""),G=c.useRef(0),H=c.useRef(null),I=c.useRef("right"),J=c.useRef(0),K=s?aI.RemoveScroll:c.Fragment,L=s?{as:at.Slot,allowPinchZoom:!0}:void 0;c.useEffect(()=>()=>window.clearTimeout(E.current),[]),(0,aD.useFocusGuards)();let M=c.useCallback(a=>{var b,c;return I.current===H.current?.side&&(b=a,!!(c=H.current?.area)&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a].x,h=b[a].y,i=b[f].x,j=b[f].y;h>d!=j>d&&c<(i-g)*(d-h)/(j-h)+g&&(e=!e)}return e}({x:b.clientX,y:b.clientY},c))},[]);return(0,b.jsx)(a5,{scope:f,searchRef:F,onItemEnter:c.useCallback(a=>{M(a)&&a.preventDefault()},[M]),onItemLeave:c.useCallback(a=>{M(a)||(C.current?.focus(),B(null))},[M]),onTriggerLeave:c.useCallback(a=>{M(a)&&a.preventDefault()},[M]),pointerGraceTimerRef:G,onPointerGraceIntentChange:c.useCallback(a=>{H.current=a},[]),children:(0,b.jsx)(K,{...L,children:(0,b.jsx)(aE.FocusScope,{asChild:!0,trapped:i,onMountAutoFocus:(0,d.composeEventHandlers)(j,a=>{a.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:k,children:(0,b.jsx)(aC.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:p,onInteractOutside:q,onDismiss:r,children:(0,b.jsx)(w,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:h,currentTabStopId:A,onCurrentTabStopIdChange:B,onEntryFocus:(0,d.composeEventHandlers)(m,a=>{v.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,b.jsx)(aF.Content,{role:"menu","aria-orientation":"vertical","data-state":bA(u.open),"data-radix-menu-content":"",dir:v.dir,...x,...t,ref:D,style:{outline:"none",...t.style},onKeyDown:(0,d.composeEventHandlers)(t.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;if(b){var e;let b,f,g,h,i,j;"Tab"===a.key&&a.preventDefault(),!c&&d&&(e=a.key,b=F.current+e,f=z().filter(a=>!a.disabled),g=document.activeElement,h=f.find(a=>a.ref.current===g)?.textValue,i=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(f.map(a=>a.textValue),b,h),j=f.find(a=>a.textValue===i)?.ref.current,function a(b){F.current=b,window.clearTimeout(E.current),""!==b&&(E.current=window.setTimeout(()=>a(""),1e3))}(b),j&&setTimeout(()=>j.focus()))}let f=C.current;if(a.target!==f||!aL.includes(a.key))return;a.preventDefault();let g=z().filter(a=>!a.disabled).map(a=>a.ref.current);aK.includes(a.key)&&g.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(g)}),onBlur:(0,d.composeEventHandlers)(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(E.current),F.current="")}),onPointerMove:(0,d.composeEventHandlers)(a.onPointerMove,bD(a=>{let b=a.target,c=J.current!==a.clientX;a.currentTarget.contains(b)&&c&&(I.current=a.clientX>J.current?"right":"left",J.current=a.clientX)}))})})})})})})});a7.displayName=a4;var bb=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a;return(0,b.jsx)(i.Primitive.div,{role:"group",...e,ref:c})});bb.displayName="MenuGroup";var bc=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a;return(0,b.jsx)(i.Primitive.div,{...e,ref:c})});bc.displayName="MenuLabel";var bd="MenuItem",be="menu.itemSelect",bf=c.forwardRef((a,e)=>{let{disabled:f=!1,onSelect:h,...j}=a,k=c.useRef(null),l=aZ(bd,a.__scopeMenu),m=a6(bd,a.__scopeMenu),n=(0,g.useComposedRefs)(e,k),o=c.useRef(!1);return(0,b.jsx)(bg,{...j,ref:n,disabled:f,onClick:(0,d.composeEventHandlers)(a.onClick,()=>{let a=k.current;if(!f&&a){let b=new CustomEvent(be,{bubbles:!0,cancelable:!0});a.addEventListener(be,a=>h?.(a),{once:!0}),(0,i.dispatchDiscreteCustomEvent)(a,b),b.defaultPrevented?o.current=!1:l.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),o.current=!0},onPointerUp:(0,d.composeEventHandlers)(a.onPointerUp,a=>{o.current||a.currentTarget?.click()}),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{let b=""!==m.searchRef.current;f||b&&" "===a.key||aJ.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});bf.displayName=bd;var bg=c.forwardRef((a,e)=>{let{__scopeMenu:f,disabled:h=!1,textValue:j,...k}=a,l=a6(bd,f),m=aV(f),n=c.useRef(null),o=(0,g.useComposedRefs)(e,n),[p,q]=c.useState(!1),[r,s]=c.useState("");return c.useEffect(()=>{let a=n.current;a&&s((a.textContent??"").trim())},[k.children]),(0,b.jsx)(aP.ItemSlot,{scope:f,disabled:h,textValue:j??r,children:(0,b.jsx)(z,{asChild:!0,...m,focusable:!h,children:(0,b.jsx)(i.Primitive.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":h||void 0,"data-disabled":h?"":void 0,...k,ref:o,onPointerMove:(0,d.composeEventHandlers)(a.onPointerMove,bD(a=>{h?l.onItemLeave(a):(l.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,d.composeEventHandlers)(a.onPointerLeave,bD(a=>l.onItemLeave(a))),onFocus:(0,d.composeEventHandlers)(a.onFocus,()=>q(!0)),onBlur:(0,d.composeEventHandlers)(a.onBlur,()=>q(!1))})})})}),bh=c.forwardRef((a,c)=>{let{checked:e=!1,onCheckedChange:f,...g}=a;return(0,b.jsx)(bp,{scope:a.__scopeMenu,checked:e,children:(0,b.jsx)(bf,{role:"menuitemcheckbox","aria-checked":bB(e)?"mixed":e,...g,ref:c,"data-state":bC(e),onSelect:(0,d.composeEventHandlers)(g.onSelect,()=>f?.(!!bB(e)||!e),{checkForDefaultPrevented:!1})})})});bh.displayName="MenuCheckboxItem";var bi="MenuRadioGroup",[bj,bk]=aS(bi,{value:void 0,onValueChange:()=>{}}),bl=c.forwardRef((a,c)=>{let{value:d,onValueChange:e,...f}=a,g=(0,j.useCallbackRef)(e);return(0,b.jsx)(bj,{scope:a.__scopeMenu,value:d,onValueChange:g,children:(0,b.jsx)(bb,{...f,ref:c})})});bl.displayName=bi;var bm="MenuRadioItem",bn=c.forwardRef((a,c)=>{let{value:e,...f}=a,g=bk(bm,a.__scopeMenu),h=e===g.value;return(0,b.jsx)(bp,{scope:a.__scopeMenu,checked:h,children:(0,b.jsx)(bf,{role:"menuitemradio","aria-checked":h,...f,ref:c,"data-state":bC(h),onSelect:(0,d.composeEventHandlers)(f.onSelect,()=>g.onValueChange?.(e),{checkForDefaultPrevented:!1})})})});bn.displayName=bm;var bo="MenuItemIndicator",[bp,bq]=aS(bo,{checked:!1}),br=c.forwardRef((a,c)=>{let{__scopeMenu:d,forceMount:e,...f}=a,g=bq(bo,d);return(0,b.jsx)(C.Presence,{present:e||bB(g.checked)||!0===g.checked,children:(0,b.jsx)(i.Primitive.span,{...f,ref:c,"data-state":bC(g.checked)})})});br.displayName=bo;var bs=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a;return(0,b.jsx)(i.Primitive.div,{role:"separator","aria-orientation":"horizontal",...e,ref:c})});bs.displayName="MenuSeparator";var bt=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a,f=aU(d);return(0,b.jsx)(aF.Arrow,{...f,...e,ref:c})});bt.displayName="MenuArrow";var[bu,bv]=aS("MenuSub"),bw="MenuSubTrigger",bx=c.forwardRef((a,e)=>{let f=aX(bw,a.__scopeMenu),h=aZ(bw,a.__scopeMenu),i=bv(bw,a.__scopeMenu),j=a6(bw,a.__scopeMenu),k=c.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:m}=j,n={__scopeMenu:a.__scopeMenu},o=c.useCallback(()=>{k.current&&window.clearTimeout(k.current),k.current=null},[]);return c.useEffect(()=>o,[o]),c.useEffect(()=>{let a=l.current;return()=>{window.clearTimeout(a),m(null)}},[l,m]),(0,b.jsx)(a_,{asChild:!0,...n,children:(0,b.jsx)(bg,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":i.contentId,"data-state":bA(f.open),...a,ref:(0,g.composeRefs)(e,i.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),f.open||f.onOpenChange(!0))},onPointerMove:(0,d.composeEventHandlers)(a.onPointerMove,bD(b=>{j.onItemEnter(b),!b.defaultPrevented&&(a.disabled||f.open||k.current||(j.onPointerGraceIntentChange(null),k.current=window.setTimeout(()=>{f.onOpenChange(!0),o()},100)))})),onPointerLeave:(0,d.composeEventHandlers)(a.onPointerLeave,bD(a=>{o();let b=f.content?.getBoundingClientRect();if(b){let c=f.content?.dataset.side,d="right"===c,e=b[d?"left":"right"],g=b[d?"right":"left"];j.onPointerGraceIntentChange({area:[{x:a.clientX+(d?-5:5),y:a.clientY},{x:e,y:b.top},{x:g,y:b.top},{x:g,y:b.bottom},{x:e,y:b.bottom}],side:c}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>j.onPointerGraceIntentChange(null),300)}else{if(j.onTriggerLeave(a),a.defaultPrevented)return;j.onPointerGraceIntentChange(null)}})),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,b=>{let c=""!==j.searchRef.current;a.disabled||c&&" "===b.key||aM[h.dir].includes(b.key)&&(f.onOpenChange(!0),f.content?.focus(),b.preventDefault())})})})});bx.displayName=bw;var by="MenuSubContent",bz=c.forwardRef((a,e)=>{let f=a2(a4,a.__scopeMenu),{forceMount:h=f.forceMount,...i}=a,j=aX(a4,a.__scopeMenu),k=aZ(a4,a.__scopeMenu),l=bv(by,a.__scopeMenu),m=c.useRef(null),n=(0,g.useComposedRefs)(e,m);return(0,b.jsx)(aP.Provider,{scope:a.__scopeMenu,children:(0,b.jsx)(C.Presence,{present:h||j.open,children:(0,b.jsx)(aP.Slot,{scope:a.__scopeMenu,children:(0,b.jsx)(ba,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:n,align:"start",side:"rtl"===k.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{k.isUsingKeyboardRef.current&&m.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:(0,d.composeEventHandlers)(a.onFocusOutside,a=>{a.target!==l.trigger&&j.onOpenChange(!1)}),onEscapeKeyDown:(0,d.composeEventHandlers)(a.onEscapeKeyDown,a=>{k.onClose(),a.preventDefault()}),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=aN[k.dir].includes(a.key);b&&c&&(j.onOpenChange(!1),l.trigger?.focus(),a.preventDefault())})})})})})});function bA(a){return a?"open":"closed"}function bB(a){return"indeterminate"===a}function bC(a){return bB(a)?"indeterminate":a?"checked":"unchecked"}function bD(a){return b=>"mouse"===b.pointerType?a(b):void 0}bz.displayName=by;var bE="DropdownMenu",[bF,bG]=(0,e.createContextScope)(bE,[aT]),bH=aT(),[bI,bJ]=bF(bE),bK=a=>{let{__scopeDropdownMenu:d,children:e,dir:f,open:g,defaultOpen:i,onOpenChange:j,modal:l=!0}=a,m=bH(d),n=c.useRef(null),[o=!1,p]=(0,k.useControllableState)({prop:g,defaultProp:i,onChange:j});return(0,b.jsx)(bI,{scope:d,triggerId:(0,h.useId)(),triggerRef:n,contentId:(0,h.useId)(),open:o,onOpenChange:p,onOpenToggle:c.useCallback(()=>p(a=>!a),[p]),modal:l,children:(0,b.jsx)(a$,{...m,open:o,onOpenChange:p,dir:f,modal:l,children:e})})};bK.displayName=bE;var bL="DropdownMenuTrigger",bM=c.forwardRef((a,c)=>{let{__scopeDropdownMenu:e,disabled:f=!1,...h}=a,j=bJ(bL,e),k=bH(e);return(0,b.jsx)(a_,{asChild:!0,...k,children:(0,b.jsx)(i.Primitive.button,{type:"button",id:j.triggerId,"aria-haspopup":"menu","aria-expanded":j.open,"aria-controls":j.open?j.contentId:void 0,"data-state":j.open?"open":"closed","data-disabled":f?"":void 0,disabled:f,...h,ref:(0,g.composeRefs)(c,j.triggerRef),onPointerDown:(0,d.composeEventHandlers)(a.onPointerDown,a=>{!f&&0===a.button&&!1===a.ctrlKey&&(j.onOpenToggle(),j.open||a.preventDefault())}),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{!f&&(["Enter"," "].includes(a.key)&&j.onOpenToggle(),"ArrowDown"===a.key&&j.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});bM.displayName=bL;var bN=a=>{let{__scopeDropdownMenu:c,...d}=a,e=bH(c);return(0,b.jsx)(a3,{...e,...d})};bN.displayName="DropdownMenuPortal";var bO="DropdownMenuContent",bP=c.forwardRef((a,e)=>{let{__scopeDropdownMenu:f,...g}=a,h=bJ(bO,f),i=bH(f),j=c.useRef(!1);return(0,b.jsx)(a7,{id:h.contentId,"aria-labelledby":h.triggerId,...i,...g,ref:e,onCloseAutoFocus:(0,d.composeEventHandlers)(a.onCloseAutoFocus,a=>{j.current||h.triggerRef.current?.focus(),j.current=!1,a.preventDefault()}),onInteractOutside:(0,d.composeEventHandlers)(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!h.modal||d)&&(j.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bP.displayName=bO,c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bb,{...f,...e,ref:c})}).displayName="DropdownMenuGroup";var bQ=c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bc,{...f,...e,ref:c})});bQ.displayName="DropdownMenuLabel";var bR=c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bf,{...f,...e,ref:c})});bR.displayName="DropdownMenuItem",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bh,{...f,...e,ref:c})}).displayName="DropdownMenuCheckboxItem",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bl,{...f,...e,ref:c})}).displayName="DropdownMenuRadioGroup",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bn,{...f,...e,ref:c})}).displayName="DropdownMenuRadioItem",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(br,{...f,...e,ref:c})}).displayName="DropdownMenuItemIndicator";var bS=c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bs,{...f,...e,ref:c})});bS.displayName="DropdownMenuSeparator",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bt,{...f,...e,ref:c})}).displayName="DropdownMenuArrow",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bx,{...f,...e,ref:c})}).displayName="DropdownMenuSubTrigger",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bH(d);return(0,b.jsx)(bz,{...f,...e,ref:c,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent";var bT=a.i(2265);function bU({...a}){return(0,b.jsx)(bK,{"data-slot":"dropdown-menu",...a})}function bV({...a}){return(0,b.jsx)(bM,{"data-slot":"dropdown-menu-trigger",...a})}function bW({className:a,sideOffset:c=4,...d}){return(0,b.jsx)(bN,{children:(0,b.jsx)(bP,{"data-slot":"dropdown-menu-content",sideOffset:c,className:(0,S.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...d})})}function bX({className:a,inset:c,variant:d="default",...e}){return(0,b.jsx)(bR,{"data-slot":"dropdown-menu-item","data-inset":c,"data-variant":d,className:(0,S.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...e})}function bY({className:a,inset:c,...d}){return(0,b.jsx)(bQ,{"data-slot":"dropdown-menu-label","data-inset":c,className:(0,S.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",a),...d})}function bZ({className:a,...c}){return(0,b.jsx)(bS,{"data-slot":"dropdown-menu-separator",className:(0,S.cn)("bg-border -mx-1 my-1 h-px",a),...c})}a.i(90505),(0,Y.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var b$=a.i(3177);let b_=(0,Y.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),b0=(0,Y.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var b1=a.i(95610),b2=a.i(19259),b3=a.i(66843),b4=a.i(73050);let b5=(0,Y.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var b6=a.i(84885),b7=a.i(27709),b8=a.i(74288),b9=a.i(27992),ca=a.i(26999),cb=a.i(22299),cc=a.i(79509),cd="Checkbox",[ce,cf]=(0,e.createContextScope)(cd),[cg,ch]=ce(cd),ci=c.forwardRef((a,e)=>{let{__scopeCheckbox:f,name:h,checked:j,defaultChecked:l,required:m,disabled:n,value:o="on",onCheckedChange:p,form:q,...r}=a,[s,t]=c.useState(null),u=(0,g.useComposedRefs)(e,a=>t(a)),v=c.useRef(!1),w=!s||q||!!s.closest("form"),[x=!1,y]=(0,k.useControllableState)({prop:j,defaultProp:l,onChange:p}),z=c.useRef(x);return c.useEffect(()=>{let a=s?.form;if(a){let b=()=>y(z.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[s,y]),(0,b.jsxs)(cg,{scope:f,state:x,disabled:n,children:[(0,b.jsx)(i.Primitive.button,{type:"button",role:"checkbox","aria-checked":cm(x)?"mixed":x,"aria-required":m,"data-state":cn(x),"data-disabled":n?"":void 0,disabled:n,value:o,...r,ref:u,onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,d.composeEventHandlers)(a.onClick,a=>{y(a=>!!cm(a)||!a),w&&(v.current=a.isPropagationStopped(),v.current||a.stopPropagation())})}),w&&(0,b.jsx)(cl,{control:s,bubbles:!v.current,name:h,value:o,checked:x,required:m,disabled:n,form:q,style:{transform:"translateX(-100%)"},defaultChecked:!cm(l)&&l})]})});ci.displayName=cd;var cj="CheckboxIndicator",ck=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=ch(cj,d);return(0,b.jsx)(C.Presence,{present:e||cm(g.state)||!0===g.state,children:(0,b.jsx)(i.Primitive.span,{"data-state":cn(g.state),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});ck.displayName=cj;var cl=a=>{let{control:d,checked:e,bubbles:f=!0,defaultChecked:g,...h}=a,i=c.useRef(null),j=(0,cb.usePrevious)(e),k=(0,cc.useSize)(d);c.useEffect(()=>{let a=i.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==e&&b){let c=new Event("click",{bubbles:f});a.indeterminate=cm(e),b.call(a,!cm(e)&&e),a.dispatchEvent(c)}},[j,e,f]);let l=c.useRef(!cm(e)&&e);return(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g??l.current,...h,tabIndex:-1,ref:i,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function cm(a){return"indeterminate"===a}function cn(a){return cm(a)?"indeterminate":a?"checked":"unchecked"}function co({className:a,...c}){return(0,b.jsx)(ci,{"data-slot":"checkbox",className:(0,S.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(ck,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,b.jsx)(bT.CheckIcon,{className:"size-3.5"})})})}let cp={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function cq(a){return (b={})=>{let c=b.width?String(b.width):a.defaultWidth;return a.formats[c]||a.formats[a.defaultWidth]}}let cr={date:cq({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:cq({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:cq({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},cs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ct(a){return(b,c)=>{let d;if("formatting"===(c?.context?String(c.context):"standalone")&&a.formattingValues){let b=a.defaultFormattingWidth||a.defaultWidth,e=c?.width?String(c.width):b;d=a.formattingValues[e]||a.formattingValues[b]}else{let b=a.defaultWidth,e=c?.width?String(c.width):a.defaultWidth;d=a.values[e]||a.values[b]}return d[a.argumentCallback?a.argumentCallback(b):b]}}function cu(a){return(b,c={})=>{let d,e=c.width,f=e&&a.matchPatterns[e]||a.matchPatterns[a.defaultMatchWidth],g=b.match(f);if(!g)return null;let h=g[0],i=e&&a.parsePatterns[e]||a.parsePatterns[a.defaultParseWidth],j=Array.isArray(i)?function(a,b){for(let c=0;c<a.length;c++)if(b(a[c]))return c}(i,a=>a.test(h)):function(a,b){for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&b(a[c]))return c}(i,a=>a.test(h));return d=a.valueCallback?a.valueCallback(j):j,{value:d=c.valueCallback?c.valueCallback(d):d,rest:b.slice(h.length)}}}function cv(a){return(b,c={})=>{let d=b.match(a.matchPattern);if(!d)return null;let e=d[0],f=b.match(a.parsePattern);if(!f)return null;let g=a.valueCallback?a.valueCallback(f[0]):f[0];return{value:g=c.valueCallback?c.valueCallback(g):g,rest:b.slice(e.length)}}}let cw={code:"en-US",formatDistance:(a,b,c)=>{let d,e=cp[a];if(d="string"==typeof e?e:1===b?e.one:e.other.replace("{{count}}",b.toString()),c?.addSuffix)if(c.comparison&&c.comparison>0)return"in "+d;else return d+" ago";return d},formatLong:cr,formatRelative:(a,b,c,d)=>cs[a],localize:{ordinalNumber:(a,b)=>{let c=Number(a),d=c%100;if(d>20||d<10)switch(d%10){case 1:return c+"st";case 2:return c+"nd";case 3:return c+"rd"}return c+"th"},era:ct({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ct({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:a=>a-1}),month:ct({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ct({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ct({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:cv({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:a=>parseInt(a,10)}),era:cu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:cu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:cu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:cu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:cu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},cx={},cy=Symbol.for("constructDateFrom");function cz(a,b){return"function"==typeof a?a(b):a&&"object"==typeof a&&cy in a?a[cy](b):a instanceof Date?new a.constructor(b):new Date(b)}function cA(a,b){return cz(b||a,a)}function cB(a){let b=cA(a),c=new Date(Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()));return c.setUTCFullYear(b.getFullYear()),a-c}function cC(a,b){let c=cA(a,b?.in);return c.setHours(0,0,0,0),c}function cD(a,b){let c=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??cx.weekStartsOn??cx.locale?.options?.weekStartsOn??0,d=cA(a,b?.in),e=d.getDay();return d.setDate(d.getDate()-(7*(e<c)+e-c)),d.setHours(0,0,0,0),d}function cE(a,b){return cD(a,{...b,weekStartsOn:1})}function cF(a,b){let c=cA(a,b?.in),d=c.getFullYear(),e=cz(c,0);e.setFullYear(d+1,0,4),e.setHours(0,0,0,0);let f=cE(e),g=cz(c,0);g.setFullYear(d,0,4),g.setHours(0,0,0,0);let h=cE(g);return c.getTime()>=f.getTime()?d+1:c.getTime()>=h.getTime()?d:d-1}function cG(a,b){let c=cA(a,b?.in),d=c.getFullYear(),e=b?.firstWeekContainsDate??b?.locale?.options?.firstWeekContainsDate??cx.firstWeekContainsDate??cx.locale?.options?.firstWeekContainsDate??1,f=cz(b?.in||a,0);f.setFullYear(d+1,0,e),f.setHours(0,0,0,0);let g=cD(f,b),h=cz(b?.in||a,0);h.setFullYear(d,0,e),h.setHours(0,0,0,0);let i=cD(h,b);return+c>=+g?d+1:+c>=+i?d:d-1}function cH(a,b){let c=Math.abs(a).toString().padStart(b,"0");return(a<0?"-":"")+c}let cI={y(a,b){let c=a.getFullYear(),d=c>0?c:1-c;return cH("yy"===b?d%100:d,b.length)},M(a,b){let c=a.getMonth();return"M"===b?String(c+1):cH(c+1,2)},d:(a,b)=>cH(a.getDate(),b.length),a(a,b){let c=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.toUpperCase();case"aaa":return c;case"aaaaa":return c[0];default:return"am"===c?"a.m.":"p.m."}},h:(a,b)=>cH(a.getHours()%12||12,b.length),H:(a,b)=>cH(a.getHours(),b.length),m:(a,b)=>cH(a.getMinutes(),b.length),s:(a,b)=>cH(a.getSeconds(),b.length),S(a,b){let c=b.length;return cH(Math.trunc(a.getMilliseconds()*Math.pow(10,c-3)),b.length)}},cJ={G:function(a,b,c){let d=+(a.getFullYear()>0);switch(b){case"G":case"GG":case"GGG":return c.era(d,{width:"abbreviated"});case"GGGGG":return c.era(d,{width:"narrow"});default:return c.era(d,{width:"wide"})}},y:function(a,b,c){if("yo"===b){let b=a.getFullYear();return c.ordinalNumber(b>0?b:1-b,{unit:"year"})}return cI.y(a,b)},Y:function(a,b,c,d){let e=cG(a,d),f=e>0?e:1-e;return"YY"===b?cH(f%100,2):"Yo"===b?c.ordinalNumber(f,{unit:"year"}):cH(f,b.length)},R:function(a,b){return cH(cF(a),b.length)},u:function(a,b){return cH(a.getFullYear(),b.length)},Q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"Q":return String(d);case"QQ":return cH(d,2);case"Qo":return c.ordinalNumber(d,{unit:"quarter"});case"QQQ":return c.quarter(d,{width:"abbreviated",context:"formatting"});case"QQQQQ":return c.quarter(d,{width:"narrow",context:"formatting"});default:return c.quarter(d,{width:"wide",context:"formatting"})}},q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"q":return String(d);case"qq":return cH(d,2);case"qo":return c.ordinalNumber(d,{unit:"quarter"});case"qqq":return c.quarter(d,{width:"abbreviated",context:"standalone"});case"qqqqq":return c.quarter(d,{width:"narrow",context:"standalone"});default:return c.quarter(d,{width:"wide",context:"standalone"})}},M:function(a,b,c){let d=a.getMonth();switch(b){case"M":case"MM":return cI.M(a,b);case"Mo":return c.ordinalNumber(d+1,{unit:"month"});case"MMM":return c.month(d,{width:"abbreviated",context:"formatting"});case"MMMMM":return c.month(d,{width:"narrow",context:"formatting"});default:return c.month(d,{width:"wide",context:"formatting"})}},L:function(a,b,c){let d=a.getMonth();switch(b){case"L":return String(d+1);case"LL":return cH(d+1,2);case"Lo":return c.ordinalNumber(d+1,{unit:"month"});case"LLL":return c.month(d,{width:"abbreviated",context:"standalone"});case"LLLLL":return c.month(d,{width:"narrow",context:"standalone"});default:return c.month(d,{width:"wide",context:"standalone"})}},w:function(a,b,c,d){let e,f,g,h,i=Math.round((cD(e=cA(a,d?.in),d)-(f=d?.firstWeekContainsDate??d?.locale?.options?.firstWeekContainsDate??cx.firstWeekContainsDate??cx.locale?.options?.firstWeekContainsDate??1,g=cG(e,d),(h=cz(d?.in||e,0)).setFullYear(g,0,f),h.setHours(0,0,0,0),cD(h,d)))/6048e5)+1;return"wo"===b?c.ordinalNumber(i,{unit:"week"}):cH(i,b.length)},I:function(a,b,c){let d,e,f,g=Math.round((cE(d=cA(a,void 0))-(e=cF(d,void 0),(f=cz(d,0)).setFullYear(e,0,4),f.setHours(0,0,0,0),cE(f)))/6048e5)+1;return"Io"===b?c.ordinalNumber(g,{unit:"week"}):cH(g,b.length)},d:function(a,b,c){return"do"===b?c.ordinalNumber(a.getDate(),{unit:"date"}):cI.d(a,b)},D:function(a,b,c){let d,e,f=function(a,b,c){let[d,e]=function(a,...b){let c=cz.bind(null,a||b.find(a=>"object"==typeof a));return b.map(c)}(void 0,a,b),f=cC(d),g=cC(e);return Math.round((f-cB(f)-(g-cB(g)))/864e5)}(d=cA(a,void 0),((e=cA(d,void 0)).setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e))+1;return"Do"===b?c.ordinalNumber(f,{unit:"dayOfYear"}):cH(f,b.length)},E:function(a,b,c){let d=a.getDay();switch(b){case"E":case"EE":case"EEE":return c.day(d,{width:"abbreviated",context:"formatting"});case"EEEEE":return c.day(d,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},e:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"e":return String(f);case"ee":return cH(f,2);case"eo":return c.ordinalNumber(f,{unit:"day"});case"eee":return c.day(e,{width:"abbreviated",context:"formatting"});case"eeeee":return c.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(e,{width:"short",context:"formatting"});default:return c.day(e,{width:"wide",context:"formatting"})}},c:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"c":return String(f);case"cc":return cH(f,b.length);case"co":return c.ordinalNumber(f,{unit:"day"});case"ccc":return c.day(e,{width:"abbreviated",context:"standalone"});case"ccccc":return c.day(e,{width:"narrow",context:"standalone"});case"cccccc":return c.day(e,{width:"short",context:"standalone"});default:return c.day(e,{width:"wide",context:"standalone"})}},i:function(a,b,c){let d=a.getDay(),e=0===d?7:d;switch(b){case"i":return String(e);case"ii":return cH(e,b.length);case"io":return c.ordinalNumber(e,{unit:"day"});case"iii":return c.day(d,{width:"abbreviated",context:"formatting"});case"iiiii":return c.day(d,{width:"narrow",context:"formatting"});case"iiiiii":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},a:function(a,b,c){let d=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(a,b,c){let d,e=a.getHours();switch(d=12===e?"noon":0===e?"midnight":e/12>=1?"pm":"am",b){case"b":case"bb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(a,b,c){let d,e=a.getHours();switch(d=e>=17?"evening":e>=12?"afternoon":e>=4?"morning":"night",b){case"B":case"BB":case"BBB":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(a,b,c){if("ho"===b){let b=a.getHours()%12;return 0===b&&(b=12),c.ordinalNumber(b,{unit:"hour"})}return cI.h(a,b)},H:function(a,b,c){return"Ho"===b?c.ordinalNumber(a.getHours(),{unit:"hour"}):cI.H(a,b)},K:function(a,b,c){let d=a.getHours()%12;return"Ko"===b?c.ordinalNumber(d,{unit:"hour"}):cH(d,b.length)},k:function(a,b,c){let d=a.getHours();return(0===d&&(d=24),"ko"===b)?c.ordinalNumber(d,{unit:"hour"}):cH(d,b.length)},m:function(a,b,c){return"mo"===b?c.ordinalNumber(a.getMinutes(),{unit:"minute"}):cI.m(a,b)},s:function(a,b,c){return"so"===b?c.ordinalNumber(a.getSeconds(),{unit:"second"}):cI.s(a,b)},S:function(a,b){return cI.S(a,b)},X:function(a,b,c){let d=a.getTimezoneOffset();if(0===d)return"Z";switch(b){case"X":return cL(d);case"XXXX":case"XX":return cM(d);default:return cM(d,":")}},x:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"x":return cL(d);case"xxxx":case"xx":return cM(d);default:return cM(d,":")}},O:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"O":case"OO":case"OOO":return"GMT"+cK(d,":");default:return"GMT"+cM(d,":")}},z:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"z":case"zz":case"zzz":return"GMT"+cK(d,":");default:return"GMT"+cM(d,":")}},t:function(a,b,c){return cH(Math.trunc(a/1e3),b.length)},T:function(a,b,c){return cH(+a,b.length)}};function cK(a,b=""){let c=a>0?"-":"+",d=Math.abs(a),e=Math.trunc(d/60),f=d%60;return 0===f?c+String(e):c+String(e)+b+cH(f,2)}function cL(a,b){return a%60==0?(a>0?"-":"+")+cH(Math.abs(a)/60,2):cM(a,b)}function cM(a,b=""){let c=Math.abs(a);return(a>0?"-":"+")+cH(Math.trunc(c/60),2)+b+cH(c%60,2)}let cN=(a,b)=>{switch(a){case"P":return b.date({width:"short"});case"PP":return b.date({width:"medium"});case"PPP":return b.date({width:"long"});default:return b.date({width:"full"})}},cO=(a,b)=>{switch(a){case"p":return b.time({width:"short"});case"pp":return b.time({width:"medium"});case"ppp":return b.time({width:"long"});default:return b.time({width:"full"})}},cP={p:cO,P:(a,b)=>{let c,d=a.match(/(P+)(p+)?/)||[],e=d[1],f=d[2];if(!f)return cN(a,b);switch(e){case"P":c=b.dateTime({width:"short"});break;case"PP":c=b.dateTime({width:"medium"});break;case"PPP":c=b.dateTime({width:"long"});break;default:c=b.dateTime({width:"full"})}return c.replace("{{date}}",cN(e,b)).replace("{{time}}",cO(f,b))}},cQ=/^D+$/,cR=/^Y+$/,cS=["D","DD","YY","YYYY"],cT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cV=/^'([^]*?)'?$/,cW=/''/g,cX=/[a-zA-Z]/;function cY(a,b,c){let d=c?.locale??cx.locale??cw,e=c?.firstWeekContainsDate??c?.locale?.options?.firstWeekContainsDate??cx.firstWeekContainsDate??cx.locale?.options?.firstWeekContainsDate??1,f=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??cx.weekStartsOn??cx.locale?.options?.weekStartsOn??0,g=cA(a,c?.in);if(!(g instanceof Date||"object"==typeof g&&"[object Date]"===Object.prototype.toString.call(g))&&"number"!=typeof g||isNaN(+cA(g)))throw RangeError("Invalid time value");let h=b.match(cU).map(a=>{let b=a[0];return"p"===b||"P"===b?(0,cP[b])(a,d.formatLong):a}).join("").match(cT).map(a=>{if("''"===a)return{isToken:!1,value:"'"};let b=a[0];if("'"===b){var c;let b;return{isToken:!1,value:(b=(c=a).match(cV))?b[1].replace(cW,"'"):c}}if(cJ[b])return{isToken:!0,value:a};if(b.match(cX))throw RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:a}});d.localize.preprocessor&&(h=d.localize.preprocessor(g,h));let i={firstWeekContainsDate:e,weekStartsOn:f,locale:d};return h.map(e=>{if(!e.isToken)return e.value;let f=e.value;return(!c?.useAdditionalWeekYearTokens&&cR.test(f)||!c?.useAdditionalDayOfYearTokens&&cQ.test(f))&&function(a,b,c){var d,e,f;let g,h=(d=a,e=b,f=c,g="Y"===d[0]?"years":"days of the month",`Use \`${d.toLowerCase()}\` instead of \`${d}\` (in \`${e}\`) for formatting ${g} to the input \`${f}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(h),cS.includes(a))throw RangeError(h)}(f,b,String(a)),(0,cJ[f[0]])(g,f,d.localize,i)}).join("")}let cZ={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},c$={date:cq({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:cq({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:cq({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},c_={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},c0={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},c1={code:"es",formatDistance:(a,b,c)=>{let d,e=cZ[a];if(d="string"==typeof e?e:1===b?e.one:e.other.replace("{{count}}",b.toString()),c?.addSuffix)if(c.comparison&&c.comparison>0)return"en "+d;else return"hace "+d;return d},formatLong:c$,formatRelative:(a,b,c,d)=>1!==b.getHours()?c0[a]:c_[a],localize:{ordinalNumber:(a,b)=>Number(a)+"º",era:ct({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},defaultWidth:"wide"}),quarter:ct({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:a=>Number(a)-1}),month:ct({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:ct({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},defaultWidth:"wide"}),dayPeriod:ct({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:cv({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(a){return parseInt(a,10)}}),era:cu({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:cu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:cu({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:cu({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:cu({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};var c2=a.i(26636),c3=(0,c2.createServerReference)("406180a501f2cec38b90065e6869c85164bc4f8f35",c2.callServer,void 0,c2.findSourceMapURL,"deleteUsers"),c4=(0,c2.createServerReference)("4055f5e515b19e983cd75d24bdb70cc170c476a2b2",c2.callServer,void 0,c2.findSourceMapURL,"createUser"),c5=(0,c2.createServerReference)("60452541bb342ec454b8c602739f72fe3559355b55",c2.callServer,void 0,c2.findSourceMapURL,"updateUserPassword"),c6=(0,c2.createServerReference)("400a6bbb7defd9ef61a2c3db3df5111735798e0794",c2.callServer,void 0,c2.findSourceMapURL,"createSubscription"),c7=a.i(86952),c8=a.i(34582),c9=a.i(72604);let da=(0,Y.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var db=a.i(13313);let dc=(0,Y.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function dd({user:a,isOpen:d,onClose:e,availablePlans:f,onUpdateProfile:g,onUpdateIptvCredentials:h,onUpdateSubscriptionDetails:i,onUpdateSubscriptionStatus:j,onCreateSubscription:k,onManualPasswordUpdate:l,onSendPasswordReset:m,userLogs:n,userInvoices:o,loadingLogs:p,loadingInvoices:q}){let[r,s]=(0,c.useState)("details"),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({first_name:"",last_name:"",email:"",whatsapp:""}),[x,y]=(0,c.useState)({username:"",password:""}),[z,A]=(0,c.useState)({plan_name:""}),[B,C]=(0,c.useState)({price:""}),[D,E]=(0,c.useState)({date:""}),[F,G]=(0,c.useState)("");(0,c.useEffect)(()=>{a&&(w({first_name:a.first_name||"",last_name:a.last_name||"",email:a.email||"",whatsapp:a.whatsapp||""}),y({username:a.credentials?.username||"",password:a.credentials?.password||""}),A({plan_name:a.subscription?.plan_name||""}),C({price:a.subscription?.price?.toString()||""}),E({date:a.subscription?.next_billing_date?new Date(a.subscription.next_billing_date).toISOString().split("T")[0]:""}),G(""))},[a]);let H=async()=>{if(a){u(!0);try{await g(a.id,v)}finally{u(!1)}}},I=async()=>{if(a){u(!0);try{await h(a.id,x)}finally{u(!1)}}},J=async()=>{if(a){u(!0);try{await i(a.id,{plan_name:z.plan_name,price:parseFloat(B.price)||0,next_billing_date:D.date})}finally{u(!1)}}},K=async()=>{if(a){u(!0);try{await k(a.id,{plan_name:z.plan_name,price:parseFloat(B.price)||0})}finally{u(!1)}}},L=async()=>{if(a){u(!0);try{await l(a.id,F),G("")}finally{u(!1)}}};return a?(0,b.jsx)(ah.Dialog,{open:d,onOpenChange:a=>!a&&e(),children:(0,b.jsxs)(ah.DialogContent,{className:"max-w-[95vw] sm:max-w-5xl h-[95vh] flex flex-col p-0",children:[(0,b.jsxs)(ah.DialogHeader,{className:"px-6 pt-6 pb-4 border-b",children:[(0,b.jsxs)(ah.DialogTitle,{className:"text-lg sm:text-xl",children:["Gestión de Cliente: ",`${a.first_name||""} ${a.last_name||""}`.trim()]}),(0,b.jsx)(ah.DialogDescription,{children:"Administra la cuenta, servicios y comunicaciones"})]}),(0,b.jsxs)(T,{value:r,onValueChange:s,className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 pt-4 pb-2",children:(0,b.jsx)("div",{className:"overflow-x-auto pb-2 -mx-6 px-6 md:mx-0 md:px-0 md:pb-0",children:(0,b.jsxs)(U,{className:"inline-flex h-auto w-auto p-1 min-w-full md:grid md:w-full md:grid-cols-4 gap-2",children:[(0,b.jsx)(V,{value:"details",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Detalles"}),(0,b.jsx)(V,{value:"billing",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Facturación"}),(0,b.jsx)(V,{value:"communications",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Comunicación"}),(0,b.jsx)(V,{value:"history",className:"px-4 py-2 text-xs sm:text-sm whitespace-nowrap",children:"Historial"})]})})}),(0,b.jsx)(W,{value:"details",className:"flex-1 overflow-y-auto px-6 py-4 mt-0",children:(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 pb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(b1.User,{className:"h-4 w-4"})," Información Personal"]}),(0,b.jsx)(ad.Card,{className:"bg-muted/30",children:(0,b.jsxs)(ad.CardContent,{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"first-name",className:"text-sm font-medium",children:"Nombre"}),(0,b.jsx)(ae.Input,{id:"first-name",value:v.first_name,onChange:a=>w({...v,first_name:a.target.value}),className:"h-9 bg-background",placeholder:"Nombre del cliente"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"last-name",className:"text-sm font-medium",children:"Apellido"}),(0,b.jsx)(ae.Input,{id:"last-name",value:v.last_name,onChange:a=>w({...v,last_name:a.target.value}),className:"h-9 bg-background",placeholder:"Apellido del cliente"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),(0,b.jsx)(ae.Input,{id:"email",type:"email",value:v.email,onChange:a=>w({...v,email:a.target.value}),className:"h-9 bg-background",placeholder:"correo@ejemplo.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"whatsapp",className:"text-sm font-medium",children:"WhatsApp"}),(0,b.jsx)(ae.Input,{id:"whatsapp",value:v.whatsapp,onChange:a=>w({...v,whatsapp:a.target.value}),className:"h-9 bg-background",placeholder:"+51 999 999 999"})]}),(0,b.jsxs)("div",{className:"pt-2 border-t space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Rol:"}),(0,b.jsx)(av,{variant:"outline",className:"capitalize",children:a.role})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Registro:"}),(0,b.jsx)("span",{className:"font-medium",children:a.created_at?cY(new Date(a.created_at),"dd/MM/yyyy",{locale:c1}):"-"})]})]}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsxs)(X.Button,{onClick:H,disabled:t,className:"w-full",size:"sm",children:[(0,b.jsx)(da,{className:"mr-2 h-4 w-4"})," Guardar Información Personal"]})})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(c8.Tv,{className:"h-4 w-4"})," Credenciales IPTV"]}),(0,b.jsx)(ad.Card,{className:"bg-muted/30",children:(0,b.jsxs)(ad.CardContent,{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Usuario IPTV"}),(0,b.jsx)(ae.Input,{value:x.username,onChange:a=>y({...x,username:a.target.value}),className:"bg-background",placeholder:"Usuario del servicio"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Contraseña IPTV"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(ae.Input,{value:x.password,onChange:a=>y({...x,password:a.target.value}),className:"bg-background",placeholder:"Contraseña del servicio"}),(0,b.jsx)(X.Button,{variant:"outline",size:"icon",onClick:()=>y({...x,password:"Temp"+Math.random().toString(36).slice(-8)}),children:(0,b.jsx)(b3.RefreshCw,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsxs)(X.Button,{onClick:I,disabled:t,className:"w-full",size:"sm",children:[(0,b.jsx)(da,{className:"mr-2 h-4 w-4"})," Actualizar Credenciales"]})})]})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(b6.CreditCard,{className:"h-4 w-4"})," Suscripción Actual"]}),(0,b.jsx)(ad.Card,{className:"bg-muted/30",children:(0,b.jsx)(ad.CardContent,{className:"p-4 space-y-4",children:a.subscription?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Plan"}),(0,b.jsxs)(b$.Select,{value:z.plan_name,onValueChange:a=>A({plan_name:a}),children:[(0,b.jsx)(b$.SelectTrigger,{className:"h-9 bg-background",children:(0,b.jsx)(b$.SelectValue,{placeholder:"Seleccionar plan"})}),(0,b.jsx)(b$.SelectContent,{children:f.map(a=>(0,b.jsx)(b$.SelectItem,{value:a.name,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Precio Mensual"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(b9.DollarSign,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),(0,b.jsx)(ae.Input,{type:"number",step:"0.01",value:B.price,onChange:a=>C({price:a.target.value}),className:"h-9 pl-7 bg-background"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Próximo Pago"}),(0,b.jsx)(ae.Input,{type:"date",value:D.date,onChange:a=>E({date:a.target.value}),className:"h-9 bg-background"})]}),(0,b.jsxs)(X.Button,{onClick:J,disabled:t,className:"w-full",size:"sm",children:[(0,b.jsx)(da,{className:"mr-2 h-4 w-4"})," Guardar Cambios de Suscripción"]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Estado de Suscripción"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(X.Button,{size:"sm",variant:"active"===a.subscription.status?"default":"outline",className:`h-8 flex-1 ${"active"===a.subscription.status?"bg-green-600 hover:bg-green-700":"text-green-600 border-green-200 hover:bg-green-50"}`,onClick:()=>j(a.id,"active"),disabled:t,children:"Activo"}),(0,b.jsx)(X.Button,{size:"sm",variant:"inactive"===a.subscription.status?"default":"outline",className:`h-8 flex-1 ${"inactive"===a.subscription.status?"bg-yellow-600 hover:bg-yellow-700":"text-yellow-600 border-yellow-200 hover:bg-yellow-50"}`,onClick:()=>j(a.id,"inactive"),disabled:t,children:"Inactivo"}),(0,b.jsx)(X.Button,{size:"sm",variant:"cancelled"===a.subscription.status?"default":"outline",className:`h-8 flex-1 ${"cancelled"===a.subscription.status?"bg-red-600 hover:bg-red-700":"text-red-600 border-red-200 hover:bg-red-50"}`,onClick:()=>j(a.id,"cancelled"),disabled:t,children:"Cancelado"})]})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"text-center py-4 text-muted-foreground border-b mb-4",children:[(0,b.jsx)(b6.CreditCard,{className:"h-8 w-8 mx-auto mb-2 opacity-20"}),(0,b.jsx)("p",{className:"text-sm",children:"El usuario no tiene una suscripción activa"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-sm font-medium",children:"Agregar Suscripción Manual"}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-xs text-muted-foreground",children:"Plan"}),(0,b.jsxs)(b$.Select,{value:z.plan_name,onValueChange:a=>{let b=f.find(b=>b.name===a);A({plan_name:a}),b&&C({price:b.price.toString()})},children:[(0,b.jsx)(b$.SelectTrigger,{className:"h-9 bg-background",children:(0,b.jsx)(b$.SelectValue,{placeholder:"Seleccionar plan"})}),(0,b.jsx)(b$.SelectContent,{children:f.map(a=>(0,b.jsxs)(b$.SelectItem,{value:a.name,children:[a.name," - $",a.price]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-xs text-muted-foreground",children:"Precio Acordado"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(b9.DollarSign,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),(0,b.jsx)(ae.Input,{type:"number",step:"0.01",value:B.price,onChange:a=>C({price:a.target.value}),className:"h-9 pl-7 bg-background",placeholder:"0.00"})]})]}),(0,b.jsxs)(X.Button,{onClick:K,disabled:t||!z.plan_name,className:"w-full",children:[(0,b.jsx)(aj,{className:"mr-2 h-4 w-4"})," Crear Suscripción"]})]})]})]})})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(c9.Lock,{className:"h-4 w-4"})," Seguridad de la Cuenta"]}),(0,b.jsx)(ad.Card,{className:"bg-muted/30",children:(0,b.jsxs)(ad.CardContent,{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-background",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:"Restablecer Contraseña"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Envía correo para nueva contraseña."})]}),(0,b.jsxs)(X.Button,{onClick:()=>a.email&&m(a.email),disabled:t||!a.email,size:"sm",variant:"outline",children:[(0,b.jsx)(c7.Mail,{className:"mr-2 h-3 w-3"})," Enviar"]})]}),(0,b.jsxs)("div",{className:"space-y-3 p-3 border rounded-lg bg-background",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:"Cambio Manual de Contraseña"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Establece una nueva contraseña directamente."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(ae.Input,{type:"text",placeholder:"Nueva contraseña",value:F,onChange:a=>G(a.target.value),className:"h-9 text-sm"}),(0,b.jsx)(X.Button,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0",onClick:()=>G(Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8)),title:"Generar aleatoria",children:(0,b.jsx)(b3.RefreshCw,{className:"h-4 w-4"})})]}),(0,b.jsxs)(X.Button,{onClick:L,disabled:t||!F,className:"w-full",size:"sm",children:[(0,b.jsx)(da,{className:"mr-2 h-4 w-4"})," Guardar Nueva Contraseña"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-red-50 border-red-100",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-red-700",children:"Zona de Peligro"}),(0,b.jsx)("p",{className:"text-xs text-red-600/80",children:"Acciones críticas de cuenta."})]}),(0,b.jsxs)(X.Button,{variant:"destructive",size:"sm",children:[(0,b.jsx)(ca.Shield,{className:"mr-2 h-3 w-3"})," Suspender"]})]})]})})]})]})]})}),(0,b.jsx)(W,{value:"billing",className:"space-y-4 py-4 overflow-y-auto px-6",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(b9.DollarSign,{className:"h-4 w-4"})," Información de Pago Actual"]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(ad.Card,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,b.jsxs)(ad.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-green-700 font-medium",children:"Precio Actual"}),(0,b.jsx)(b9.DollarSign,{className:"h-5 w-5 text-green-600"})]}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-800",children:["$",a.subscription?.price?.toFixed(2)||"0.00"]}),(0,b.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Por mes"})]})}),(0,b.jsx)(ad.Card,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,b.jsxs)(ad.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Próxima Facturación"}),(0,b.jsx)(b5,{className:"h-5 w-5 text-blue-600"})]}),(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:a.subscription?.next_billing_date?cY(new Date(a.subscription.next_billing_date),"dd MMM yyyy",{locale:c1}):"No programada"}),(0,b.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Renovación automática"})]})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(db.FileText,{className:"h-4 w-4"})," Historial de Facturas"]}),(0,b.jsx)("div",{className:"border rounded-md",children:q?(0,b.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando facturas..."}):o.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"ID"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Fecha"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Monto"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Estado"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:o.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{className:"px-4 py-3 font-mono text-xs",children:[a.id.slice(0,8),"..."]}),(0,b.jsx)("td",{className:"px-4 py-3",children:cY(new Date(a.invoice_date),"dd/MM/yyyy")}),(0,b.jsxs)("td",{className:"px-4 py-3",children:["$",a.amount.toFixed(2)]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(av,{variant:"paid"===a.status?"default":"secondary",className:"paid"===a.status?"bg-green-100 text-green-800 hover:bg-green-100":"",children:"paid"===a.status?"Pagado":a.status})})]},a.id))})]})}):(0,b.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No hay facturas registradas"})})]})]})}),(0,b.jsx)(W,{value:"communications",className:"flex-1 overflow-y-auto px-6 py-4 mt-0",children:(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-4 border-2 border-dashed rounded-lg",children:[(0,b.jsx)("div",{className:"p-4 bg-muted rounded-full",children:(0,b.jsx)(dc,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Centro de Comunicaciones"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-sm mx-auto",children:"Próximamente podrás enviar correos y mensajes de WhatsApp directamente desde aquí."})]}),(0,b.jsx)(X.Button,{variant:"outline",disabled:!0,children:"Nueva Comunicación"})]})})}),(0,b.jsx)(W,{value:"history",className:"flex-1 overflow-y-auto px-6 py-4 mt-0",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2 text-primary border-b pb-2",children:[(0,b.jsx)(b5,{className:"h-4 w-4"})," Registro de Actividad"]}),(0,b.jsx)("div",{className:"space-y-4",children:p?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando historial..."}):n.length>0?(0,b.jsx)("div",{className:"relative pl-4 border-l-2 border-muted space-y-6",children:n.map(a=>(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute -left-[21px] top-1 h-3 w-3 rounded-full bg-primary/20 border-2 border-primary"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium text-sm",children:a.action}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:cY(new Date(a.created_at),"dd MMM yyyy HH:mm",{locale:c1})})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground bg-muted/30 p-2 rounded border font-mono",children:JSON.stringify(a.details,null,2)})]})]},a.id))}):(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No hay actividad registrada"})})]})})]})]})}):null}function de(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)("all"),[k,l]=(0,c.useState)("all"),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)({title:"",message:"",type:"info"}),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(new Set),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)([]),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)(!1),[W,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)({email:"",password:"",first_name:"",last_name:"",whatsapp:"",plan_id:"",plan_name:"",price:"",iptv_username:"",iptv_password:""}),{toast:aj}=(0,am.useToast)();(0,c.useEffect)(()=>{an(),ak(),ao()},[]);let ak=async()=>{let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("plans").select("id, name, price").order("name");!c&&b&&r(b)},an=async()=>{let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("profiles").select("*").order("created_at",{ascending:!1});if(c){aj({variant:"destructive",title:"Error al cargar usuarios",description:c.message}),f(!1);return}let{data:e}=await a.from("subscriptions").select("*"),{data:g}=await a.from("credentials").select("*");d(b.map(a=>({...a,subscription:e?.find(b=>b.user_id===a.id)||null,credentials:g?.find(b=>b.user_id===a.id)||null}))),f(!1)},ao=async()=>{let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("notification_batches").select("*").order("created_at",{ascending:!1});b&&P(b)},aq=async a=>{V(!0);let b=(0,ai.createBrowserClient)(),{data:c,error:d}=await b.from("user_logs").select("*").eq("user_id",a).order("created_at",{ascending:!1});c&&T(c),V(!1)},ar=async a=>{$(!0);let b=(0,ai.createBrowserClient)(),{data:c,error:d}=await b.from("invoices").select("*").eq("user_id",a).order("created_at",{ascending:!1}).limit(10);c&&Y(c),$(!1)},as=async(a,b,c)=>{let d=(0,ai.createBrowserClient)(),{data:{user:e}}=await d.auth.getUser();await d.from("user_logs").insert({user_id:a,admin_id:e?.id,action:b,details:c}),m?.id===a&&aq(a)},at=a.filter(a=>{let b=`${a.first_name||""} ${a.last_name||""}`.trim().toLowerCase().includes(g.toLowerCase())||(a.email?.toLowerCase()||"").includes(g.toLowerCase())||(a.whatsapp||"").includes(g),c="all"===i||a.subscription?.status===i,d="all"===k||a.subscription?.plan_name===k;return b&&c&&d}),au=async(a,b)=>{v(!0);let c=(0,ai.createBrowserClient)(),{error:d}=await c.from("profiles").update({first_name:b.first_name,last_name:b.last_name,email:b.email,whatsapp:b.whatsapp}).eq("id",a);d?aj({variant:"destructive",title:"Error al actualizar perfil",description:d.message}):(aj({title:"Perfil actualizado",description:"Los datos del usuario han sido actualizados correctamente."}),an(),m&&(as(a,"UPDATE_PROFILE",{previous:m,new:b}),n({...m,...b}))),v(!1)},aC=async()=>{if(!ab.email||!ab.password)return void aj({variant:"destructive",title:"Campos requeridos",description:"El email y la contraseña son obligatorios."});v(!0);let a="";if(ab.plan_id){let b=q.find(a=>a.id===ab.plan_id);b&&(a=b.name)}if(!ab.email||!ab.password)return void aj({variant:"destructive",title:"Campos requeridos",description:"Por favor ingresa email y contraseña."});if(ab.password.length<6)return void aj({variant:"destructive",title:"Contraseña muy corta",description:"La contraseña debe tener al menos 6 caracteres."});let b=await c4({...ab,plan_name:a});b.success?(aj({title:"Usuario creado",description:"El usuario ha sido creado exitosamente."}),aa(!1),ac({email:"",password:"",first_name:"",last_name:"",whatsapp:"",plan_id:"",plan_name:"",price:"",iptv_username:"",iptv_password:""}),an()):aj({variant:"destructive",title:"Error al crear usuario",description:b.error}),v(!1)},aD=async(b,c)=>{if(!m?.subscription?.id)return;v(!0);let e=(0,ai.createBrowserClient)(),f={},g=!1;if(c.plan_name&&c.plan_name!==m.subscription.plan_name){let a=q.find(a=>a.name===c.plan_name);a&&(f.plan_id=a.id,f.plan_name=a.name,g=!0)}if(void 0!==c.price&&c.price!==m.subscription.price&&(f.price=c.price,g=!0),c.next_billing_date){let a=new Date(c.next_billing_date),b=new Date(m.subscription.next_billing_date);a.toISOString().split("T")[0]!==b.toISOString().split("T")[0]&&(f.next_billing_date=a.toISOString(),g=!0)}if(!g)return void v(!1);f.updated_at=new Date().toISOString();let{error:h}=await e.from("subscriptions").update(f).eq("id",m.subscription.id);if(h)aj({variant:"destructive",title:"Error al actualizar suscripción",description:h.message});else{aj({title:"Suscripción actualizada",description:"Los detalles de la suscripción han sido guardados."});let c={...m,subscription:{...m.subscription,...f}};n(c),d(a.map(a=>a.id===c.id?c:a)),as(b,"UPDATE_SUBSCRIPTION",{updates:f})}v(!1)},aE=async(a,b)=>{v(!0);let c=q.find(a=>a.name===b.plan_name);if(!c){aj({variant:"destructive",title:"Error",description:"Plan no válido"}),v(!1);return}let d=await c6({user_id:a,plan_id:c.id,plan_name:c.name,price:b.price||c.price});d.success?(aj({title:"Suscripción creada exitosamente"}),an(),p(!1)):aj({variant:"destructive",title:"Error",description:d.error}),v(!1)},aF=async(a,b)=>{v(!0);let c=await c5(a,b);c.success?(aj({title:"Contraseña actualizada",description:"La contraseña del usuario ha sido cambiada exitosamente."}),as(a,"UPDATE_PASSWORD_MANUAL",{userId:a})):aj({variant:"destructive",title:"Error",description:c.error}),v(!1)},aG=async a=>{v(!0);let b=(0,ai.createBrowserClient)(),{error:c}=await b.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}/auth/update-password`});c?aj({variant:"destructive",title:"Error al enviar correo",description:c.message}):(aj({variant:"success",title:"Correo enviado",description:`Se ha enviado un correo de restablecimiento a ${a}`}),m&&await as(m.id,"send_password_reset",{})),v(!1)},aH=async(b,c)=>{v(!0);let e=(0,ai.createBrowserClient)(),f=m?.credentials?.username,{error:g}=await e.from("credentials").update({username:c.username,password:c.password,updated_at:new Date().toISOString()}).eq("user_id",b);g?aj({variant:"destructive",title:"Error al actualizar",description:g.message}):(aj({variant:"success",title:"Credenciales actualizadas",description:"Las credenciales IPTV han sido actualizadas correctamente"}),d(a.map(a=>a.id===b?{...a,credentials:{...a.credentials,username:c.username,password:c.password}}:a)),m&&m.id===b&&n({...m,credentials:{...m.credentials,username:c.username,password:c.password}}),as(b,"update_credentials",{previous_username:f,new_username:c.username})),v(!1)},aI=async(b,c)=>{v(!0);let e=(0,ai.createBrowserClient)(),{error:f}=await e.from("subscriptions").update({status:c,updated_at:new Date().toISOString()}).eq("user_id",b);f?aj({variant:"destructive",title:"Error al actualizar estado",description:f.message}):(aj({variant:"success",title:"Estado actualizado",description:`El estado de la suscripci\xf3n se ha actualizado a ${c}`}),d(a.map(a=>a.id===b&&a.subscription?{...a,subscription:{...a.subscription,status:c}}:a)),m&&m.id===b&&m.subscription&&n({...m,subscription:{...m.subscription,status:c}}),as(b,"update_status",{status:c})),v(!1)},aJ=a=>{let b=new Set(w);b.has(a)?b.delete(a):b.add(a),x(b)},aK=async()=>{if(0===w.size)return;v(!0);let a=(0,ai.createBrowserClient)(),{data:b,error:c}=await a.from("notification_batches").insert({title:s.title,message:s.message,type:s.type,target_count:w.size}).select().single();if(c||!b){aj({variant:"destructive",title:"Error",description:"No se pudo crear el envío masivo"}),v(!1);return}let d=Array.from(w).map(a=>({user_id:a,title:s.title,message:s.message,type:s.type,batch_id:b.id})),{error:e}=await a.from("notifications").insert(d);e?aj({variant:"destructive",title:"Error parcial",description:"Algunas notificaciones fallaron"}):(aj({variant:"success",title:"Enviado",description:`Se enviaron ${w.size} notificaciones`}),z(!1),t({title:"",message:"",type:"info"}),x(new Set),ao(),Array.from(w).forEach(a=>{as(a,"receive_bulk_notification",{batch_id:b.id,title:s.title})})),v(!1)},aL=async()=>{if(0===w.size||!I)return;v(!0);let a=(0,ai.createBrowserClient)(),{data:b}=await a.from("plans").select("price").eq("name",I).single(),c={plan_name:I,updated_at:new Date().toISOString()};b&&(c.price=b.price);let{error:d}=await a.from("subscriptions").update(c).in("user_id",Array.from(w));d?aj({variant:"destructive",title:"Error",description:"No se pudieron actualizar los planes"}):(aj({variant:"success",title:"Planes actualizados",description:`Se actualiz\xf3 el plan de ${w.size} usuarios`}),B(!1),x(new Set),an(),Array.from(w).forEach(a=>{as(a,"change_plan",{previous:"N/A",new:I,new_price:b?.price})})),v(!1)},aM=async()=>{if(0===w.size||!K)return;v(!0);let a=(0,ai.createBrowserClient)(),{error:b}=await a.from("subscriptions").update({status:K,updated_at:new Date().toISOString()}).in("user_id",Array.from(w));b?aj({variant:"destructive",title:"Error",description:"No se pudieron actualizar los estados"}):(aj({variant:"success",title:"Estados actualizados",description:`Se actualiz\xf3 el estado de ${w.size} usuarios`}),D(!1),x(new Set),an(),Array.from(w).forEach(a=>{as(a,"change_status",{previous:"N/A",new:K})})),v(!1)},aN=async()=>{if(0===w.size||!M)return;v(!0);let a=(0,ai.createBrowserClient)(),b=new Date(M),{error:c}=await a.from("subscriptions").update({next_billing_date:b.toISOString(),updated_at:new Date().toISOString()}).in("user_id",Array.from(w));c?aj({variant:"destructive",title:"Error",description:"No se pudieron actualizar las fechas"}):(aj({variant:"success",title:"Fechas actualizadas",description:`Se actualiz\xf3 la fecha de facturaci\xf3n de ${w.size} usuarios`}),F(!1),x(new Set),an(),Array.from(w).forEach(a=>{as(a,"update_billing_date",{previous:"N/A",new:b.toISOString()})})),v(!1)},aO=async()=>{if(0===w.size)return;v(!0);let a=await c3(Array.from(w));a.success?(aj({variant:"success",title:"Usuarios eliminados",description:`Se eliminaron ${w.size} usuarios permanentemente`}),H(!1),x(new Set),an(),Array.from(w).forEach(a=>{as(a,"bulk_delete",{})})):aj({variant:"destructive",title:"Error",description:a.error}),v(!1)},aP=async a=>{let b=(0,ai.createBrowserClient)(),{error:c}=await b.from("notification_batches").delete().eq("id",a);c?aj({variant:"destructive",title:"Error",description:"No se pudo eliminar el envío"}):(aj({variant:"success",title:"Eliminado",description:"Se eliminaron las notificaciones enviadas"}),ao(),await as("system","delete_notification_batch",{batch_id:a}))};return e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Gestión de Usuarios"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Administra tus clientes y suscripciones"})]}),(0,b.jsxs)(X.Button,{variant:"outline",onClick:()=>R(!Q),children:[(0,b.jsx)(b5,{className:"mr-2 h-4 w-4"}),Q?"Ver Usuarios":"Historial de Envíos"]})]}),Q?(0,b.jsxs)(ad.Card,{children:[(0,b.jsxs)(ad.CardHeader,{children:[(0,b.jsx)(ad.CardTitle,{children:"Historial de Notificaciones Masivas"}),(0,b.jsx)(ad.CardDescription,{children:"Gestiona los envíos realizados. Eliminar un envío borrará las notificaciones de los usuarios."})]}),(0,b.jsx)(ad.CardContent,{children:(0,b.jsxs)(aw,{children:[(0,b.jsx)(ax,{children:(0,b.jsxs)(az,{children:[(0,b.jsx)(aA,{children:"Fecha"}),(0,b.jsx)(aA,{children:"Título"}),(0,b.jsx)(aA,{children:"Mensaje"}),(0,b.jsx)(aA,{children:"Destinatarios"}),(0,b.jsx)(aA,{className:"text-right",children:"Acciones"})]})}),(0,b.jsxs)(ay,{children:[O.map(a=>(0,b.jsxs)(az,{children:[(0,b.jsx)(aB,{children:cY(new Date(a.created_at),"PPP p",{locale:c1})}),(0,b.jsx)(aB,{className:"font-medium",children:a.title}),(0,b.jsx)(aB,{className:"max-w-md truncate",children:a.message}),(0,b.jsx)(aB,{children:(0,b.jsxs)(av,{variant:"secondary",children:[a.target_count," usuarios"]})}),(0,b.jsx)(aB,{className:"text-right",children:(0,b.jsxs)(X.Button,{variant:"destructive",size:"sm",onClick:()=>aP(a.id),children:[(0,b.jsx)(al.Trash2,{className:"h-4 w-4 mr-2"})," Eliminar / Cancelar"]})})]},a.id)),0===O.length&&(0,b.jsx)(az,{children:(0,b.jsx)(aB,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No hay envíos masivos registrados"})})]})]})})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(ad.Card,{className:"overflow-hidden border-none shadow-md",children:[(0,b.jsxs)("div",{className:"p-4 border-b bg-muted/30 flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,b.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,b.jsx)(b_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-primary"}),(0,b.jsx)(ae.Input,{placeholder:"Buscar por nombre, email...",value:g,onChange:a=>h(a.target.value),className:"pl-9 border-primary/30 focus-visible:ring-primary bg-background shadow-sm"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[(0,b.jsxs)(X.Button,{onClick:()=>aa(!0),className:"gap-2 w-full sm:w-auto",children:[(0,b.jsx)(b1.User,{className:"h-4 w-4"}),"Agregar Usuario"]}),(0,b.jsxs)(b$.Select,{value:i,onValueChange:j,children:[(0,b.jsx)(b$.SelectTrigger,{className:"w-full sm:w-[160px] bg-background",children:(0,b.jsx)(b$.SelectValue,{placeholder:"Estado"})}),(0,b.jsxs)(b$.SelectContent,{children:[(0,b.jsx)(b$.SelectItem,{value:"all",children:"Todos los estados"}),(0,b.jsx)(b$.SelectItem,{value:"active",children:"Activo"}),(0,b.jsx)(b$.SelectItem,{value:"inactive",children:"Inactivo"}),(0,b.jsx)(b$.SelectItem,{value:"cancelled",children:"Cancelado"})]})]}),(0,b.jsxs)(b$.Select,{value:k,onValueChange:l,children:[(0,b.jsx)(b$.SelectTrigger,{className:"w-full sm:w-[180px] bg-background",children:(0,b.jsx)(b$.SelectValue,{placeholder:"Plan"})}),(0,b.jsxs)(b$.SelectContent,{children:[(0,b.jsx)(b$.SelectItem,{value:"all",children:"Todos los planes"}),q.map(a=>(0,b.jsx)(b$.SelectItem,{value:a.name,children:a.name},a.id))]})]})]})]}),w.size>0&&(0,b.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-background border shadow-xl rounded-full px-6 py-3 flex items-center gap-4 animate-in slide-in-from-bottom-4 duration-200",children:[(0,b.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2 border-r pr-4",children:[(0,b.jsx)("div",{className:"bg-primary text-primary-foreground rounded-full w-5 h-5 flex items-center justify-center text-xs",children:w.size}),"seleccionados"]}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)(X.Button,{size:"sm",variant:"ghost",onClick:()=>B(!0),title:"Cambiar Plan",children:(0,b.jsx)(b6.CreditCard,{className:"h-4 w-4"})}),(0,b.jsx)(X.Button,{size:"sm",variant:"ghost",onClick:()=>D(!0),title:"Cambiar Estado",children:(0,b.jsx)(b3.RefreshCw,{className:"h-4 w-4"})}),(0,b.jsx)(X.Button,{size:"sm",variant:"ghost",onClick:()=>F(!0),title:"Cambiar Fecha",children:(0,b.jsx)(ap.Calendar,{className:"h-4 w-4"})}),(0,b.jsx)(X.Button,{size:"sm",variant:"ghost",onClick:()=>z(!0),title:"Enviar Notificación",children:(0,b.jsx)(b2.Bell,{className:"h-4 w-4"})}),(0,b.jsx)("div",{className:"h-4 w-px bg-border mx-1"}),(0,b.jsx)(X.Button,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>H(!0),title:"Eliminar",children:(0,b.jsx)(al.Trash2,{className:"h-4 w-4"})}),(0,b.jsx)(X.Button,{size:"sm",variant:"ghost",onClick:()=>x(new Set),children:(0,b.jsx)(b7.XCircle,{className:"h-4 w-4"})})]})]}),(0,b.jsx)(ad.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(aw,{className:"w-full min-w-[1000px]",children:[(0,b.jsx)(ax,{children:(0,b.jsxs)(az,{className:"bg-muted/50 hover:bg-muted/50",children:[(0,b.jsx)(aA,{className:"w-[50px] pl-4",children:(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(co,{checked:at.length>0&&w.size===at.length,onCheckedChange:()=>{w.size===at.length?x(new Set):x(new Set(at.map(a=>a.id)))},className:"h-5 w-5 scale-125 border-2 border-muted-foreground/50 data-[state=checked]:border-primary data-[state=checked]:bg-primary transition-all"})})}),(0,b.jsx)(aA,{className:"w-[20%]",children:"Usuario"}),(0,b.jsx)(aA,{className:"w-[15%]",children:"Contacto"}),(0,b.jsx)(aA,{className:"w-[12%]",children:"Plan Actual"}),(0,b.jsx)(aA,{className:"w-[12%]",children:"Costo"}),(0,b.jsx)(aA,{className:"w-[12%]",children:"Próximo Pago"}),(0,b.jsx)(aA,{className:"w-[10%]",children:"Estado"}),(0,b.jsx)(aA,{className:"w-[14%]",children:"Registro"}),(0,b.jsx)(aA,{className:"text-right w-[5%]",children:"Acciones"})]})}),(0,b.jsx)(ay,{children:0===at.length?(0,b.jsx)(az,{children:(0,b.jsx)(aB,{colSpan:9,className:"text-center py-12 text-muted-foreground",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(b1.User,{className:"h-8 w-8 opacity-20"}),(0,b.jsx)("p",{children:"No se encontraron usuarios con los filtros seleccionados"})]})})}):at.map(a=>(0,b.jsxs)(az,{className:`hover: bg - muted / 50 transition - colors cursor - pointer ${w.has(a.id)?"bg-primary/5 border-l-2 border-l-primary":"border-l-2 border-l-transparent"} `,onClick:b=>{b.target.closest("button")||b.target.closest("a")||b.target.closest('[role="checkbox"]')||aJ(a.id)},children:[(0,b.jsx)(aB,{className:"pl-4 py-4",children:(0,b.jsx)("div",{className:"flex items-center justify-center",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(co,{checked:w.has(a.id),onCheckedChange:()=>aJ(a.id),className:"h-5 w-5 scale-125 border-2 border-muted-foreground/50 data-[state=checked]:border-primary data-[state=checked]:bg-primary transition-all"})})}),(0,b.jsx)(aB,{children:(0,b.jsxs)("div",{className:"flex flex-col max-w-[200px]",children:[(0,b.jsx)("span",{className:"font-medium truncate",title:`${a.first_name||""} ${a.last_name||""} `.trim(),children:`${a.first_name||""} ${a.last_name||""} `.trim()||"Sin nombre"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground truncate",title:a.email||"",children:a.email})]})}),(0,b.jsx)(aB,{children:(0,b.jsx)("div",{className:"flex items-center gap-2 text-sm",children:a.whatsapp?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(b8.Phone,{className:"h-3 w-3 text-green-500 shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.whatsapp})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"})})}),(0,b.jsx)(aB,{children:a.subscription?(0,b.jsx)(av,{variant:"outline",className:"font-normal bg-background",children:a.subscription.plan_name}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Sin suscripción"})}),(0,b.jsx)(aB,{children:a.subscription?(0,b.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-primary",children:[(0,b.jsx)(b9.DollarSign,{className:"h-3 w-3"}),a.subscription.price.toFixed(2)]}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,b.jsx)(aB,{children:a.subscription?.next_billing_date?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(ap.Calendar,{className:"h-3 w-3"}),cY(new Date(a.subscription.next_billing_date),"dd/MM/yyyy")]}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,b.jsx)(aB,{children:(0,b.jsx)(av,{className:function(a){switch(a){case"active":return"bg-green-500/10 text-green-500 hover:bg-green-500/20";case"inactive":return"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20";case"cancelled":return"bg-red-500/10 text-red-500 hover:bg-red-500/20";default:return"bg-gray-500/10 text-gray-500 hover:bg-gray-500/20"}}(a.subscription?.status),children:function(a){switch(a){case"active":return"Activo";case"inactive":return"Inactivo";case"cancelled":return"Cancelado";default:return"Sin Plan"}}(a.subscription?.status)})}),(0,b.jsx)(aB,{className:"text-sm text-muted-foreground",children:cY(new Date(a.created_at),"dd/MM/yyyy",{locale:c1})}),(0,b.jsx)(aB,{className:"text-right",children:(0,b.jsxs)(bU,{children:[(0,b.jsx)(bV,{asChild:!0,children:(0,b.jsx)(X.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(b0,{className:"h-4 w-4"})})}),(0,b.jsxs)(bW,{align:"end",children:[(0,b.jsx)(bY,{children:"Acciones"}),(0,b.jsxs)(bX,{onClick:()=>{n(a),p(!0),aq(a.id),ar(a.id)},children:[(0,b.jsx)(b1.User,{className:"mr-2 h-4 w-4"})," Ver Detalles"]}),(0,b.jsx)(bZ,{}),(0,b.jsxs)(bX,{className:"text-red-600",children:[(0,b.jsx)(ca.Shield,{className:"mr-2 h-4 w-4"})," Suspender Cuenta"]})]})]})})]},a.id))})]})})})]})}),(0,b.jsx)(ah.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(ah.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:"Enviar Notificación Masiva"}),(0,b.jsxs)(ah.DialogDescription,{children:["Se enviará a ",w.size," usuarios seleccionados."]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Título"}),(0,b.jsx)(ae.Input,{placeholder:"Ej: Mantenimiento programado",value:s.title,onChange:a=>t({...s,title:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Tipo"}),(0,b.jsxs)(b$.Select,{value:s.type,onValueChange:a=>t({...s,type:a}),children:[(0,b.jsx)(b$.SelectTrigger,{children:(0,b.jsx)(b$.SelectValue,{})}),(0,b.jsxs)(b$.SelectContent,{children:[(0,b.jsx)(b$.SelectItem,{value:"info",children:"Información"}),(0,b.jsx)(b$.SelectItem,{value:"success",children:"Éxito"}),(0,b.jsx)(b$.SelectItem,{value:"warning",children:"Advertencia"}),(0,b.jsx)(b$.SelectItem,{value:"error",children:"Error"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Mensaje"}),(0,b.jsx)(ag,{placeholder:"Escribe el mensaje para los usuarios...",value:s.message,onChange:a=>t({...s,message:a.target.value})})]})]}),(0,b.jsxs)(ah.DialogFooter,{children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>z(!1),children:"Cancelar"}),(0,b.jsx)(X.Button,{onClick:aK,disabled:u,children:u?"Enviando...":"Enviar a Todos"})]})]})}),(0,b.jsx)(ah.Dialog,{open:A,onOpenChange:B,children:(0,b.jsxs)(ah.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:"Cambiar Plan Masivamente"}),(0,b.jsxs)(ah.DialogDescription,{children:["Selecciona el nuevo plan para los ",w.size," usuarios seleccionados."]})]}),(0,b.jsx)("div",{className:"space-y-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Nuevo Plan"}),(0,b.jsxs)(b$.Select,{value:I,onValueChange:J,children:[(0,b.jsx)(b$.SelectTrigger,{children:(0,b.jsx)(b$.SelectValue,{placeholder:"Seleccionar plan"})}),(0,b.jsx)(b$.SelectContent,{children:q.map(a=>(0,b.jsx)(b$.SelectItem,{value:a.name,children:a.name},a.id))})]})]})}),(0,b.jsxs)(ah.DialogFooter,{children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>B(!1),children:"Cancelar"}),(0,b.jsx)(X.Button,{onClick:aL,disabled:u||!I,children:u?"Actualizando...":"Actualizar Planes"})]})]})}),(0,b.jsx)(ah.Dialog,{open:C,onOpenChange:D,children:(0,b.jsxs)(ah.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:"Cambiar Estado Masivamente"}),(0,b.jsxs)(ah.DialogDescription,{children:["Selecciona el nuevo estado para los ",w.size," usuarios seleccionados."]})]}),(0,b.jsx)("div",{className:"space-y-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Nuevo Estado"}),(0,b.jsxs)(b$.Select,{value:K,onValueChange:L,children:[(0,b.jsx)(b$.SelectTrigger,{children:(0,b.jsx)(b$.SelectValue,{placeholder:"Seleccionar estado"})}),(0,b.jsxs)(b$.SelectContent,{children:[(0,b.jsx)(b$.SelectItem,{value:"active",children:"Activo"}),(0,b.jsx)(b$.SelectItem,{value:"inactive",children:"Inactivo"}),(0,b.jsx)(b$.SelectItem,{value:"cancelled",children:"Cancelado"})]})]})]})}),(0,b.jsxs)(ah.DialogFooter,{children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>D(!1),children:"Cancelar"}),(0,b.jsx)(X.Button,{onClick:aM,disabled:u||!K,children:u?"Actualizando...":"Actualizar Estados"})]})]})}),(0,b.jsx)(ah.Dialog,{open:E,onOpenChange:F,children:(0,b.jsxs)(ah.DialogContent,{className:"max-w-[90vw] sm:max-w-lg",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:"Cambiar Fecha de Facturación Masivamente"}),(0,b.jsxs)(ah.DialogDescription,{children:["Selecciona la nueva fecha de facturación para los ",w.size," usuarios seleccionados."]})]}),(0,b.jsx)("div",{className:"space-y-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Nueva Fecha"}),(0,b.jsx)(ae.Input,{type:"date",value:M,onChange:a=>N(a.target.value)})]})}),(0,b.jsxs)(ah.DialogFooter,{children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),(0,b.jsx)(X.Button,{onClick:aN,disabled:u||!M,children:u?"Actualizando...":"Actualizar Fechas"})]})]})}),(0,b.jsx)(ah.Dialog,{open:G,onOpenChange:H,children:(0,b.jsxs)(ah.DialogContent,{children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsxs)(ah.DialogTitle,{className:"text-red-600 flex items-center gap-2",children:[(0,b.jsx)(b4.AlertTriangle,{className:"h-5 w-5"})," Eliminar Usuarios"]}),(0,b.jsxs)(ah.DialogDescription,{children:["¿Estás seguro de que deseas eliminar a los ",w.size," usuarios seleccionados? Esta acción es irreversible y eliminará todos sus datos, suscripciones y credenciales."]})]}),(0,b.jsxs)(ah.DialogFooter,{children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>H(!1),children:"Cancelar"}),(0,b.jsx)(X.Button,{variant:"destructive",onClick:aO,disabled:u,children:u?"Eliminando...":"Sí, Eliminar Usuarios"})]})]})}),(0,b.jsx)(dd,{user:m,isOpen:o,onClose:()=>p(!1),availablePlans:q,onUpdateProfile:au,onUpdateIptvCredentials:aH,onUpdateSubscriptionDetails:aD,onUpdateSubscriptionStatus:aI,onCreateSubscription:aE,onManualPasswordUpdate:aF,onSendPasswordReset:aG,userLogs:S,userInvoices:W,loadingLogs:U,loadingInvoices:Z}),(0,b.jsx)(ah.Dialog,{open:_,onOpenChange:aa,children:(0,b.jsxs)(ah.DialogContent,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(ah.DialogHeader,{children:[(0,b.jsx)(ah.DialogTitle,{children:"Agregar Nuevo Usuario"}),(0,b.jsx)(ah.DialogDescription,{children:"Crea un nuevo usuario manualmente. Se creará la cuenta de acceso y opcionalmente la suscripción."})]}),(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Credenciales de Acceso (Obligatorio)"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(af.Label,{htmlFor:"new-email",children:["Email ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(ae.Input,{id:"new-email",type:"email",placeholder:"cliente@ejemplo.com",value:ab.email,onChange:a=>ac({...ab,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(af.Label,{htmlFor:"new-password",children:["Contraseña ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(ae.Input,{id:"new-password",type:"text",placeholder:"Contraseña segura",value:ab.password,onChange:a=>ac({...ab,password:a.target.value}),required:!0}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Mínimo 6 caracteres"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Información Personal"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"new-firstname",children:"Nombre"}),(0,b.jsx)(ae.Input,{id:"new-firstname",placeholder:"Juan",value:ab.first_name,onChange:a=>ac({...ab,first_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"new-lastname",children:"Apellido"}),(0,b.jsx)(ae.Input,{id:"new-lastname",placeholder:"Pérez",value:ab.last_name,onChange:a=>ac({...ab,last_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"new-whatsapp",children:"WhatsApp"}),(0,b.jsx)(ae.Input,{id:"new-whatsapp",placeholder:"+593...",value:ab.whatsapp,onChange:a=>ac({...ab,whatsapp:a.target.value})})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Suscripción Inicial (Opcional)"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{children:"Plan"}),(0,b.jsxs)(b$.Select,{value:ab.plan_id,onValueChange:a=>{let b=q.find(b=>b.id===a);ac({...ab,plan_id:a,price:b?b.price.toString():""})},children:[(0,b.jsx)(b$.SelectTrigger,{children:(0,b.jsx)(b$.SelectValue,{placeholder:"Seleccionar plan"})}),(0,b.jsx)(b$.SelectContent,{children:q.map(a=>(0,b.jsxs)(b$.SelectItem,{value:a.id,children:[a.name," - $",a.price]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"new-price",children:"Precio Acordado"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(b9.DollarSign,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(ae.Input,{id:"new-price",className:"pl-9",placeholder:"0.00",value:ab.price,onChange:a=>ac({...ab,price:a.target.value})})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Credenciales IPTV (Opcional)"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"new-iptv-user",children:"Usuario IPTV"}),(0,b.jsx)(ae.Input,{id:"new-iptv-user",placeholder:"user123",value:ab.iptv_username,onChange:a=>ac({...ab,iptv_username:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"new-iptv-pass",children:"Contraseña IPTV"}),(0,b.jsx)(ae.Input,{id:"new-iptv-pass",placeholder:"pass123",value:ab.iptv_password,onChange:a=>ac({...ab,iptv_password:a.target.value})})]})]})]})]}),(0,b.jsxs)(ah.DialogFooter,{children:[(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>aa(!1),children:"Cancelar"}),(0,b.jsx)(X.Button,{onClick:aC,disabled:u,children:u?"Creando...":"Crear Usuario"})]})]})})]})}function df(){let[a,d]=(0,c.useState)({totalUsers:0,activePlans:0,activePromotions:0,activeCoupons:0,monthlyRevenue:0}),[e,f]=(0,c.useState)(!0);(0,c.useEffect)(()=>{g()},[]);let g=async()=>{let a=(0,ai.createBrowserClient)(),[b,c,e,g]=await Promise.all([a.from("subscriptions").select("user_id",{count:"exact"}),a.from("plans").select("*",{count:"exact"}),a.from("promotions").select("*",{count:"exact"}).eq("active",!0),a.from("coupons").select("*",{count:"exact"}).eq("active",!0)]);d({totalUsers:b.data?new Set(b.data.map(a=>a.user_id)).size:0,activePlans:c.count||c.data?.length||0,activePromotions:e.count||e.data?.length||0,activeCoupons:g.count||g.data?.length||0,monthlyRevenue:0}),f(!1)},h=[{title:"Usuarios Totales",value:a.totalUsers,icon:ac,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Paquetes Activos",value:a.activePlans,icon:Z,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Promociones Activas",value:a.activePromotions,icon:$,color:"text-orange-600",bgColor:"bg-orange-50"},{title:"Cupones Activos",value:a.activeCoupons,icon:_,color:"text-green-600",bgColor:"bg-green-50"}];return e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:h.map(a=>(0,b.jsxs)(ad.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,b.jsxs)(ad.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(ad.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:a.title}),(0,b.jsx)("div",{className:`${a.bgColor} p-2 rounded-lg`,children:(0,b.jsx)(a.icon,{className:`h-5 w-5 ${a.color}`})})]}),(0,b.jsx)(ad.CardContent,{children:(0,b.jsx)("div",{className:"text-3xl font-bold",children:a.value})})]},a.title))})}var dg=a.i(81010);function dh(){let a=(0,dg.useRouter)(),c=async()=>{let b=(0,ai.createBrowserClient)();await b.auth.signOut(),a.push("/auth/login")};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Panel de Administración"}),(0,b.jsx)("p",{className:"text-sm md:text-base text-muted-foreground mt-1 md:mt-2",children:"Gestiona paquetes, promociones, cupones y usuarios de tu servicio IPTV"})]}),(0,b.jsxs)(X.Button,{variant:"outline",onClick:c,className:"gap-2 w-full md:w-auto",children:[(0,b.jsx)(ab.LogOut,{className:"h-4 w-4"}),"Cerrar Sesión"]})]}),(0,b.jsxs)(T,{defaultValue:"overview",className:"space-y-6",children:[(0,b.jsx)("div",{className:"overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0",children:(0,b.jsxs)(U,{className:"inline-flex h-auto w-auto p-1 min-w-full md:grid md:w-full md:grid-cols-5 gap-2",children:[(0,b.jsxs)(V,{value:"overview",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,b.jsx)(aa,{className:"h-4 w-4 shrink-0"}),(0,b.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Resumen"})]}),(0,b.jsxs)(V,{value:"users",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,b.jsx)(ac,{className:"h-4 w-4 shrink-0"}),(0,b.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Usuarios"})]}),(0,b.jsxs)(V,{value:"plans",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,b.jsx)(Z,{className:"h-4 w-4 shrink-0"}),(0,b.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Paquetes"})]}),(0,b.jsxs)(V,{value:"promotions",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,b.jsx)($,{className:"h-4 w-4 shrink-0"}),(0,b.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Promociones"})]}),(0,b.jsxs)(V,{value:"coupons",className:"flex items-center gap-2 px-4 py-3 md:py-2 md:px-3",children:[(0,b.jsx)(_,{className:"h-4 w-4 shrink-0"}),(0,b.jsx)("span",{className:"whitespace-nowrap inline md:hidden lg:inline",children:"Cupones"})]})]})}),(0,b.jsx)(W,{value:"overview",children:(0,b.jsx)(df,{})}),(0,b.jsx)(W,{value:"users",children:(0,b.jsx)(de,{})}),(0,b.jsx)(W,{value:"plans",children:(0,b.jsx)(an,{})}),(0,b.jsx)(W,{value:"promotions",children:(0,b.jsx)(aq,{})}),(0,b.jsx)(W,{value:"coupons",children:(0,b.jsx)(as,{})})]})]})})}a.s(["default",()=>dh],6122)}];

//# sourceMappingURL=iptv_components_admin-dashboard_tsx_2518d9cc._.js.map